2017-10-20 14:54:06.030   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 GET http://localhost:27644/   
2017-10-20 14:54:06.156   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 213.6965ms 302  
on schemes (). 
 was challenged. 
2017-10-20 14:54:06.161   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.HomeController.Index (AdminSite) in 24.7783ms 
2017-10-20 14:54:06.161   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization failed for user: (null). 
 'Microsoft.AspNetCore.Mvc.Authorization.AuthorizeFilter'. 
2017-10-20 14:54:06.178   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 GET http://localhost:27644/Account/Login?ReturnUrl=%2F   
2017-10-20 14:54:06.266   Information   Microsoft.EntityFrameworkCore.Infrastructure   Entity Framework Core 2.0.0-rtm-26452 initialized 'PermissionSystemContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging  
2017-10-20 14:54:06.298   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Controllers.AccountController.Login (AdminSite) with arguments (/) - ModelState is Valid 
2017-10-20 14:54:08.843   Information   Microsoft.AspNetCore.Mvc.ViewFeatures.Internal.ViewResultExecutor   Executing ViewResult, running view at path /Views/Account/Login.cshtml. 
2017-10-20 14:54:08.903   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.AccountController.Login (AdminSite) in 2720.5256ms 
2017-10-20 14:54:08.905   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 2742.5435ms 200 text/html; charset=utf-8 
2017-10-20 14:54:08.946   Information   Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware   The file /assets/pages/scripts/login-5.js was not modified 
2017-10-20 14:54:08.947   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 GET http://localhost:27644/assets/pages/2017-10-20 14:54:08.948   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 0.9679ms 304 application/javascript 
2017-10-20 14:54:08.952   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 GET http://localhost:27644/assets/global/scripts/app.js   
2017-10-20 14:54:25.367   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 POST http://localhost:27644/Account/Login application/x-www-form-urlencoded 234 
2017-10-20 14:54:25.378   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Controllers.AccountController.Login (AdminSite) with arguments (ViewModels.AdminWeb.Login.LoginViewModel) - ModelState is Valid 
2017-10-20 14:54:25.568   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (38ms) [Parameters=[@__model_NormalizedLoginName_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[ID], [a].[AccessFailedCount], [a].[CreateDate], [a].[Email], [a].[EmailConfirmed], [a].[ImgUrl], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LoginName], [a].[MobilePhone], [a].[MobilePhoneConfirmed], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedLoginName], [a].[OrganizationID], [a].[Password], [a].[PyCode], [a].[UpdateDate]
FROM [User] AS [a]
WHERE [a].[NormalizedLoginName] = @__model_NormalizedLoginName_0 
2017-10-20 14:54:25.688   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (12ms) [Parameters=[@p17='?', @p0='?', @p1='?', @p2='?' (Size = 4000), @p3='?', @p4='?' (Size = 4000), @p5='?', @p6='?', @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?', @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?', @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?'], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [User] SET [AccessFailedCount] = @p0, [CreateDate] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [ImgUrl] = @p4, [LockoutEnabled] = @p5, [LockoutEnd] = @p6, [LoginName] = @p7, [MobilePhone] = @p8, [MobilePhoneConfirmed] = @p9, [Name] = @p10, [NormalizedEmail] = @p11, [NormalizedLoginName] = @p12, [OrganizationID] = @p13, [Password] = @p14, [PyCode] = @p15, [UpdateDate] = @p16
WHERE [ID] = @p17;
SELECT @@ROWCOUNT; 
2017-10-20 14:54:25.702   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.AccountController.Login (AdminSite) in 338.743ms 
2017-10-20 14:55:33.145   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Controllers.AccountController.Login (AdminSite) with arguments () - ModelState is Valid 
2017-10-20 14:55:33.439   Information   Microsoft.AspNetCore.Mvc.ViewFeatures.Internal.ViewResultExecutor   Executing ViewResult, running view at path /Views/Account/Login.cshtml. 
2017-10-20 14:55:33.458   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 321.0446ms 200 text/html; charset=utf-8 
oller.Login (AdminSite) in 320.0995ms 
2017-10-20 14:55:37.959   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 POST http://localhost:27644/Account/Login application/x-www-form-urlencoded 231 
 (ViewModels.AdminWeb.Login.LoginViewModel) - ModelState is Valid 
2017-10-20 14:55:37.959   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (2ms) [Parameters=[@__model_NormalizedLoginName_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[ID], [a].[AccessFailedCount], [a].[CreateDate], [a].[Email], [a].[EmailConfirmed], [a].[ImgUrl], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LoginName], [a].[MobilePhone], [a].[MobilePhoneConfirmed], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedLoginName], [a].[OrganizationID], [a].[Password], [a].[PyCode], [a].[UpdateDate]
FROM [User] AS [a]
WHERE [a].[NormalizedLoginName] = @__model_NormalizedLoginName_0 
2017-10-20 14:55:37.973   Information   Microsoft.AspNetCore.Mvc.ViewFeatures.Internal.ViewResultExecutor   Executing ViewResult, running view at path /Views/Account/Login.cshtml. 
'?', @p4='?' (Size = 4000), @p5='?', @p6='?', @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?', @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?', @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?'], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [User] SET [AccessFailedCount] = @p0, [CreateDate] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [ImgUrl] = @p4, [LockoutEnabled] = @p5, [LockoutEnd] = @p6, [LoginName] = @p7, [MobilePhone] = @p8, [MobilePhoneConfirmed] = @p9, [Name] = @p10, [NormalizedEmail] = @p11, [NormalizedLoginName] = @p12, [OrganizationID] = @p13, [Password] = @p14, [PyCode] = @p15, [UpdateDate] = @p16
WHERE [ID] = @p17;
SELECT @@ROWCOUNT; 
2017-10-20 14:55:37.977   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 16.9856ms 200 text/html; charset=utf-8 
2017-10-20 14:55:38.056   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 GET http://localhost:27644/assets/global/img/remove-icon-small.png   
2017-10-20 14:55:38.060   Information   Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware   Sending file. Request path: '/assets/global/img/remove-icon-small.png'. Physical path: 'D:\GitSource\OpenNetCore\YXL.OpenNetCore\AdminSite\wwwroot\assets\global\img\remove-icon-small.png' 
2017-10-20 14:55:44.361   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Controllers.AccountController.Login (AdminSite) with arguments (ViewModels.AdminWeb.Login.LoginViewModel) - ModelState is Valid 
2017-10-20 14:55:44.365   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (1ms) [Parameters=[@__model_NormalizedLoginName_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[ID], [a].[AccessFailedCount], [a].[CreateDate], [a].[Email], [a].[EmailConfirmed], [a].[ImgUrl], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[LoginName], [a].[MobilePhone], [a].[MobilePhoneConfirmed], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedLoginName], [a].[OrganizationID], [a].[Password], [a].[PyCode], [a].[UpdateDate]
FROM [User] AS [a]
WHERE [a].[NormalizedLoginName] = @__model_NormalizedLoginName_0 
2017-10-20 14:55:44.383   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (2ms) [Parameters=[@__user_ID_0='?'], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[CreateDate], [a].[RoleID], [a].[UserID]
FROM [UserRole] AS [a]
WHERE [a].[UserID] = @__user_ID_0 
2017-10-20 14:55:44.394   Information   Microsoft.AspNetCore.Mvc.RedirectToActionResult   Executing RedirectResult, redirecting to /. 
s.AccountController.Login (AdminSite) in 48.4909ms 
2017-10-20 14:55:44.404   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
dex (AdminSite) with arguments ((null)) - ModelState is Valid 
2017-10-20 14:55:44.583   Information   Microsoft.AspNetCore.Mvc.ViewFeatures.Internal.ViewResultExecutor   Executing ViewResult, running view at path /Views/Home/Index.cshtml. 
2017-10-20 14:55:48.001   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a]
WHERE ((1 & CASE
    WHEN UPPER([a].[ActionName]) = N'INDEX'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) & CASE
    WHEN UPPER([a].[ControllerName]) = N'HOME'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) = 1 
2017-10-20 14:55:48.064   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (7ms) [Parameters=[@__userID_0='?'], CommandType='Text', CommandTimeout='30']
SELECT DISTINCT [m].[ID], [m].[ActionName], [m].[ApplicationID], [m].[AreaName], [m].[Code], [m].[ControllerName], [m].[CreateDate], [m].[Description], [m].[IconCss], [m].[IsNav], [m].[Name], [m].[ParentID], [m].[PyCode], [m].[ShowIndex]
FROM [Menu] AS [m]
INNER JOIN [UserRoleJurisdiction] AS [urj] ON [m].[ID] = [urj].[MenuID]
INNER JOIN [UserRole] AS [ur] ON [urj].[RoleID] = [ur].[RoleID]
WHERE [ur].[UserID] = @__userID_0 
2017-10-20 14:55:48.092   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[Code], [a].[CreateDate], [a].[Description], [a].[Name], [a].[PyCode], [a].[ShowIndex]
FROM [Application] AS [a] 
2017-10-20 14:55:48.265   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a] 
2017-10-20 14:55:48.547   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.HomeController.Index (AdminSite) in 4139.0962ms 
2017-10-20 14:55:48.561   Information   Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware   The file /lib/icheck/skins/line/select.css was not modified 
line/select.css   
2017-10-20 14:55:48.646   Information   Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware   The file /assets/layouts/layout/scripts/demo.js was not modified 
scripts/demo.js   
2017-10-20 14:55:48.655   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 GET http://localhost:27644/assets/global/scripts/menu.js   
2017-10-20 14:55:48.655   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 0.5375ms 304 application/javascript 
2017-10-20 15:22:51.367   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 GET http://localhost:27644/   
2017-10-20 15:22:51.391   Information   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully authenticated. 
2017-10-20 15:22:51.545   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
2017-10-20 15:22:51.560   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Controllers.HomeController.Index (AdminSite) with arguments ((null)) - ModelState is Valid 
2017-10-20 15:22:53.930   Information   Microsoft.AspNetCore.Mvc.ViewFeatures.Internal.ViewResultExecutor   Executing ViewResult, running view at path /Views/Home/Index.cshtml. 
2017-10-20 15:25:20.692   Information   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully authenticated. 
2017-10-20 15:25:20.804   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Api.AccountController.Get (AdminSite) with arguments ((null)) - ModelState is Valid 
2017-10-20 15:25:20.813   Information   Microsoft.AspNetCore.Mvc.Internal.ObjectResultExecutor   Executing ObjectResult, writing value Microsoft.AspNetCore.Mvc.ControllerContext. 
2017-10-20 15:25:20.870   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 262.6545ms 200 application/json; charset=utf-8 
nSite) in 47.471ms 
2017-10-20 15:25:23.144   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 GET http://localhost:27644/api/v2/account   
2017-10-20 15:25:23.159   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Api.v2.AccountController.Get (AdminSite) in 1.322ms 

2017-10-20 15:25:23.167   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Api.v2.AccountController.Get (AdminSite) with arguments ((null)) - ModelState is Valid 
2017-10-20 15:31:33.968   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 GET http://localhost:27644/   
2017-10-20 15:31:33.999   Information   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully authenticated. 
2017-10-20 15:31:34.134   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Controllers.HomeController.Index (AdminSite) with arguments ((null)) - ModelState is Valid 
2017-10-20 15:31:34.135   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
2017-10-20 15:31:36.599   Information   Microsoft.AspNetCore.Mvc.ViewFeatures.Internal.ViewResultExecutor   Executing ViewResult, running view at path /Views/Home/Index.cshtml. 
2017-10-20 15:31:40.489   Information   Microsoft.EntityFrameworkCore.Infrastructure   Entity Framework Core 2.0.0-rtm-26452 initialized 'PermissionSystemContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging  
2017-10-20 15:31:40.671   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (13ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a]
WHERE ((1 & CASE
    WHEN UPPER([a].[ActionName]) = N'INDEX'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) & CASE
    WHEN UPPER([a].[ControllerName]) = N'HOME'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) = 1 
2017-10-20 15:31:40.747   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (25ms) [Parameters=[@__userID_0='?'], CommandType='Text', CommandTimeout='30']
SELECT DISTINCT [m].[ID], [m].[ActionName], [m].[ApplicationID], [m].[AreaName], [m].[Code], [m].[ControllerName], [m].[CreateDate], [m].[Description], [m].[IconCss], [m].[IsNav], [m].[Name], [m].[ParentID], [m].[PyCode], [m].[ShowIndex]
FROM [Menu] AS [m]
INNER JOIN [UserRoleJurisdiction] AS [urj] ON [m].[ID] = [urj].[MenuID]
INNER JOIN [UserRole] AS [ur] ON [urj].[RoleID] = [ur].[RoleID]
WHERE [ur].[UserID] = @__userID_0 
2017-10-20 15:31:40.803   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[Code], [a].[CreateDate], [a].[Description], [a].[Name], [a].[PyCode], [a].[ShowIndex]
FROM [Application] AS [a] 
2017-10-20 15:31:40.974   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a] 
2017-10-20 15:31:41.283   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.HomeController.Index (AdminSite) in 7183.0581ms 
2017-10-20 15:31:41.297   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 7398.5902ms 200 text/html; charset=utf-8 
2017-10-20 15:32:10.566   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 GET http://localhost:27644/Menu/Index   
ully authenticated. 
2017-10-20 15:32:10.598   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
2017-10-20 15:32:10.640   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
2017-10-20 15:32:10.654   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Controllers.MenuController.Index (AdminSite) with arguments (1) - ModelState is Valid 
2017-10-20 15:32:10.723   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (8ms) [Parameters=[@__p_0='?', @__p_1='?'], CommandType='Text', CommandTimeout='30']
SELECT [t].[ID], [t].[ApplicationName], [t].[ActionName], [t].[ApplicationID], [t].[PyCode], [t].[Code], [t].[ControllerName], [t].[CreateDate], [t].[Description], [t].[IconCss], [t].[IsNav], [t].[Name], [t].[ShowIndex], [t].[ParentID], [t].[ParentMenuName]
FROM (
    SELECT [n].[ID], [n.ApplicationID_Model].[Name] AS [ApplicationName], [n].[ActionName], [n].[ApplicationID], [n].[PyCode], [n].[Code], [n].[ControllerName], [n].[CreateDate], [n].[Description], [n].[IconCss], [n].[IsNav], [n].[Name], [n].[ShowIndex], [n].[ParentID], CASE
        WHEN [n].[ParentID] = '00000000-0000-0000-0000-000000000000'
        THEN N'--根目录--' ELSE (
            SELECT TOP(1) [a].[Name]
            FROM [Menu] AS [a]
            WHERE [a].[ID] = [n].[ParentID]
        )
    END AS [ParentMenuName], ROW_NUMBER() OVER(ORDER BY [n].[ShowIndex]) AS [__RowNumber__]
    FROM [Menu] AS [n]
    INNER JOIN [Application] AS [n.ApplicationID_Model] ON [n].[ApplicationID] = [n.ApplicationID_Model].[ID]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_0) AND ([t].[__RowNumber__] <= (@__p_0 + @__p_1)) 
2017-10-20 15:32:10.738   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Menu] AS [n]
INNER JOIN [Application] AS [n.ApplicationID_Model] ON [n].[ApplicationID] = [n.ApplicationID_Model].[ID] 
2017-10-20 15:32:11.035   Information   Microsoft.AspNetCore.Mvc.ViewFeatures.Internal.ViewResultExecutor   Executing ViewResult, running view at path /Views/Menu/Index.cshtml. 
2017-10-20 15:32:11.618   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Descript2017-10-20 15:32:11.618   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a]
WHERE ((1 & CASE
    WHEN UPPER([a].[ActionName]) = N'INDEX'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) & CASE
    WHEN UPPER([a].[ControllerName]) = N'MENU'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) = 1 
2017-10-20 15:32:11.624   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.MenuController.Index (AdminSite) in 1033.6875ms 
2017-10-20 15:32:11.819   Information   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully authenticated. 
m-urlencoded; charset=UTF-8 10 
2017-10-20 15:32:11.840   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Controllers.MenuController.QueryJson (AdminSite) with arguments (, True) - ModelState is Valid 
2017-10-20 15:32:11.853   Information   Microsoft.AspNetCore.Mvc.Formatters.Json.Internal.JsonResultExecutor   Executing JsonResult, writing value System.Collections.Generic.List`1[<>f__AnonymousType1`4[System.Guid,System.Guid,System.String,System.Boolean]]. 
[a]
WHERE [a].[IsNav] = @__isNav_Value_0 
2017-10-20 15:32:11.904   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.MenuController.QueryJson (AdminSite) in 92.9709ms 
2017-10-20 15:32:11.919   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 100.558ms 200 application/json; charset=utf-8 
2017-10-20 15:33:47.426   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 GET http://localhost:27644/   
2017-10-20 15:33:47.463   Information   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully authenticated. 
2017-10-20 15:33:47.586   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
2017-10-20 15:33:47.597   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Controllers.HomeController.Index (AdminSite) with arguments ((null)) - ModelState is Valid 
2017-10-20 15:33:49.982   Information   Microsoft.AspNetCore.Mvc.ViewFeatures.Internal.ViewResultExecutor   Executing ViewResult, running view at path /Views/Home/Index.cshtml. 
2017-10-20 15:33:53.613   Information   Microsoft.EntityFrameworkCore.Infrastructure   Entity Framework Core 2.0.0-rtm-26452 initialized 'PermissionSystemContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging  
2017-10-20 15:33:53.796   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (12ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a]
WHERE ((1 & CASE
    WHEN UPPER([a].[ActionName]) = N'INDEX'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) & CASE
    WHEN UPPER([a].[ControllerName]) = N'HOME'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) = 1 
2017-10-20 15:33:53.859   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (25ms) [Parameters=[@__userID_0='?'], CommandType='Text', CommandTimeout='30']
SELECT DISTINCT [m].[ID], [m].[ActionName], [m].[ApplicationID], [m].[AreaName], [m].[Code], [m].[ControllerName], [m].[CreateDate], [m].[Description], [m].[IconCss], [m].[IsNav], [m].[Name], [m].[ParentID], [m].[PyCode], [m].[ShowIndex]
FROM [Menu] AS [m]
INNER JOIN [UserRoleJurisdiction] AS [urj] ON [m].[ID] = [urj].[MenuID]
INNER JOIN [UserRole] AS [ur] ON [urj].[RoleID] = [ur].[RoleID]
WHERE [ur].[UserID] = @__userID_0 
2017-10-20 15:33:53.925   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[Code], [a].[CreateDate], [a].[Description], [a].[Name], [a].[PyCode], [a].[ShowIndex]
FROM [Application] AS [a] 
2017-10-20 15:33:54.091   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a] 
2017-10-20 15:33:54.398   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 7029.6559ms 200 text/html; charset=utf-8 
r.Index (AdminSite) in 6803.2345ms 
2017-10-20 15:34:11.006   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 GET http://localhost:27644/Menu/Index   
ully authenticated. 
2017-10-20 15:34:11.016   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
2017-10-20 15:34:11.064   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
dex (AdminSite) with arguments (1) - ModelState is Valid 
2017-10-20 15:34:11.113   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (4ms) [Parameters=[@__p_0='?', @__p_1='?'], CommandType='Text', CommandTimeout='30']
SELECT [t].[ID], [t].[ApplicationName], [t].[ActionName], [t].[ApplicationID], [t].[PyCode], [t].[Code], [t].[ControllerName], [t].[CreateDate], [t].[Description], [t].[IconCss], [t].[IsNav], [t].[Name], [t].[ShowIndex], [t].[ParentID], [t].[ParentMenuName]
FROM (
    SELECT [n].[ID], [n.ApplicationID_Model].[Name] AS [ApplicationName], [n].[ActionName], [n].[ApplicationID], [n].[PyCode], [n].[Code], [n].[ControllerName], [n].[CreateDate], [n].[Description], [n].[IconCss], [n].[IsNav], [n].[Name], [n].[ShowIndex], [n].[ParentID], CASE
        WHEN [n].[ParentID] = '00000000-0000-0000-0000-000000000000'
        THEN N'--根目录--' ELSE (
            SELECT TOP(1) [a].[Name]
            FROM [Menu] AS [a]
            WHERE [a].[ID] = [n].[ParentID]
        )
    END AS [ParentMenuName], ROW_NUMBER() OVER(ORDER BY [n].[ShowIndex]) AS [__RowNumber__]
    FROM [Menu] AS [n]
    INNER JOIN [Application] AS [n.ApplicationID_Model] ON [n].[ApplicationID] = [n.ApplicationID_Model].[ID]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_0) AND ([t].[__RowNumber__] <= (@__p_0 + @__p_1)) 
2017-10-20 15:34:11.139   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Menu] AS [n]
INNER JOIN [Application] AS [n.ApplicationID_Model] ON [n].[ApplicationID] = [n.ApplicationID_Model].[ID] 
2017-10-20 15:34:11.482   Information   Microsoft.AspNetCore.Mvc.ViewFeatures.Internal.ViewResultExecutor   Executing ViewResult, running view at path /Views/Menu/Index.cshtml. 
2017-10-20 15:34:12.035   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[Code], [a].[CreateDate], [a].[Description], [a].[Name], [a].[PyCode], [a].[ShowIndex]
FROM [Application] AS [a] 
eateDate], [m].[Description], [m].[IconCss], [m].[IsNav], [m].[Name], [m].[ParentID], [m].[PyCode], [m].[ShowIndex]
FROM [Menu] AS [m]
INNER JOIN [UserRoleJurisdiction] AS [urj] ON [m].[ID] = [urj].[MenuID]
INNER JOIN [UserRole] AS [ur] ON [urj].[RoleID] = [ur].[RoleID]
WHERE [ur].[UserID] = @__userID_0 
2017-10-20 15:34:12.045   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a]
WHERE ((1 & CASE
    WHEN UPPER([a].[ActionName]) = N'INDEX'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) & CASE
    WHEN UPPER([a].[ControllerName]) = N'MENU'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) = 1 
2017-10-20 15:34:12.065   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 1050.1263ms 200 text/html; charset=utf-8 
2017-10-20 15:34:12.066   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.MenuController.Index (AdminSite) in 1028.4516ms 
2017-10-20 15:34:12.172   Information   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully authenticated. 
m-urlencoded; charset=UTF-8 10 
2017-10-20 15:34:12.185   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Controllers.MenuController.QueryJson (AdminSite) with arguments (, True) - ModelState is Valid 
2017-10-20 15:34:12.216   Information   Microsoft.AspNetCore.Mvc.Formatters.Json.Internal.JsonResultExecutor   Executing JsonResult, writing value System.Collections.Generic.List`1[<>f__AnonymousType1`4[System.Guid,System.Guid,System.String,System.Boolean]]. 
[a]
WHERE [a].[IsNav] = @__isNav_Value_0 
2017-10-20 15:34:12.253   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.MenuController.QueryJson (AdminSite) in 86.6099ms 
2017-10-20 15:34:12.254   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 94.6454ms 200 application/json; charset=utf-8 
2017-10-20 15:34:13.689   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 GET http://localhost:27644/Menu/Create   
ler.Create (AdminSite) with arguments ((null)) - ModelState is Valid 
2017-10-20 15:34:13.845   Information   Microsoft.AspNetCore.Mvc.ViewFeatures.Internal.ViewResultExecutor   Executing ViewResult, running view at path /Views/Menu/Create.cshtml. 
2017-10-20 15:34:14.248   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[Code], [a].[CreateDate], [a].[Description], [a].[Name], [a].[PyCode], [a].[ShowIndex]
FROM [Application] AS [a] 
escription], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a]
WHERE ((1 & CASE
    WHEN UPPER([a].[ActionName]) = N'CREATE'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) & CASE
    WHEN UPPER([a].[ControllerName]) = N'MENU'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) = 1 
2017-10-20 15:34:14.256   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[@__userID_0='?'], CommandType='Text', CommandTimeout='30']
SELECT DISTINCT [m].[ID], [m].[ActionName], [m].[ApplicationID], [m].[AreaName], [m].[Code], [m].[ControllerName], [m].[CreateDate], [m].[Description], [m].[IconCss], [m].[IsNav], [m].[Name], [m].[ParentID], [m].[PyCode], [m].[ShowIndex]
FROM [Menu] AS [m]
INNER JOIN [UserRoleJurisdiction] AS [urj] ON [m].[ID] = [urj].[MenuID]
INNER JOIN [UserRole] AS [ur] ON [urj].[RoleID] = [ur].[RoleID]
WHERE [ur].[UserID] = @__userID_0 
2017-10-20 15:34:14.256   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (1ms) [Parameters=[@__currentMenu_ParentID_0='?'], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a]
WHERE [a].[ID] = @__currentMenu_ParentID_0 
2017-10-20 15:34:14.266   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 576.2856ms 200 text/html; charset=utf-8 
CommandTimeout='30']
SELECT [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a] 
2017-10-20 15:34:14.386   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 13.0856ms 200 application/json; charset=utf-8 
ully authenticated. 
`1[<>f__AnonymousType1`4[System.Guid,System.Guid,System.String,System.Boolean]]. 
2017-10-20 15:34:14.391   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (2ms) [Parameters=[@__applicationId_0='?', @__isNav_Value_1='?'], CommandType='Tex2017-10-20 15:34:14.391   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 POST http://localhost:27644/Menu/QueryJson application/x-www-form-urlencoded; charset=UTF-8 50 
2017-10-20 15:34:14.388   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Controllers.MenuController.QueryJson (AdminSite) with arguments (00000000-0000-0000-0000-000000000001, True) - ModelState is Valid 
2017-10-20 15:34:14.393   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
2017-10-20 15:34:22.767   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Controllers.MenuController.Index (AdminSite) with arguments (1) - ModelState is Valid 
2017-10-20 15:34:22.769   Information   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully authenticated. 
2017-10-20 15:34:22.772   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[@__p_0='?', @__p_1='?'], CommandType='Text', CommandTimeout='30']
SELECT [t].[ID], [t].[ApplicationName], [t].[ActionName], [t].[ApplicationID], [t].[PyCode], [t].[Code], [t].[ControllerName], [t].[CreateDate], [t].[Description], [t].[IconCss], [t].[IsNav], [t].[Name], [t].[ShowIndex], [t].[ParentID], [t].[ParentMenuName]
FROM (
    SELECT [n].[ID], [n.ApplicationID_Model].[Name] AS [ApplicationName], [n].[ActionName], [n].[ApplicationID], [n].[PyCode], [n].[Code], [n].[ControllerName], [n].[CreateDate], [n].[Description], [n].[IconCss], [n].[IsNav], [n].[Name], [n].[ShowIndex], [n].[ParentID], CASE
        WHEN [n].[ParentID] = '00000000-0000-0000-0000-000000000000'
        THEN N'--根目录--' ELSE (
            SELECT TOP(1) [a].[Name]
            FROM [Menu] AS [a]
            WHERE [a].[ID] = [n].[ParentID]
        )
    END AS [ParentMenuName], ROW_NUMBER() OVER(ORDER BY [n].[ShowIndex]) AS [__RowNumber__]
    FROM [Menu] AS [n]
    INNER JOIN [Application] AS [n.ApplicationID_Model] ON [n].[ApplicationID] = [n.ApplicationID_Model].[ID]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_0) AND ([t].[__RowNumber__] <= (@__p_0 + @__p_1)) 
2017-10-20 15:34:22.773   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
2017-10-20 15:34:22.779   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Menu] AS [n]
INNER JOIN [Application] AS [n.ApplicationID_Model] ON [n].[ApplicationID] = [n.ApplicationID_Model].[ID] 
on], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a]
WHERE ((1 & CASE
    WHEN UPPER([a].[ActionName]) = N'INDEX'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) & CASE
    WHEN UPPER([a].[ControllerName]) = N'MENU'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) = 1 
2017-10-20 15:34:22.784   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[@__userID_0='?'], CommandType='Text', CommandTimeout='30']
SELECT DISTINCT [m].[ID], [m].[ActionName], [m].[ApplicationID], [m].[AreaName], [m].[Code], [m].[ControllerName], [m].[CreateDate], [m].[Description], [m].[IconCss], [m].[IsNav], [m].[Name], [m].[ParentID], [m].[PyCode], [m].[ShowIndex]
FROM [Menu] AS [m]
INNER JOIN [UserRoleJurisdiction] AS [urj] ON [m].[ID] = [urj].[MenuID]
INNER JOIN [UserRole] AS [ur] ON [urj].[RoleID] = [ur].[RoleID]
WHERE [ur].[UserID] = @__userID_0 
2017-10-20 15:34:22.784   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 14.8336ms 200 text/html; charset=utf-8 
2017-10-20 15:34:22.788   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.MenuController.Index (AdminSite) in 13.7245ms 
2017-10-20 15:34:22.851   Information   Microsoft.AspNetCore.Mvc.Formatters.Json.Internal.JsonResultExecutor   Executing JsonResult, writing value System.Collections.Generic.List`1[<>f__AnonymousType1`4[System.Guid,System.Guid,System.String,System.Boolean]]. 
[a]
WHERE [a].[IsNav] = @__isNav_Value_0 
2017-10-20 15:34:22.852   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 4.5482ms 200 application/json; charset=utf-8 
2017-10-20 15:34:22.852   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Controllers.MenuController.QueryJson (AdminSite) with arguments (, True) - ModelState is Valid 
2017-10-20 15:34:22.855   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 POST http://localhost:27644/Menu/QueryJson application/x-www-form-urlencoded; charset=UTF-8 10 
2017-10-20 15:34:22.855   Information   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully authenticated. 
3.4221ms 
2017-10-20 15:34:25.516   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
thenticated. 
ed; charset=UTF-8 368 
2017-10-20 15:34:25.530   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Controllers.MenuController.Index (AdminSite) with arguments (, 00000000-0000-0000-0000-100000000000, 1) - ModelState is Valid 
2017-10-20 15:34:25.547   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (4ms) [Parameters=[@__parentID_0='?', @__p_1='?', @__p_2='?'], CommandType='Text', CommandTimeout='30']
SELECT [t].[ID], [t].[ApplicationName], [t].[ActionName], [t].[ApplicationID], [t].[PyCode], [t].[Code], [t].[ControllerName], [t].[CreateDate], [t].[Description], [t].[IconCss], [t].[IsNav], [t].[Name], [t].[ShowIndex], [t].[ParentID], [t].[ParentMenuName]
FROM (
    SELECT [a].[ID], [a.ApplicationID_Model].[Name] AS [ApplicationName], [a].[ActionName], [a].[ApplicationID], [a].[PyCode], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ShowIndex], [a].[ParentID], CASE
        WHEN [a].[ParentID] = '00000000-0000-0000-0000-000000000000'
        THEN N'--根目录--' ELSE (
            SELECT TOP(1) [a0].[Name]
            FROM [Menu] AS [a0]
            WHERE [a0].[ID] = [a].[ParentID]
        )
    END AS [ParentMenuName], ROW_NUMBER() OVER(ORDER BY [a].[ShowIndex]) AS [__RowNumber__]
    FROM [Menu] AS [a]
    INNER JOIN [Application] AS [a.ApplicationID_Model] ON [a].[ApplicationID] = [a.ApplicationID_Model].[ID]
    WHERE [a].[ParentID] = @__parentID_0
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2)) 
2017-10-20 15:34:25.548   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (1ms) [Parameters=[@__parentID_0='?'], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Menu] AS [a]
INNER JOIN [Application] AS [a.ApplicationID_Model] ON [a].[ApplicationID] = [a.ApplicationID_Model].[ID]
WHERE [a].[ParentID] = @__parentID_0 
2017-10-20 15:34:29.068   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a]
WHERE ((1 & CASE
    WHEN UPPER([a].[ActionName]) = N'CREATE'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) & CASE
    WHEN UPPER([a].[ControllerName]) = N'MENU'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) = 1 
2017-10-20 15:34:29.077   Information   Microsoft.AspNetCore.Mvc.ViewFeatures.Internal.ViewResultExecutor   Executing ViewResult, running view at path /Views/Menu/Create.cshtml. 
a].[ID], [a].[Code], [a].[CreateDate], [a].[Description], [a].[Name], [a].[PyCode], [a].[ShowIndex]
FROM [Application] AS [a] 
2017-10-20 15:34:29.090   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 GET http://localhost:27644/Menu/Create   
lly authenticated. 
2017-10-20 15:34:29.099   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a] 
2017-10-20 15:34:29.106   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[Code], [a].[CreateDate], [a].[Description], [a].[Name], [a].[PyCode], [a].[ShowIndex]
FROM [Application] AS [a] 
2017-10-20 15:34:29.161   Information   Microsoft.AspNetCore.Mvc.Formatters.Json.Internal.JsonResultExecutor   Executing JsonResult, writing value System.Collections.Generic.List`1[<>f__AnonymousType1`4[System.Guid,System.Guid,System.String,System.Boolean]]. 
2017-10-20 15:34:29.167   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
ue_1='?'], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[ParentID] AS [pId], [a].[Name]
FROM [Menu] AS [a]
WHERE ([a].[ApplicationID] = @__applicationId_0) AND ([a].[IsNav] = @__isNav_Value_1) 
2017-10-20 15:34:29.171   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 POST http://localhost:27644/Menu/QueryJson application/x-www-form-urlencoded; charset=UTF-8 50 
2017-10-20 15:35:01.701   Information   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully authenticated. 
rlencoded 552 
2017-10-20 15:35:01.721   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
2017-10-20 15:35:01.733   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
2017-10-20 15:35:01.750   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Controllers.MenuController.Create (AdminSite) with arguments (ViewModels.AdminWeb.Nav.MenuViewModel) - ModelState is Valid 
2017-10-20 15:35:01.818   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.MenuController.Create (AdminSite) in 105.4882ms 
), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?', @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?', @p10='?' (Size = 4000), @p11='?', @p12='?' (Size = 4000), @p13='?'], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Menu] ([ID], [ActionName], [ApplicationID], [AreaName], [Code], [ControllerName], [CreateDate], [Description], [IconCss], [IsNav], [Name], [ParentID], [PyCode], [ShowIndex])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13); 
2017-10-20 15:35:01.826   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
dex (AdminSite) with arguments (1) - ModelState is Valid 
2017-10-20 15:35:01.832   Information   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully authenticated. 
2017-10-20 15:35:01.841   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 GET http://localhost:27644/Menu   
2017-10-20 15:35:01.849   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (4ms) [Parameters=[@__userID_0='?'], CommandType='Text', CommandTimeout='30']
SELECT DISTINCT [m].[ID], [m].[ActionName], [m].[ApplicationID], [m].[AreaName], [m].[Code], [m].[ControllerName], [m].[CreateDate], [m].[Description], [m].[IconCss], [m].[IsNav], [m].[Name], [m].[ParentID], [m].[PyCode], [m].[ShowIndex]
FROM [Menu] AS [m]
INNER JOIN [UserRoleJurisdiction] AS [urj] ON [m].[ID] = [urj].[MenuID]
INNER JOIN [UserRole] AS [ur] ON [urj].[RoleID] = [ur].[RoleID]
WHERE [ur].[UserID] = @__userID_0 
2017-10-20 15:35:01.850   Information   Microsoft.AspNetCore.Mvc.ViewFeatures.Internal.ViewResultExecutor   Executing ViewResult, running view at path /Views/Menu/Index.cshtml. 
2017-10-20 15:35:01.853   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (4ms) [Parameters=[@__p_0='?', @__p_1='?'], CommandType='Text', CommandTimeout='30']
SELECT [t].[ID], [t].[ApplicationName], [t].[ActionName], [t].[ApplicationID], [t].[PyCode], [t].[Code], [t].[ControllerName], [t].[CreateDate], [t].[Description], [t].[IconCss], [t].[IsNav], [t].[Name], [t].[ShowIndex], [t].[ParentID], [t].[ParentMenuName]
FROM (
    SELECT [n].[ID], [n.ApplicationID_Model].[Name] AS [ApplicationName], [n].[ActionName], [n].[ApplicationID], [n].[PyCode], [n].[Code], [n].[ControllerName], [n].[CreateDate], [n].[Description], [n].[IconCss], [n].[IsNav], [n].[Name], [n].[ShowIndex], [n].[ParentID], CASE
        WHEN [n].[ParentID] = '00000000-0000-0000-0000-000000000000'
        THEN N'--根目录--' ELSE (
            SELECT TOP(1) [a].[Name]
            FROM [Menu] AS [a]
            WHERE [a].[ID] = [n].[ParentID]
        )
    END AS [ParentMenuName], ROW_NUMBER() OVER(ORDER BY [n].[ShowIndex]) AS [__RowNumber__]
    FROM [Menu] AS [n]
    INNER JOIN [Application] AS [n.ApplicationID_Model] ON [n].[ApplicationID] = [n.ApplicationID_Model].[ID]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_0) AND ([t].[__RowNumber__] <= (@__p_0 + @__p_1)) 
2017-10-20 15:35:01.854   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a]
WHERE ((1 & CASE
    WHEN UPPER([a].[ActionName]) = N'INDEX'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) & CASE
    WHEN UPPER([a].[ControllerName]) = N'MENU'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) = 1 
2017-10-20 15:35:01.858   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a] 
2017-10-20 15:35:01.860   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[Code], [a].[CreateDate], [a].[Description], [a].[Name], [a].[PyCode], [a].[ShowIndex]
FROM [Application] AS [a] 
2017-10-20 15:35:01.948   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (1ms) [Parameters=[@__isNav_Value_0='?'], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[ParentID] AS [pId], [a].[Name]
FROM [Menu] AS [a]
WHERE [a].[IsNav] = @__isNav_Value_0 
2017-10-20 15:35:01.949   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 4.0408ms 200 application/json; charset=utf-8 
员. 
eryJson (AdminSite) with arguments (, True) - ModelState is Valid 
em.String,System.Boolean]]. 
2017-10-20 15:35:01.952   Information   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully authenticated. 
2017-10-20 15:35:01.953   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 POST http://localhost:27644/Menu/QueryJson application/x-www-form-urlencoded; charset=UTF-8 10 
2017-10-20 15:35:18.762   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Controllers.HomeController.Index (AdminSite) with arguments ((null)) - ModelState is Valid 
ionID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a]
WHERE ((1 & CASE
    WHEN UPPER([a].[ActionName]) = N'INDEX'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) & CASE
    WHEN UPPER([a].[ControllerName]) = N'HOME'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) = 1 
2017-10-20 15:35:18.765   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 GET http://localhost:27644/Home/Index   
员. 
Index.cshtml. 
2017-10-20 15:35:18.767   Information   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully authenticated. 
2017-10-20 15:35:18.777   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 26.2155ms 200 text/html; charset=utf-8 
ler.Index (AdminSite) in 23.6295ms 
2017-10-20 15:35:18.778   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (3ms) [Parameters=[@__userID_0='?'], CommandType='Text', CommandTimeout='30']
SELECT DISTINCT [m].[ID], [m].[ActionName], [m].[ApplicationID], [m].[AreaName], [m].[Code], [m].[ControllerName], [m].[CreateDate], [m].[Description], [m].[IconCss], [m].[IsNav], [m].[Name], [m].[ParentID], [m].[PyCode], [m].[ShowIndex]
FROM [Menu] AS [m]
INNER JOIN [UserRoleJurisdiction] AS [urj] ON [m].[ID] = [urj].[MenuID]
INNER JOIN [UserRole] AS [ur] ON [urj].[RoleID] = [ur].[RoleID]
WHERE [ur].[UserID] = @__userID_0 
2017-10-20 15:35:18.785   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[Code], [a].[CreateDate], [a].[Description], [a].[Name], [a].[PyCode], [a].[ShowIndex]
FROM [Application] AS [a] 
2017-10-20 15:36:29.016   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (3ms) [Parameters=[@__p_0='?', @__p_1='?'], CommandType='Text', CommandTimeout='30']
SELECT [t].[ID], [t].[ApplicationName], [t].[ActionName], [t].[ApplicationID], [t].[PyCode], [t].[Code], [t].[ControllerName], [t].[CreateDate], [t].[Description], [t].[IconCss], [t].[IsNav], [t].[Name], [t].[ShowIndex], [t].[ParentID], [t].[ParentMenuName]
FROM (
    SELECT [n].[ID], [n.ApplicationID_Model].[Name] AS [ApplicationName], [n].[ActionName], [n].[ApplicationID], [n].[PyCode], [n].[Code], [n].[ControllerName], [n].[CreateDate], [n].[Description], [n].[IconCss], [n].[IsNav], [n].[Name], [n].[ShowIndex], [n].[ParentID], CASE
        WHEN [n].[ParentID] = '00000000-0000-0000-0000-000000000000'
        THEN N'--根目录--' ELSE (
            SELECT TOP(1) [a].[Name]
            FROM [Menu] AS [a]
            WHERE [a].[ID] = [n].[ParentID]
        )
    END AS [ParentMenuName], ROW_NUMBER() OVER(ORDER BY [n].[ShowIndex]) AS [__RowNumber__]
    FROM [Menu] AS [n]
    INNER JOIN [Application] AS [n.ApplicationID_Model] ON [n].[ApplicationID] = [n.ApplicationID_Model].[ID]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_0) AND ([t].[__RowNumber__] <= (@__p_0 + @__p_1)) 
2017-10-20 15:36:29.017   Information   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully au2017-10-20 15:36:29.018   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Controllers.MenuController.Index (AdminSite) with arguments (1) - ModelState is Valid 
2017-10-20 15:36:29.019   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Menu] AS [n]
INNER JOIN [Application] AS [n.ApplicationID_Model] ON [n].[ApplicationID] = [n.ApplicationID_Model].[ID] 
2017-10-20 15:36:29.025   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a]
WHERE ((1 & CASE
    WHEN UPPER([a].[ActionName]) = N'INDEX'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) & CASE
    WHEN UPPER([a].[ControllerName]) = N'MENU'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) = 1 
2017-10-20 15:36:29.031   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 26.3444ms 200 text/html; charset=utf-8 
 CommandTimeout='30']
SELECT [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a] 
2017-10-20 15:36:29.034   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[Code], [a].[CreateDate], [a].[Description], [a].[Name], [a].[PyCode], [a].[ShowIndex]
FROM [Application] AS [a] 
2017-10-20 15:36:29.035   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (3ms) [Parameters=[@__userID_0='?'], CommandType='Text', CommandTimeout='30']
SELECT DISTINCT [m].[ID], [m].[ActionName], [m].[ApplicationID], [m].[AreaName], [m].[Code], [m].[ControllerName], [m].[CreateDate], [m].[Description], [m].[IconCss], [m].[IsNav], [m].[Name], [m].[ParentID], [m].[PyCode], [m].[ShowIndex]
FROM [Menu] AS [m]
INNER JOIN [UserRoleJurisdiction] AS [urj] ON [m].[ID] = [urj].[MenuID]
INNER JOIN [UserRole] AS [ur] ON [urj].[RoleID] = [ur].[RoleID]
WHERE [ur].[UserID] = @__userID_0 
2017-10-20 15:36:29.036   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.MenuController.Index (AdminSite) in 25.0657ms 
2017-10-20 15:36:29.205   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.MenuController.QueryJson (AdminSite) in 3.6177ms 
2017-10-20 15:36:29.205   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (1ms) [Parameters=[@__isNav_Value_0='?'], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[ParentID] AS [pId], [a].[Name]
FROM [Menu] AS [a]
WHERE [a].[IsNav] = @__isNav_Value_0 
2017-10-20 15:36:29.211   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Controllers.MenuController.QueryJson (AdminSite) with arguments (, True) - ModelState is Valid 
2017-10-20 15:36:29.214   Information   Microsoft.AspNetCore.Mvc.Formatters.Json.Internal.JsonResultExecutor   Executing JsonResult, writing value System.Collections.Generic.List`1[<>f__AnonymousType1`4[System.Guid,System.Guid,System.String,System.Boolean]]. 
2017-10-20 15:36:29.215   Information   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully authenticated. 
2017-10-20 15:36:29.219   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 POST http://localhost:27644/Menu/QueryJson application/x-www-form-urlencoded; charset=UTF-8 10 
2017-10-20 15:36:33.031   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 POST http://localhost:27644/Menu application/x-www-form-urlencoded; charset=UTF-8 368 
2017-10-20 15:36:33.035   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Controllers.MenuController.Index (AdminSite) with arguments (, 00000000-0000-0000-0000-100000000000, 1) - ModelState is Valid 
2017-10-20 15:36:33.043   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
2017-10-20 15:36:33.050   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (4ms) [Parameters=[@__parentID_0='?', @__p_1='?', @__p_2='?'], CommandType='Text', CommandTimeout='30']
SELECT [t].[ID], [t].[ApplicationName], [t].[ActionName], [t].[ApplicationID], [t].[PyCode], [t].[Code], [t].[ControllerName], [t].[CreateDate], [t].[Description], [t].[IconCss], [t].[IsNav], [t].[Name], [t].[ShowIndex], [t].[ParentID], [t].[ParentMenuName]
FROM (
    SELECT [a].[ID], [a.ApplicationID_Model].[Name] AS [ApplicationName], [a].[ActionName], [a].[ApplicationID], [a].[PyCode], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ShowIndex], [a].[ParentID], CASE
        WHEN [a].[ParentID] = '00000000-0000-0000-0000-000000000000'
        THEN N'--根目录--' ELSE (
            SELECT TOP(1) [a0].[Name]
            FROM [Menu] AS [a0]
            WHERE [a0].[ID] = [a].[ParentID]
        )
    END AS [ParentMenuName], ROW_NUMBER() OVER(ORDER BY [a].[ShowIndex]) AS [__RowNumber__]
    FROM [Menu] AS [a]
    INNER JOIN [Application] AS [a.ApplicationID_Model] ON [a].[ApplicationID] = [a.ApplicationID_Model].[ID]
    WHERE [a].[ParentID] = @__parentID_0
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2)) 
2017-10-20 15:36:33.051   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 14.4663ms 200 text/html; charset=utf-8 
2017-10-20 15:36:33.060   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (1ms) [Parameters=[@__parentID_0='?'], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Menu] AS [a]
INNER JOIN [Application] AS [a.ApplicationID_Model] ON [a].[ApplicationID] = [a.ApplicationID_Model].[ID]
WHERE [a].[ParentID] = @__parentID_0 
2017-10-20 15:36:35.287   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
thenticated. 
) with arguments (1c1e3c35-d6bc-40e7-9e95-a313ebd9bf0a) - ModelState is Valid 
2017-10-20 15:36:35.311   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (3ms) [Parameters=[@__rid_0='?'], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [n].[ID], [n.ApplicationID_Model].[Name] AS [ApplicationName], [n].[ActionName], [n].[ApplicationID], [n].[Code], [n].[ControllerName], [n].[CreateDate], [n].[Description], [n].[IconCss], [n].[IsNav], [n].[Name], [n].[ShowIndex], [n].[ParentID], CASE
    WHEN [n].[ParentID] = '00000000-0000-0000-0000-000000000000'
    THEN N'--根目录--' ELSE (
        SELECT TOP(1) [a].[Name]
        FROM [Menu] AS [a]
        WHERE [a].[ID] = [n].[ParentID]
    )
END AS [ParentMenuName], CASE
    WHEN [n].[IsNav] = 1
    THEN CASE
        WHEN [n].[ActionName] IS NULL OR ([n].[ActionName] = N'')
        THEN 1 ELSE 2
    END ELSE 3
END AS [MenuType]
FROM [Menu] AS [n]
INNER JOIN [Application] AS [n.ApplicationID_Model] ON [n].[ApplicationID] = [n.ApplicationID_Model].[ID]
WHERE [n].[ID] = @__rid_0 
2017-10-20 15:36:35.471   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[Code], [a].[CreateDate], [a].[Description], [a].[Name], [a].[PyCode], [a].[ShowIndex]
FROM [Application] AS [a] 
2017-10-20 15:36:35.492   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.MenuController.Modify (AdminSite) in 206.0841ms 
 [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a] 
]
FROM [Menu] AS [m]
INNER JOIN [UserRoleJurisdiction] AS [urj] ON [m].[ID] = [urj].[MenuID]
INNER JOIN [UserRole] AS [ur] ON [urj].[RoleID] = [ur].[RoleID]
WHERE [ur].[UserID] = @__userID_0 
T) ELSE CAST(0 AS BIT)
END) = 1 
2017-10-20 15:36:35.497   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (1ms) [Parameters=[@__currentMenu_ParentID_0='?'], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a]
WHERE [a].[ID] = @__currentMenu_ParentID_0 
2017-10-20 15:36:35.576   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 7.9424ms 200 application/json; charset=utf-8 
ollections.Generic.List`1[<>f__AnonymousType1`4[System.Guid,System.Guid,System.String,System.Boolean]]. 
2017-10-20 15:36:35.581   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Controllers.MenuController.QueryJson (AdminSite) with arguments (00000000-0000-0000-0000-000000000001, True) - ModelState is Valid 
]
FROM [Menu] AS [a]
WHERE ([a].[ApplicationID] = @__applicationId_0) AND ([a].[IsNav] = @__isNav_Value_1) 
2017-10-20 15:36:35.587   Information   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully authenticated. 
m-urlencoded; charset=UTF-8 50 
2017-10-20 15:36:39.826   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 POST http://localhost:27644/Menu/Modify/1c1e3c35-d6bc-40e7-9e95-a313ebd9bf0a application/x-www-form-urlencoded 581 
2017-10-20 15:36:39.837   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
dify (AdminSite) with arguments (ViewModels.AdminWeb.Nav.MenuViewModel) - ModelState is Valid 
2017-10-20 15:36:39.863   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (4ms) [Parameters=[@p13='?', @p0='?' (Size = 4000), @p1='?', @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?', @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?', @p9='?' (Size = 4000), @p10='?', @p11='?' (Size = 4000), @p12='?'], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Menu] SET [ActionName] = @p0, [ApplicationID] = @p1, [AreaName] = @p2, [Code] = @p3, [ControllerName] = @p4, [CreateDate] = @p5, [Description] = @p6, [IconCss] = @p7, [IsNav] = @p8, [Name] = @p9, [ParentID] = @p10, [PyCode] = @p11, [ShowIndex] = @p12
WHERE [ID] = @p13;
SELECT @@ROWCOUNT; 
2017-10-20 15:36:39.864   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.MenuController.Modify (AdminSite) in 31.4712ms 
2017-10-20 15:36:39.865   Information   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully authenticated. 
2017-10-20 15:36:39.876   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 12.3062ms 200 text/html; charset=utf-8 
uController.Index (AdminSite) with arguments (1) - ModelState is Valid 
2017-10-20 15:36:39.876   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Menu] AS [n]
INNER JOIN [Application] AS [n.ApplicationID_Model] ON [n].[ApplicationID] = [n.ApplicationID_Model].[ID] 
2017-10-20 15:36:39.877   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[@__p_0='?', @__p_1='?'], CommandType='Text', CommandTimeout='30']
SELECT [t].[ID], [t].[ApplicationName], [t].[ActionName], [t].[ApplicationID], [t].[PyCode], [t].[Code], [t].[ControllerName], [t].[CreateDate], [t].[Description], [t].[IconCss], [t].[IsNav], [t].[Name], [t].[ShowIndex], [t].[ParentID], [t].[ParentMenuName]
FROM (
    SELECT [n].[ID], [n.ApplicationID_Model].[Name] AS [ApplicationName], [n].[ActionName], [n].[ApplicationID], [n].[PyCode], [n].[Code], [n].[ControllerName], [n].[CreateDate], [n].[Description], [n].[IconCss], [n].[IsNav], [n].[Name], [n].[ShowIndex], [n].[ParentID], CASE
        WHEN [n].[ParentID] = '00000000-0000-0000-0000-000000000000'
        THEN N'--根目录--' ELSE (
            SELECT TOP(1) [a].[Name]
            FROM [Menu] AS [a]
            WHERE [a].[ID] = [n].[ParentID]
        )
    END AS [ParentMenuName], ROW_NUMBER() OVER(ORDER BY [n].[ShowIndex]) AS [__RowNumber__]
    FROM [Menu] AS [n]
    INNER JOIN [Application] AS [n.ApplicationID_Model] ON [n].[ApplicationID] = [n.ApplicationID_Model].[ID]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_0) AND ([t].[__RowNumber__] <= (@__p_0 + @__p_1)) 
2017-10-20 15:36:39.878   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[Code], [a].[CreateDate], [a].[Description], [a].[Name], [a].[PyCode], [a].[ShowIndex]
FROM [Application] AS [a] 
ion], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a] 
2017-10-20 15:36:39.882   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
2017-10-20 15:36:39.882   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a]
WHERE ((1 & CASE
    WHEN UPPER([a].[ActionName]) = N'INDEX'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) & CASE
    WHEN UPPER([a].[ControllerName]) = N'MENU'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) = 1 
2017-10-20 15:36:39.883   Information   Microsoft.AspNetCore.Mvc.ViewFeatures.Internal.ViewResultExecutor   Executing ViewResult, running view at path /Views/Menu/Index.cshtml. 
2017-10-20 15:36:39.885   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.MenuController.Index (AdminSite) in 11.0836ms 
2017-10-20 15:36:39.971   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 2.4593ms 200 application/json; charset=utf-8 
员. 
eryJson (AdminSite) with arguments (, True) - ModelState is Valid 
em.String,System.Boolean]]. 
2017-10-20 15:36:39.971   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[@__isNav_Value_0='?'], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[ParentID] AS [pId], [a].[Name]
FROM [Menu] AS [a]
WHERE [a].[IsNav] = @__isNav_Value_0 
2017-10-20 15:36:39.971   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.MenuController.QueryJson (AdminSite) in 1.6604ms 
2017-10-20 15:36:39.971   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 POST http://localhost:27644/Menu/QueryJson application/x-www-form-urlencoded; charset=UTF-8 10 
2017-10-20 15:36:39.975   Information   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully authenticated. 
2017-10-20 15:36:45.191   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 10.9037ms 200 text/html; charset=utf-8 
 CommandTimeout='30']
SELECT [a].[ID], [a].[Code], [a].[CreateDate], [a].[Description], [a].[Name], [a].[PyCode], [a].[ShowIndex]
FROM [Application] AS [a] 
2017-10-20 15:36:45.193   Information   Microsoft.AspNetCore.Mvc.ViewFeatures.Internal.ViewResultExecutor   Executing ViewResult, running view at path /Views/Menu/Create.cshtml. 
2017-10-20 15:36:45.193   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a]
WHERE ((1 & CASE
    WHEN UPPER([a].[ActionName]) = N'CREATE'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) & CASE
    WHEN UPPER([a].[ControllerName]) = N'MENU'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) = 1 
2017-10-20 15:36:45.194   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[@__userID_0='?'], CommandType='Text', CommandTimeout='30']
SELECT DISTINCT [m].[ID], [m].[ActionName], [m].[ApplicationID], [m].[AreaName], [m].[Code], [m].[ControllerName], [m].[CreateDate], [m].[Description], [m].[IconCss], [m].[IsNav], [m].[Name], [m].[ParentID], [m].[PyCode], [m].[ShowIndex]
FROM [Menu] AS [m]
INNER JOIN [UserRoleJurisdiction] AS [urj] ON [m].[ID] = [urj].[MenuID]
INNER JOIN [UserRole] AS [ur] ON [urj].[RoleID] = [ur].[RoleID]
WHERE [ur].[UserID] = @__userID_0 
2017-10-20 15:36:45.195   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.MenuController.Create (AdminSite) in 9.7138ms 
2017-10-20 15:36:45.197   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[@__currentMenu_ParentID_0='?'], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a]
WHERE [a].[ID] = @__currentMenu_ParentID_0 
2017-10-20 15:36:45.198   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
2017-10-20 15:36:45.199   Information   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully authenticated. 
2017-10-20 15:36:45.200   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 GET http://localhost:27644/Menu/Create   
2017-10-20 15:36:45.202   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Controllers.MenuController.Create (AdminSite) with arguments ((null)) - ModelState is Valid 
2017-10-20 15:36:45.203   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[Code], [a].[CreateDate], [a].[Description], [a].[Name], [a].[PyCode], [a].[ShowIndex]
FROM [Application] AS [a] 
2017-10-20 15:36:45.302   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 POST http://localhost:27644/Menu/QueryJson application/x-www-form-urlencoded; charset=UTF-8 50 
0']
SELECT [a].[ID], [a].[ParentID] AS [pId], [a].[Name]
FROM [Menu] AS [a]
WHERE ([a].[ApplicationID] = @__applicationId_0) AND ([a].[IsNav] = @__isNav_Value_1) 
2017-10-20 15:36:45.302   Information   Microsoft.AspNetCore.Mvc.Formatters.Json.Internal.JsonResultExecutor   Executing JsonResult, writing value System.Collections.Generic.List`1[<>f__AnonymousType1`4[System.Guid,System.Guid,System.String,System.Boolean]]. 
2017-10-20 15:36:45.304   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 7.4514ms 200 application/json; charset=utf-8 
eryJson (AdminSite) in 6.3266ms 
rguments (00000000-0000-0000-0000-000000000001, True) - ModelState is Valid 
2017-10-20 15:36:45.309   Information   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully authenticated. 
2017-10-20 15:37:36.730   Information   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully authenticated. 
rlencoded 549 
2017-10-20 15:37:36.742   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (2ms) [Parameters=[@p0='?', @p1='?' (Size = 4000), @p2='?', @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?', @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?', @p10='?' (Size = 4000), @p11='?', @p12='?' (Size = 4000), @p13='?'], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Menu] ([ID], [ActionName], [ApplicationID], [AreaName], [Code], [ControllerName], [CreateDate], [Description], [IconCss], [IsNav], [Name], [ParentID], [PyCode], [ShowIndex])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13); 
2017-10-20 15:37:36.742   Information   Microsoft.AspNetCore.Mvc.RedirectToActionResult   Executing RedirectResult, redirecting to /Menu. 
2017-10-20 15:37:36.751   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Controllers.MenuController.Create (AdminSite) with arguments (ViewModels.AdminWeb.Nav.MenuViewModel) - ModelState is Valid 
2017-10-20 15:37:36.753   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Menu] AS [n]
INNER JOIN [Application] AS [n.ApplicationID_Model] ON [n].[ApplicationID] = [n.ApplicationID_Model].[ID] 
2017-10-20 15:37:36.755   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (3ms) [Parameters=[@__p_0='?', @__p_1='?'], CommandType='Text', CommandTimeout='30']
SELECT [t].[ID], [t].[ApplicationName], [t].[ActionName], [t].[ApplicationID], [t].[PyCode], [t].[Code], [t].[ControllerName], [t].[CreateDate], [t].[Description], [t].[IconCss], [t].[IsNav], [t].[Name], [t].[ShowIndex], [t].[ParentID], [t].[ParentMenuName]
FROM (
    SELECT [n].[ID], [n.ApplicationID_Model].[Name] AS [ApplicationName], [n].[ActionName], [n].[ApplicationID], [n].[PyCode], [n].[Code], [n].[ControllerName], [n].[CreateDate], [n].[Description], [n].[IconCss], [n].[IsNav], [n].[Name], [n].[ShowIndex], [n].[ParentID], CASE
        WHEN [n].[ParentID] = '00000000-0000-0000-0000-000000000000'
        THEN N'--根目录--' ELSE (
            SELECT TOP(1) [a].[Name]
            FROM [Menu] AS [a]
            WHERE [a].[ID] = [n].[ParentID]
        )
    END AS [ParentMenuName], ROW_NUMBER() OVER(ORDER BY [n].[ShowIndex]) AS [__RowNumber__]
    FROM [Menu] AS [n]
    INNER JOIN [Application] AS [n.ApplicationID_Model] ON [n].[ApplicationID] = [n.ApplicationID_Model].[ID]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_0) AND ([t].[__RowNumber__] <= (@__p_0 + @__p_1)) 
2017-10-20 15:37:36.757   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Controllers.MenuController.Index (AdminSite) with arguments (1) - ModelState is Valid 
2017-10-20 15:37:36.758   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
2017-10-20 15:37:36.761   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 GET http://localhost:27644/Menu   
2017-10-20 15:37:36.763   Information   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully authenticated. 
2017-10-20 15:37:36.770   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[Code], [a].[CreateDate], [a].[Description], [a].[Name], [a].[PyCode], [a].[ShowIndex]
FROM [Application] AS [a] 
escription], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a]
WHERE ((1 & CASE
    WHEN UPPER([a].[ActionName]) = N'INDEX'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) & CASE
    WHEN UPPER([a].[ControllerName]) = N'MENU'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) = 1 
2017-10-20 15:37:36.773   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a] 
2017-10-20 15:37:36.923   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 4.4997ms 200 application/json; charset=utf-8 
oller.QueryJson (AdminSite) with arguments (, True) - ModelState is Valid 
2017-10-20 15:37:36.924   Information   Microsoft.AspNetCore.Mvc.Formatters.Json.Internal.JsonResultExecutor   Executing JsonResult, writing value System.Collections.Generic.List`1[<>f__AnonymousType1`4[System.Guid,System.Guid,System.String,System.Boolean]]. 
2017-10-20 15:37:36.928   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
2017-10-20 15:37:36.929   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (1ms) [Parameters=[@__isNav_Value_0='?'], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[ParentID] AS [pId], [a].[Name]
FROM [Menu] AS [a]
WHERE [a].[IsNav] = @__isNav_Value_0 
2017-10-20 15:37:36.930   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 POST http://localhost:27644/Menu/QueryJson application/x-www-form-urlencoded; charset=UTF-8 10 
2017-10-20 15:37:39.309   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 GET http://localhost:27644/Menu   
2017-10-20 15:37:39.318   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
2017-10-20 15:37:39.319   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Controllers.MenuController.Index (AdminSite) with arguments (1) - ModelState is Valid 
2017-10-20 15:37:39.321   Information   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully authenticated. 
2017-10-20 15:37:39.333   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.MenuController.Index (AdminSite) in 20.0159ms 

SELECT DISTINCT [m].[ID], [m].[ActionName], [m].[ApplicationID], [m].[AreaName], [m].[Code], [m].[ControllerName], [m].[CreateDate], [m].[Description], [m].[IconCss], [m].[IsNav], [m].[Name], [m].[ParentID], [m].[PyCode], [m].[ShowIndex]
FROM [Menu] AS [m]
INNER JOIN [UserRoleJurisdiction] AS [urj] ON [m].[ID] = [urj].[MenuID]
INNER JOIN [UserRole] AS [ur] ON [urj].[RoleID] = [ur].[RoleID]
WHERE [ur].[UserID] = @__userID_0 
2017-10-20 15:37:39.336   Information   Microsoft.AspNetCore.Mvc.ViewFeatures.Internal.ViewResultExecutor   Executing ViewResult, running view at path /Views/Menu/Index.cshtml. 
2017-10-20 15:37:39.337   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a] 
2017-10-20 15:37:39.338   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 21.5435ms 200 text/html; charset=utf-8 
 CommandTimeout='30']
SELECT TOP(1) [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a]
WHERE ((1 & CASE
    WHEN UPPER([a].[ActionName]) = N'INDEX'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) & CASE
    WHEN UPPER([a].[ControllerName]) = N'MENU'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) = 1 
2017-10-20 15:37:39.342   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[@__p_0='?', @__p_1='?'], CommandType='Text', CommandTimeout='30']
SELECT [t].[ID], [t].[ApplicationName], [t].[ActionName], [t].[ApplicationID], [t].[PyCode], [t].[Code], [t].[ControllerName], [t].[CreateDate], [t].[Description], [t].[IconCss], [t].[IsNav], [t].[Name], [t].[ShowIndex], [t].[ParentID], [t].[ParentMenuName]
FROM (
    SELECT [n].[ID], [n.ApplicationID_Model].[Name] AS [ApplicationName], [n].[ActionName], [n].[ApplicationID], [n].[PyCode], [n].[Code], [n].[ControllerName], [n].[CreateDate], [n].[Description], [n].[IconCss], [n].[IsNav], [n].[Name], [n].[ShowIndex], [n].[ParentID], CASE
        WHEN [n].[ParentID] = '00000000-0000-0000-0000-000000000000'
        THEN N'--根目录--' ELSE (
            SELECT TOP(1) [a].[Name]
            FROM [Menu] AS [a]
            WHERE [a].[ID] = [n].[ParentID]
        )
    END AS [ParentMenuName], ROW_NUMBER() OVER(ORDER BY [n].[ShowIndex]) AS [__RowNumber__]
    FROM [Menu] AS [n]
    INNER JOIN [Application] AS [n.ApplicationID_Model] ON [n].[ApplicationID] = [n.ApplicationID_Model].[ID]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_0) AND ([t].[__RowNumber__] <= (@__p_0 + @__p_1)) 
2017-10-20 15:37:39.367   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 GET http://localhost:27644/lib/simple-line-icons/simple-line-icons.min.css   
OpenNetCore\YXL.OpenNetCore\AdminSite\wwwroot\lib\bootstrap\css\bootstrap.min.css' 
2017-10-20 15:37:39.371   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 GET http://localhost:27644/lib/uniform/css/uniform.default.css   
:\GitSource\OpenNetCore\YXL.OpenNetCore\AdminSite\wwwroot\lib\uniform\css\uniform.default.css' 
2017-10-20 15:37:39.372   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 7.2448ms 200 text/css 
mple-line-icons/simple-line-icons.min.css'. Physical path: 'D:\GitSource\OpenNetCore\YXL.OpenNetCore\AdminSite\wwwroot\lib\simple-line-icons\simple-line-icons.min.css' 
2017-10-20 15:37:39.380   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 GET http://localhost:27644/lib/morris/morris.css   
:\GitSource\OpenNetCore\YXL.OpenNetCore\AdminSite\wwwroot\lib\morris\morris.css' 
2017-10-20 15:37:39.384   Information   Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware   Sending file. Request path: '/lib/bootstrap-daterangepicker/daterangepicker.min.css'. Physical path: 'D:\GitSource\OpenNetCore\YXL.OpenNetCore\AdminSite\wwwroot\lib\bootstrap-daterangepicker\daterangepicker.min.css' 
2017-10-20 15:37:39.388   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 14.3496ms 200 text/css 
2017-10-20 15:37:39.389   Information   Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware   Sending file. Request path: '/lib/bootstrap-switch/css/bootstrap-switch.min.css'. Physical path: 'D:\GitSource\OpenNetCore\YXL.OpenNetCore\AdminSite\wwwroot\lib\bootstrap-switch\css\bootstrap-switch.min.css' 
2017-10-20 15:37:39.393   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 GET http://localhost:27644/lib/bootstrap-switch/css/bootstrap-switch.min.css   
2017-10-20 15:37:39.394   Information   Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware   Sending file. Request path: '/assets/global/css/plugins.min.css'. Physical path: 'D:\GitSource\OpenNetCore\YXL.OpenNetCore\AdminSite\wwwroot\assets\global\css\plugins.min.css' 
2017-10-20 15:37:39.396   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 GET http://localhost:27644/assets/global/css/plugins.min.css   
2017-10-20 15:37:39.397   Information   Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware   Sending file. Request path: '/assets/global/css/components.min.css'. Physical path: 'D:\GitSource\OpenNetCore\YXL.OpenNetCore\AdminSite\wwwroot\assets\global\css\components.min.css' 
2017-10-20 15:37:39.398   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 GET http://localhost:27644/assets/global/css/components.min.css   
2017-10-20 15:37:39.400   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 1.5125ms 200 text/css 
2017-10-20 15:37:39.402   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 0.7777ms 200 text/css 
2017-10-20 15:37:39.403   Information   Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware   Sending file. Request path: '/lib/ztree.3.5.26/styles/metroStyle/metroStyle.css'. Physical path: 'D:\GitSource\OpenNetCore\YXL.OpenNetCore\AdminSite\wwwroot\lib\ztree.3.5.26\styles\metroStyle\metroStyle.css' 
2017-10-20 15:37:39.405   Information   Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware   Sending file. Request path: '/lib/fullcalendar/fullcalendar.min.css'. Physical path: 'D:\GitSource\OpenNetCore\YXL.OpenNetCore\AdminSite\wwwroot\lib\fullcalendar\fullcalendar.min.css' 
2017-10-20 15:37:39.406   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 GET http://localhost:27644/lib/ztree.3.5.26/styles/metroStyle/metroStyle.css   
2017-10-20 15:37:39.407   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 GET http://localhost:27644/lib/fullcalendar/fullcalendar.min.css   
2017-10-20 15:37:39.428   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 3.3525ms 200 application/javascript 
ry.min.js'. Physical path: 'D:\GitSource\OpenNetCore\YXL.OpenNetCore\AdminSite\wwwroot\lib\jquery\dist\jquery.min.js' 
2017-10-20 15:37:39.431   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 GET http://localhost:27644/lib/jquery/dist/jquery.min.js   
2017-10-20 15:37:39.432   Information   Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware   Sending file. Request path: '/assets/layouts/layout/css/custom.min.css'. Physical path: 'D:\GitSource\OpenNetCore\YXL.OpenNetCore\AdminSite\wwwroot\assets\layouts\layout\css\custom.min.css' 
2017-10-20 15:37:39.437   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 18.0825ms 200 text/css 
t:27644/assets/layouts/layout/css/custom.min.css   
2017-10-20 15:37:39.441   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 GET http://localhost:27644/assets/layouts/layout/css/themes/darkblue.min.css   
:\GitSource\OpenNetCore\YXL.OpenNetCore\AdminSite\wwwroot\assets\layouts\layout\css\themes\darkblue.min.css' 
2017-10-20 15:37:39.441   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 1.492ms 200 text/css 
2017-10-20 15:37:39.446   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 GET http://localhost:27644/assets/layouts/layout/css/layout.min.css   
:\GitSource\OpenNetCore\YXL.OpenNetCore\AdminSite\wwwroot\assets\layouts\layout\css\layout.min.css' 
2017-10-20 15:37:39.486   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 GET http://localhost:27644/lib/jquery.blockui.min.js   
:\GitSource\OpenNetCore\YXL.OpenNetCore\AdminSite\wwwroot\lib\jquery.blockui.min.js' 
2017-10-20 15:37:39.490   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 0.5083ms 200 application/javascript 
dropdown/bootstrap-hover-dropdown.min.js'. Physical path: 'D:\GitSource\OpenNetCore\YXL.OpenNetCore\AdminSite\wwwroot\lib\bootstrap-hover-dropdown\bootstrap-hover-dropdown.min.js' 
2017-10-20 15:37:39.496   Information   Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware   Sending file. Request path: '/lib/js.cookie.min.js'. Physical path: 'D:\GitSource\OpenNetCore\YXL.OpenNetCore\AdminSite\wwwroot\lib\js.cookie.min.js' 
2017-10-20 15:37:39.500   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 GET http://localhost:27644/lib/uniform/jquery.uniform.min.js   
:\GitSource\OpenNetCore\YXL.OpenNetCore\AdminSite\wwwroot\lib\uniform\jquery.uniform.min.js' 
2017-10-20 15:37:39.504   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 5.1909ms 200 application/javascript 
l/jquery.slimscroll.min.js'. Physical path: 'D:\GitSource\OpenNetCore\YXL.OpenNetCore\AdminSite\wwwroot\lib\jquery-slimscroll\jquery.slimscroll.min.js' 
2017-10-20 15:37:39.509   Information   Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware   Sending file. Request path: '/lib/bootstrap/js/bootstrap.min.js'. Physical path: 'D:\GitSource\OpenNetCore\YXL.OpenNetCore\AdminSite\wwwroot\lib\bootstrap\js\bootstrap.min.js' 
2017-10-20 15:37:39.514   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 1.8406ms 200 application/javascript 
2017-10-20 15:37:39.518   Information   Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware   Sending file. Request path: '/lib/morris/morris.min.js'. Physical path: 'D:\GitSource\OpenNetCore\YXL.OpenNetCore\AdminSite\wwwroot\lib\morris\morris.min.js' 
2017-10-20 15:37:39.519   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 GET http://localhost:27644/lib/morris/morris.min.js   
2017-10-20 15:37:39.523   Information   Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware   Sending file. Request path: '/lib/bootstrap-daterangepicker/daterangepicker.min.js'. Physical path: 'D:\GitSource\OpenNetCore\YXL.OpenNetCore\AdminSite\wwwroot\lib\bootstrap-daterangepicker\daterangepicker.min.js' 
2017-10-20 15:37:39.527   Information   Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware   Sending file. Request path: '/lib/morris/raphael-min.js'. Physical path: 'D:\GitSource\OpenNetCore\YXL.OpenNetCore\AdminSite\wwwroot\lib\morris\raphael-min.js' 
2017-10-20 15:37:39.532   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 GET http://localhost:27644/lib/bootstrap-switch/js/bootstrap-switch.min.js   
:\GitSource\OpenNetCore\YXL.OpenNetCore\AdminSite\wwwroot\lib\bootstrap-switch\js\bootstrap-switch.min.js' 
2017-10-20 15:37:39.536   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 2.3403ms 200 application/javascript 
2017-10-20 15:37:39.540   Information   Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware   Sending file. Request path: '/lib/jquery-validation/js/jquery.validate.js'. Physical path: 'D:\GitSource\OpenNetCore\YXL.OpenNetCore\AdminSite\wwwroot\lib\jquery-validation\js\jquery.validate.js' 
y.Unobtrusive.Ajax-master\jquery.unobtrusive-ajax.js' 
2017-10-20 15:37:39.541   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 GET http://localhost:27644/lib/Microsoft.jQuery.Unobtrusive.Ajax-master/jquery.unobtrusive-ajax.js   
2017-10-20 15:37:39.546   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 GET http://localhost:27644/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.js   
:\GitSource\OpenNetCore\YXL.OpenNetCore\AdminSite\wwwroot\lib\jquery-validation-unobtrusive\jquery.validate.unobtrusive.js' 
2017-10-20 15:37:39.550   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 1.5686ms 200 application/javascript 
ery.ztree.core.js'. Physical path: 'D:\GitSource\OpenNetCore\YXL.OpenNetCore\AdminSite\wwwroot\lib\ztree.3.5.26\jquery.ztree.core.js' 
2017-10-20 15:37:39.552   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 GET http://localhost:27644/lib/ztree.3.5.26/jquery.ztree.core.js   
2017-10-20 15:37:39.562   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 0.9548ms 200 application/javascript 
2017-10-20 15:37:39.562   Information   Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware   Sending file. Request path: '/pages/menu/menu.index.js'. Physical path: 'D:\GitSource\OpenNetCore\YXL.OpenNetCore\AdminSite\wwwroot\pages\menu\menu.index.js' 
2017-10-20 15:37:39.566   Information   Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware   Sending file. Request path: '/lib/ztree.3.5.26/jquery.ztree.intput.select.js'. Physical path: 'D:\GitSource\OpenNetCore\YXL.OpenNetCore\AdminSite\wwwroot\lib\ztree.3.5.26\jquery.ztree.intput.select.js' 
2017-10-20 15:37:39.568   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 GET http://localhost:27644/pages/menu/menu.index.js?v=1.0.0.0   
2017-10-20 15:37:39.582   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 0.8755ms 200 application/javascript 
s/global/scripts/menu.js   
:\GitSource\OpenNetCore\YXL.OpenNetCore\AdminSite\wwwroot\assets\global\scripts\menu.js' 
2017-10-20 15:37:39.587   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 1.1177ms 200 application/javascript 
2017-10-20 15:37:39.591   Information   Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware   Sending file. Request path: '/assets/layouts/layout/scripts/layout.js'. Physical path: 'D:\GitSource\OpenNetCore\YXL.OpenNetCore\AdminSite\wwwroot\assets\layouts\layout\scripts\layout.js' 
2017-10-20 15:37:39.596   Information   Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware   Sending file. Request path: '/assets/layouts/global/scripts/quick-sidebar.min.js'. Physical path: 'D:\GitSource\OpenNetCore\YXL.OpenNetCore\AdminSite\wwwroot\assets\layouts\global\scripts\quick-sidebar.min.js' 
2017-10-20 15:37:39.596   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 GET http://localhost:27644/assets/layouts/layout/scripts/demo.js   
r.min.js   
2017-10-20 15:37:39.600   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 1.2687ms 200 application/javascript 
2017-10-20 15:37:39.601   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 GET http://localhost:27644/assets/global/scripts/app.min.js   
:\GitSource\OpenNetCore\YXL.OpenNetCore\AdminSite\wwwroot\assets\global\scripts\app.min.js' 
2017-10-20 15:37:39.605   Information   Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware   Sending file. Request path: '/assets/layouts/layout3/img/avatar3.jpg'. Physical path: 'D:\GitSource\OpenNetCore\YXL.OpenNetCore\AdminSite\wwwroot\assets\layouts\layout3\img\avatar3.jpg' 
2017-10-20 15:37:39.610   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 GET http://localhost:27644/assets/layouts/layout3/img/avatar4.jpg   
:\GitSource\OpenNetCore\YXL.OpenNetCore\AdminSite\wwwroot\assets\layouts\layout3\img\avatar2.jpg' 
mple-Line-Icons.woff' 
2017-10-20 15:37:39.615   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 GET http://localhost:27644/lib/font-awesome/fonts/fontawesome-webfont.woff2?v=4.4.0   
rce\OpenNetCore\YXL.OpenNetCore\AdminSite\wwwroot\lib\font-awesome\fonts\fontawesome-webfont.woff2' 
2017-10-20 15:37:39.619   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 GET http://localhost:27644/lib/simple-line-icons/fonts/Simple-Line-Icons.woff   
NetCore\YXL.OpenNetCore\AdminSite\wwwroot\assets\layouts\layout\img\logo.png' 
2017-10-20 15:37:39.627   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 15.8284ms 200 image/jpeg 
2017-10-20 15:37:39.628   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 GET http://localhost:27644/assets/layouts/layout3/img/avatar5.jpg   
:\GitSource\OpenNetCore\YXL.OpenNetCore\AdminSite\wwwroot\assets\layouts\layout3\img\avatar5.jpg' 
2017-10-20 15:37:39.632   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 27.2935ms 200 image/jpeg 
2017-10-20 15:37:39.632   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 33.3661ms 200 image/png 

2017-10-20 15:37:39.638   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 3.5193ms 200 image/jpeg 
:27644/assets/layouts/layout/img/sidebar_toggler_icon_darkblue.png   
:\GitSource\OpenNetCore\YXL.OpenNetCore\AdminSite\wwwroot\assets\layouts\layout\img\sidebar_toggler_icon_darkblue.png' 
2017-10-20 15:37:39.643   Information   Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware   Sending file. Request path: '/assets/layouts/layout/img/avatar3_small.jpg'. Physical path: 'D:\GitSource\OpenNetCore\YXL.OpenNetCore\AdminSite\wwwroot\assets\layouts\layout\img\avatar3_small.jpg' 
2017-10-20 15:37:39.643   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 GET http://localhost:27644/assets/layouts/layout/img/avatar3_small.jpg   
2017-10-20 15:37:39.647   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 5.0325ms 200 image/jpeg 
2017-10-20 15:37:39.653   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 37.8463ms 200 application/font-woff 
2017-10-20 15:37:39.687   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.MenuController.QueryJson (AdminSite) in 1.7672ms 
2017-10-20 15:37:39.687   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 2.8304ms 200 application/json; charset=utf-8 
ollections.Generic.List`1[<>f__AnonymousType1`4[System.Guid,System.Guid,System.String,System.Boolean]]. 
2017-10-20 15:37:39.691   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[@__isNav_Value_0='?'], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[ParentID] AS [pId], [a].[Name]
FROM [Menu] AS [a]
WHERE [a].[IsNav] = @__isNav_Value_0 
2017-10-20 15:37:39.692   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Controllers.MenuController.QueryJson (AdminSite) with arguments (, True) - ModelState is Valid 
2017-10-20 15:37:39.696   Information   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully authenticated. 
2017-10-20 15:37:39.697   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 POST http://localhost:27644/Menu/QueryJson application/x-www-form-urlencoded; charset=UTF-8 10 
2017-10-20 15:37:39.724   Information   Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware   Sending file. Request path: '/lib/bootstrap/fonts/bootstrap/glyphicons-halflings-regular.woff2'. Physical path: 'D:\GitSource\OpenNetCore\YXL.OpenNetCore\AdminSite\wwwroot\lib\bootstrap\fonts\bootstrap\glyphicons-halflings-regular.woff2' 
2017-10-20 15:37:39.731   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 13.6841ms 200 font/woff2 
2017-10-20 15:37:39.830   Information   Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware   Sending file. Request path: '/favicon.ico'. Physical path: 'D:\GitSource\OpenNetCore\YXL.OpenNetCore\AdminSite\wwwroot\favicon.ico' 
2017-10-20 15:37:42.503   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 GET http://localhost:27644/Role/Index   
2017-10-20 15:37:42.506   Information   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully authenticated. 
2017-10-20 15:37:42.518   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
dex (AdminSite) with arguments (1) - ModelState is Valid 
2017-10-20 15:37:42.543   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [b].[ID], [b].[Code], [b].[CreateDate], [b].[Description], [b].[Name], [b].[PyCode], [b].[ShowIndex]
FROM [Role] AS [b] 
2017-10-20 15:37:42.550   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [b].[ID], [b].[Code], [b].[CreateDate], [b].[Description], [b].[Name], [b].[PyCode], [b].[ShowIndex]
FROM [Role] AS [b] 
2017-10-20 15:37:42.687   Information   Microsoft.AspNetCore.Mvc.ViewFeatures.Internal.ViewResultExecutor   Executing ViewResult, running view at path /Views/Role/Index.cshtml. 
2017-10-20 15:37:42.860   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[@__userID_0='?'], CommandType='Text', CommandTimeout='30']
SELECT DISTINCT [m].[ID], [m].[ActionName], [m].[ApplicationID], [m].[AreaName], [m].[Code], [m].[ControllerName], [m].[CreateDate], [m].[Description], [m].[IconCss], [m].[IsNav], [m].[Name], [m].[ParentID], [m].[PyCode], [m].[ShowIndex]
FROM [Menu] AS [m]
INNER JOIN [UserRoleJurisdiction] AS [urj] ON [m].[ID] = [urj].[MenuID]
INNER JOIN [UserRole] AS [ur] ON [urj].[RoleID] = [ur].[RoleID]
WHERE [ur].[UserID] = @__userID_0 
) ELSE CAST(0 AS BIT)
END) = 1 
2017-10-20 15:37:42.871   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 356.5411ms 200 text/html; charset=utf-8 
er.Index (AdminSite) in 350.7212ms 
, [a].[Code], [a].[CreateDate], [a].[Description], [a].[Name], [a].[PyCode], [a].[ShowIndex]
FROM [Application] AS [a] 
2017-10-20 15:37:42.873   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a] 
2017-10-20 15:37:44.870   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 GET http://localhost:27644/Role/Modify/24f8290b-029d-4976-b171-d4da02925ccb   
2017-10-20 15:37:44.878   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
2017-10-20 15:37:44.888   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
dify (AdminSite) with arguments (24f8290b-029d-4976-b171-d4da02925ccb) - ModelState is Valid 
2017-10-20 15:37:44.905   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [u].[ID], [u].[ApplicationID], [u].[CreateDate], [u].[MenuID], [u].[RoleID]
FROM [UserRoleJurisdiction] AS [u] 
2017-10-20 15:37:45.075   Information   Microsoft.AspNetCore.Mvc.ViewFeatures.Internal.ViewResultExecutor   Executing ViewResult, running view at path /Views/Role/Modify.cshtml. 
2017-10-20 15:37:45.291   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[@__currentMenu_ParentID_0='?'], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a]
WHERE [a].[ID] = @__currentMenu_ParentID_0 
AST(1 AS BIT) ELSE CAST(0 AS BIT)
END) & CASE
    WHEN UPPER([a].[ControllerName]) = N'ROLE'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) = 1 
2017-10-20 15:37:45.300   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 423.5549ms 200 text/html; charset=utf-8 
CommandTimeout='30']
SELECT [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a] 
2017-10-20 15:37:45.303   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[@__userID_0='?'], CommandType='Text', CommandTimeout='30']
SELECT DISTINCT [m].[ID], [m].[ActionName], [m].[ApplicationID], [m].[AreaName], [m].[Code], [m].[ControllerName], [m].[CreateDate], [m].[Description], [m].[IconCss], [m].[IsNav], [m].[Name], [m].[ParentID], [m].[PyCode], [m].[ShowIndex]
FROM [Menu] AS [m]
INNER JOIN [UserRoleJurisdiction] AS [urj] ON [m].[ID] = [urj].[MenuID]
INNER JOIN [UserRole] AS [ur] ON [urj].[RoleID] = [ur].[RoleID]
WHERE [ur].[UserID] = @__userID_0 
2017-10-20 15:37:45.306   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.RoleController.Modify (AdminSite) in 414.7356ms 
2017-10-20 15:37:45.389   Information   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully authenticated. 
2017-10-20 15:37:45.389   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 POST http://localhost:27644/Menu/RoleMenus application/x-www-form-urlencoded; charset=UTF-8 43 
2017-10-20 15:37:45.410   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
2017-10-20 15:37:45.411   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Controllers.MenuController.RoleMenus (AdminSite) with arguments (24f8290b-029d-4976-b171-d4da02925ccb) - ModelState is Valid 
2017-10-20 15:37:45.433   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.MenuController.RoleMenus (AdminSite) in 32.1903ms 
2017-10-20 15:37:45.434   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 38.1921ms 200 application/json; charset=utf-8 
llections.Generic.List`1[<>f__AnonymousType2`6[System.String,System.String,System.String,System.Boolean,System.String,System.Boolean]]. 
2017-10-20 15:37:45.437   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (2ms) [Parameters=[@__roleID_0='?'], CommandType='Text', CommandTimeout='30']
SELECT [n].[ID], [n].[ApplicationID], [n].[ParentID], [n].[Name], (
    SELECT CASE
        WHEN EXISTS (
            SELECT 1
            FROM [UserRoleJurisdiction] AS [a]
            WHERE ([a].[MenuID] = [n].[ID]) AND ([a].[RoleID] = @__roleID_0))
        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
    END
) AS [checked], [n].[Description]
FROM [Menu] AS [n] 
2017-10-20 15:37:50.908   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
029d-4976-b171-d4da02925ccb application/x-www-form-urlencoded 3443 
2017-10-20 15:37:50.910   Information   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully authenticated. 
2017-10-20 15:37:50.924   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Controllers.RoleController.Modify (AdminSite) with arguments (ViewModels.AdminWeb.Roles.RoleViewModel) - ModelState is Invalid 
2017-10-20 15:37:50.939   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (1ms) [Parameters=[@__model_ID_0='?'], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[ID], [a].[Code], [a].[CreateDate], [a].[Description], [a].[Name], [a].[PyCode], [a].[ShowIndex]
FROM [Role] AS [a]
WHERE [a].[ID] = @__model_ID_0 
2017-10-20 15:37:50.955   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[@__entity_ID_0='?'], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[ApplicationID], [a].[CreateDate], [a].[MenuID], [a].[RoleID]
FROM [UserRoleJurisdiction] AS [a]
WHERE [a].[RoleID] = @__entity_ID_0 
2017-10-20 15:37:51.031   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (36ms) [Parameters=[@p6='?', @p0='?' (Size = 4000), @p1='?', @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?', @p7='?', @p8='?', @p9='?', @p10='?', @p11='?', @p12='?', @p13='?', @p14='?', @p15='?', @p16='?', @p17='?', @p18='?', @p19='?', @p20='?', @p21='?', @p22='?', @p23='?', @p24='?', @p25='?', @p26='?', @p27='?', @p28='?', @p29='?', @p30='?', @p31='?', @p32='?', @p33='?', @p34='?', @p35='?', @p36='?', @p37='?', @p38='?', @p39='?', @p40='?', @p41='?', @p42='?', @p43='?', @p44='?', @p45='?', @p46='?', @p47='?', @p48='?', @p49='?', @p50='?', @p51='?', @p52='?', @p53='?', @p54='?', @p55='?', @p56='?', @p57='?', @p58='?', @p59='?', @p60='?', @p61='?', @p62='?', @p63='?', @p64='?', @p65='?', @p66='?', @p67='?', @p68='?', @p69='?', @p70='?', @p71='?', @p72='?', @p73='?', @p74='?', @p75='?', @p76='?', @p77='?', @p78='?', @p79='?', @p80='?', @p81='?', @p82='?', @p83='?', @p84='?', @p85='?', @p86='?', @p87='?', @p88='?', @p89='?', @p90='?', @p91='?', @p92='?', @p93='?', @p94='?', @p95='?', @p96='?', @p97='?', @p98='?', @p99='?', @p100='?', @p101='?', @p102='?', @p103='?', @p104='?', @p105='?', @p106='?', @p107='?', @p108='?', @p109='?', @p110='?', @p111='?', @p112='?', @p113='?', @p114='?', @p115='?', @p116='?', @p117='?', @p118='?', @p119='?', @p120='?', @p121='?', @p122='?', @p123='?', @p124='?', @p125='?', @p126='?', @p127='?', @p128='?', @p129='?', @p130='?', @p131='?', @p132='?', @p133='?', @p134='?', @p135='?', @p136='?', @p137='?', @p138='?', @p139='?', @p140='?', @p141='?', @p142='?', @p143='?', @p144='?', @p145='?', @p146='?', @p147='?', @p148='?', @p149='?', @p150='?', @p151='?', @p152='?', @p153='?', @p154='?', @p155='?', @p156='?', @p157='?', @p158='?', @p159='?', @p160='?', @p161='?', @p162='?', @p163='?', @p164='?', @p165='?', @p166='?', @p167='?', @p168='?', @p169='?', @p170='?', @p171='?', @p172='?', @p173='?', @p174='?', @p175='?', @p176='?', @p177='?', @p178='?', @p179='?', @p180='?', @p181='?', @p182='?', @p183='?', @p184='?', @p185='?', @p186='?', @p187='?', @p188='?', @p189='?', @p190='?', @p191='?', @p192='?', @p193='?', @p194='?', @p195='?', @p196='?', @p197='?', @p198='?', @p199='?', @p200='?', @p201='?', @p202='?'], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Role] SET [Code] = @p0, [CreateDate] = @p1, [Description] = @p2, [Name] = @p3, [PyCode] = @p4, [ShowIndex] = @p5
WHERE [ID] = @p6;
SELECT @@ROWCOUNT;

DELETE FROM [UserRoleJurisdiction]
WHERE [ID] = @p7;
SELECT @@ROWCOUNT;

DELETE FROM [UserRoleJurisdiction]
WHERE [ID] = @p8;
SELECT @@ROWCOUNT;

DELETE FROM [UserRoleJurisdiction]
WHERE [ID] = @p9;
SELECT @@ROWCOUNT;

DELETE FROM [UserRoleJurisdiction]
WHERE [ID] = @p10;
SELECT @@ROWCOUNT;

DELETE FROM [UserRoleJurisdiction]
WHERE [ID] = @p11;
SELECT @@ROWCOUNT;

DELETE FROM [UserRoleJurisdiction]
WHERE [ID] = @p12;
SELECT @@ROWCOUNT;

DELETE FROM [UserRoleJurisdiction]
WHERE [ID] = @p13;
SELECT @@ROWCOUNT;

DELETE FROM [UserRoleJurisdiction]
WHERE [ID] = @p14;
SELECT @@ROWCOUNT;

DELETE FROM [UserRoleJurisdiction]
WHERE [ID] = @p15;
SELECT @@ROWCOUNT;

DELETE FROM [UserRoleJurisdiction]
WHERE [ID] = @p16;
SELECT @@ROWCOUNT;

DELETE FROM [UserRoleJurisdiction]
WHERE [ID] = @p17;
SELECT @@ROWCOUNT;

DELETE FROM [UserRoleJurisdiction]
WHERE [ID] = @p18;
SELECT @@ROWCOUNT;

DELETE FROM [UserRoleJurisdiction]
WHERE [ID] = @p19;
SELECT @@ROWCOUNT;

DELETE FROM [UserRoleJurisdiction]
WHERE [ID] = @p20;
SELECT @@ROWCOUNT;

DELETE FROM [UserRoleJurisdiction]
WHERE [ID] = @p21;
SELECT @@ROWCOUNT;

DELETE FROM [UserRoleJurisdiction]
WHERE [ID] = @p22;
SELECT @@ROWCOUNT;

DELETE FROM [UserRoleJurisdiction]
WHERE [ID] = @p23;
SELECT @@ROWCOUNT;

DELETE FROM [UserRoleJurisdiction]
WHERE [ID] = @p24;
SELECT @@ROWCOUNT;

DELETE FROM [UserRoleJurisdiction]
WHERE [ID] = @p25;
SELECT @@ROWCOUNT;

DELETE FROM [UserRoleJurisdiction]
WHERE [ID] = @p26;
SELECT @@ROWCOUNT;

DELETE FROM [UserRoleJurisdiction]
WHERE [ID] = @p27;
SELECT @@ROWCOUNT;

DELETE FROM [UserRoleJurisdiction]
WHERE [ID] = @p28;
SELECT @@ROWCOUNT;

DELETE FROM [UserRoleJurisdiction]
WHERE [ID] = @p29;
SELECT @@ROWCOUNT;

DELETE FROM [UserRoleJurisdiction]
WHERE [ID] = @p30;
SELECT @@ROWCOUNT;

DELETE FROM [UserRoleJurisdiction]
WHERE [ID] = @p31;
SELECT @@ROWCOUNT;

DELETE FROM [UserRoleJurisdiction]
WHERE [ID] = @p32;
SELECT @@ROWCOUNT;

DELETE FROM [UserRoleJurisdiction]
WHERE [ID] = @p33;
SELECT @@ROWCOUNT;

DELETE FROM [UserRoleJurisdiction]
WHERE [ID] = @p34;
SELECT @@ROWCOUNT;

DELETE FROM [UserRoleJurisdiction]
WHERE [ID] = @p35;
SELECT @@ROWCOUNT;

DELETE FROM [UserRoleJurisdiction]
WHERE [ID] = @p36;
SELECT @@ROWCOUNT;

DELETE FROM [UserRoleJurisdiction]
WHERE [ID] = @p37;
SELECT @@ROWCOUNT;

INSERT INTO [UserRoleJurisdiction] ([ID], [ApplicationID], [CreateDate], [MenuID], [RoleID])
VALUES (@p38, @p39, @p40, @p41, @p42),
(@p43, @p44, @p45, @p46, @p47),
(@p48, @p49, @p50, @p51, @p52),
(@p53, @p54, @p55, @p56, @p57),
(@p58, @p59, @p60, @p61, @p62),
(@p63, @p64, @p65, @p66, @p67),
(@p68, @p69, @p70, @p71, @p72),
(@p73, @p74, @p75, @p76, @p77),
(@p78, @p79, @p80, @p81, @p82),
(@p83, @p84, @p85, @p86, @p87),
(@p88, @p89, @p90, @p91, @p92),
(@p93, @p94, @p95, @p96, @p97),
(@p98, @p99, @p100, @p101, @p102),
(@p103, @p104, @p105, @p106, @p107),
(@p108, @p109, @p110, @p111, @p112),
(@p113, @p114, @p115, @p116, @p117),
(@p118, @p119, @p120, @p121, @p122),
(@p123, @p124, @p125, @p126, @p127),
(@p128, @p129, @p130, @p131, @p132),
(@p133, @p134, @p135, @p136, @p137),
(@p138, @p139, @p140, @p141, @p142),
(@p143, @p144, @p145, @p146, @p147),
(@p148, @p149, @p150, @p151, @p152),
(@p153, @p154, @p155, @p156, @p157),
(@p158, @p159, @p160, @p161, @p162),
(@p163, @p164, @p165, @p166, @p167),
(@p168, @p169, @p170, @p171, @p172),
(@p173, @p174, @p175, @p176, @p177),
(@p178, @p179, @p180, @p181, @p182),
(@p183, @p184, @p185, @p186, @p187),
(@p188, @p189, @p190, @p191, @p192),
(@p193, @p194, @p195, @p196, @p197),
(@p198, @p199, @p200, @p201, @p202); 
2017-10-20 15:37:51.050   Information   Microsoft.AspNetCore.Mvc.RedirectToActionResult   Executing RedirectResult, redirecting to /Role/Details/24f8290b-029d-4976-b171-d4da02925ccb. 
 
2017-10-20 15:37:51.052   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
thenticated. 
2017-10-20 15:37:51.053   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 143.3878ms 302  
2017-10-20 15:37:51.053   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 GET http://localhost:27644/Role/Details/24f8290b-029d-4976-b171-d4da02925ccb   
2017-10-20 15:37:51.060   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
2017-10-20 15:37:51.061   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Controllers.RoleController.Details (AdminSite) with arguments (24f8290b-029d-4976-b171-d4da02925ccb) - ModelState is Valid 
2017-10-20 15:37:51.077   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (1ms) [Parameters=[@__id_0='?'], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[ID], [a].[Code], [a].[CreateDate], [a].[Description], [a].[Name], [a].[PyCode], [a].[ShowIndex]
FROM [Role] AS [a]
WHERE [a].[ID] = @__id_0 
2017-10-20 15:37:51.265   Information   Microsoft.AspNetCore.Mvc.ViewFeatures.Internal.ViewResultExecutor   Executing ViewResult, running view at path /Views/Role/Details.cshtml. 
2017-10-20 15:37:51.291   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.RoleController.Details (AdminSite) in 232.7996ms 
[a].[Code], [a].[CreateDate], [a].[Description], [a].[Name], [a].[PyCode], [a].[ShowIndex]
FROM [Application] AS [a] 
2017-10-20 15:37:51.292   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a] 
2017-10-20 15:37:51.298   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a]
WHERE ((1 & CASE
    WHEN UPPER([a].[ActionName]) = N'DETAILS'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) & CASE
    WHEN UPPER([a].[ControllerName]) = N'ROLE'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) = 1 
2017-10-20 15:44:08.436   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 GET http://localhost:27644/Menu/Create   
2017-10-20 15:44:08.452   Information   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully authenticated. 
2017-10-20 15:44:08.606   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
2017-10-20 15:44:08.732   Information   Microsoft.EntityFrameworkCore.Infrastructure   Entity Framework Core 2.0.0-rtm-26452 initialized 'PermissionSystemContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging  
2017-10-20 15:44:11.206   Information   Microsoft.AspNetCore.Mvc.ViewFeatures.Internal.ViewResultExecutor   Executing ViewResult, running view at path /Views/Menu/Create.cshtml. 
2017-10-20 15:44:12.092   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[Code], [a].[CreateDate], [a].[Description], [a].[Name], [a].[PyCode], [a].[ShowIndex]
FROM [Application] AS [a] 
2017-10-20 15:44:12.722   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a]
WHERE ((1 & CASE
    WHEN UPPER([a].[ActionName]) = N'CREATE'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) & CASE
    WHEN UPPER([a].[ControllerName]) = N'MENU'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) = 1 
2017-10-20 15:44:12.787   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (27ms) [Parameters=[@__currentMenu_ParentID_0='?'], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a]
WHERE [a].[ID] = @__currentMenu_ParentID_0 
2017-10-20 15:44:12.831   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (6ms) [Parameters=[@__userID_0='?'], CommandType='Text', CommandTimeout='30']
SELECT DISTINCT [m].[ID], [m].[ActionName], [m].[ApplicationID], [m].[AreaName], [m].[Code], [m].[ControllerName], [m].[CreateDate], [m].[Description], [m].[IconCss], [m].[IsNav], [m].[Name], [m].[ParentID], [m].[PyCode], [m].[ShowIndex]
FROM [Menu] AS [m]
INNER JOIN [UserRoleJurisdiction] AS [urj] ON [m].[ID] = [urj].[MenuID]
INNER JOIN [UserRole] AS [ur] ON [urj].[RoleID] = [ur].[RoleID]
WHERE [ur].[UserID] = @__userID_0 
2017-10-20 15:44:12.851   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[Code], [a].[CreateDate], [a].[Description], [a].[Name], [a].[PyCode], [a].[ShowIndex]
FROM [Application] AS [a] 
2017-10-20 15:44:13.007   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a] 
2017-10-20 15:44:13.288   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.MenuController.Create (AdminSite) in 4678.8074ms 
2017-10-20 15:44:13.424   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 POST http://localhost:27644/Menu/QueryJson application/x-www-form-urlencoded; charset=UTF-8 50 
2017-10-20 15:44:13.451   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
2017-10-20 15:44:13.481   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Controllers.MenuController.QueryJson (AdminSite) with arguments (00000000-0000-0000-0000-000000000001, True) - ModelState is Valid 
2017-10-20 15:44:13.495   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (4ms) [Parameters=[@__applicationId_0='?', @__isNav_Value_1='?'], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[ParentID] AS [pId], [a].[Name]
FROM [Menu] AS [a]
WHERE ([a].[ApplicationID] = @__applicationId_0) AND ([a].[IsNav] = @__isNav_Value_1) 
2017-10-20 15:44:13.499   Information   Microsoft.AspNetCore.Mvc.Formatters.Json.Internal.JsonResultExecutor   Executing JsonResult, writing value System.Collections.Generic.List`1[<>f__AnonymousType1`4[System.Guid,System.Guid,System.String,System.Boolean]]. 
2017-10-20 15:44:13.564   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 137.1327ms 200 application/json; charset=utf-8 
yJson (AdminSite) in 116.6366ms 
2017-10-20 15:44:52.650   Information   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully authenticated. 
2017-10-20 15:44:52.657   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
2017-10-20 15:44:52.704   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
2017-10-20 15:44:52.705   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Controllers.MenuController.Index (AdminSite) with arguments (1) - ModelState is Valid 
2017-10-20 15:44:52.752   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (4ms) [Parameters=[@__p_0='?', @__p_1='?'], CommandType='Text', CommandTimeout='30']
SELECT [t].[ID], [t].[ApplicationName], [t].[ActionName], [t].[ApplicationID], [t].[PyCode], [t].[Code], [t].[ControllerName], [t].[CreateDate], [t].[Description], [t].[IconCss], [t].[IsNav], [t].[Name], [t].[ShowIndex], [t].[ParentID], [t].[ParentMenuName]
FROM (
    SELECT [n].[ID], [n.ApplicationID_Model].[Name] AS [ApplicationName], [n].[ActionName], [n].[ApplicationID], [n].[PyCode], [n].[Code], [n].[ControllerName], [n].[CreateDate], [n].[Description], [n].[IconCss], [n].[IsNav], [n].[Name], [n].[ShowIndex], [n].[ParentID], CASE
        WHEN [n].[ParentID] = '00000000-0000-0000-0000-000000000000'
        THEN N'--根目录--' ELSE (
            SELECT TOP(1) [a].[Name]
            FROM [Menu] AS [a]
            WHERE [a].[ID] = [n].[ParentID]
        )
    END AS [ParentMenuName], ROW_NUMBER() OVER(ORDER BY [n].[ShowIndex]) AS [__RowNumber__]
    FROM [Menu] AS [n]
    INNER JOIN [Application] AS [n.ApplicationID_Model] ON [n].[ApplicationID] = [n.ApplicationID_Model].[ID]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_0) AND ([t].[__RowNumber__] <= (@__p_0 + @__p_1)) 
2017-10-20 15:44:52.767   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Menu] AS [n]
INNER JOIN [Application] AS [n.ApplicationID_Model] ON [n].[ApplicationID] = [n.ApplicationID_Model].[ID] 
2017-10-20 15:44:52.938   Information   Microsoft.AspNetCore.Mvc.ViewFeatures.Internal.ViewResultExecutor   Executing ViewResult, running view at path /Views/Menu/Index.cshtml. 
2017-10-20 15:44:53.475   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a]
WHERE ((1 & CASE
    WHEN UPPER([a].[ActionName]) = N'INDEX'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) & CASE
    WHEN UPPER([a].[ControllerName]) = N'MENU'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) = 1 
2017-10-20 15:44:53.489   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 852.6736ms 200 text/html; charset=utf-8 
CommandTimeout='30']
SELECT [a].[ID], [a].[Code], [a].[CreateDate], [a].[Description], [a].[Name], [a].[PyCode], [a].[ShowIndex]
FROM [Application] AS [a] 
2017-10-20 15:44:53.490   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (3ms) [Parameters=[@__userID_0='?'], CommandType='Text', CommandTimeout='30']
SELECT DISTINCT [m].[ID], [m].[ActionName], [m].[ApplicationID], [m].[AreaName], [m].[Code], [m].[ControllerName], [m].[CreateDate], [m].[Description], [m].[IconCss], [m].[IsNav], [m].[Name], [m].[ParentID], [m].[PyCode], [m].[ShowIndex]
FROM [Menu] AS [m]
INNER JOIN [UserRoleJurisdiction] AS [urj] ON [m].[ID] = [urj].[MenuID]
INNER JOIN [UserRole] AS [ur] ON [urj].[RoleID] = [ur].[RoleID]
WHERE [ur].[UserID] = @__userID_0 
2017-10-20 15:44:53.493   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a] 
2017-10-20 15:44:53.588   Information   Microsoft.AspNetCore.Mvc.Formatters.Json.Internal.JsonResultExecutor   Executing JsonResult, writing value System.Collections.Generic.List`1[<>f__AnonymousType1`4[System.Guid,System.Guid,System.String,System.Boolean]]. 
[a]
WHERE [a].[IsNav] = @__isNav_Value_0 
2017-10-20 15:44:53.589   Information   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully authenticated. 
2017-10-20 15:44:53.589   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 8.0457ms 200 application/json; charset=utf-8 
2017-10-20 15:44:53.590   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 POST http://localhost:27644/Menu/QueryJson application/x-www-form-urlencoded; charset=UTF-8 10 
2017-10-20 15:44:53.592   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
2017-10-20 15:44:53.592   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Controllers.MenuController.QueryJson (AdminSite) with arguments (, True) - ModelState is Valid 
2017-10-20 15:44:53.593   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.MenuController.QueryJson (AdminSite) in 6.9892ms 
2017-10-20 15:44:56.658   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 POST http://localhost:27644/Menu application/x-www-form-urlencoded; charset=UTF-8 368 
2017-10-20 15:44:56.679   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Controllers.MenuController.Index (AdminSite) with arguments (, 1c1e3c35-d6bc-40e7-9e95-a313ebd9bf0a, 1) - ModelState is Valid 
2017-10-20 15:44:56.688   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (6ms) [Parameters=[@__parentID_0='?', @__p_1='?', @__p_2='?'], CommandType='Text', CommandTimeout='30']
SELECT [t].[ID], [t].[ApplicationName], [t].[ActionName], [t].[ApplicationID], [t].[PyCode], [t].[Code], [t].[ControllerName], [t].[CreateDate], [t].[Description], [t].[IconCss], [t].[IsNav], [t].[Name], [t].[ShowIndex], [t].[ParentID], [t].[ParentMenuName]
FROM (
    SELECT [a].[ID], [a.ApplicationID_Model].[Name] AS [ApplicationName], [a].[ActionName], [a].[ApplicationID], [a].[PyCode], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ShowIndex], [a].[ParentID], CASE
        WHEN [a].[ParentID] = '00000000-0000-0000-0000-000000000000'
        THEN N'--根目录--' ELSE (
            SELECT TOP(1) [a0].[Name]
            FROM [Menu] AS [a0]
            WHERE [a0].[ID] = [a].[ParentID]
        )
    END AS [ParentMenuName], ROW_NUMBER() OVER(ORDER BY [a].[ShowIndex]) AS [__RowNumber__]
    FROM [Menu] AS [a]
    INNER JOIN [Application] AS [a.ApplicationID_Model] ON [a].[ApplicationID] = [a.ApplicationID_Model].[ID]
    WHERE [a].[ParentID] = @__parentID_0
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2)) 
2017-10-20 15:44:56.708   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (1ms) [Parameters=[@__parentID_0='?'], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Menu] AS [a]
INNER JOIN [Application] AS [a.ApplicationID_Model] ON [a].[ApplicationID] = [a.ApplicationID_Model].[ID]
WHERE [a].[ParentID] = @__parentID_0 
2017-10-20 15:44:56.709   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.MenuController.Index (AdminSite) in 39.6911ms 
2017-10-20 15:44:56.970   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 POST http://localhost:27644/Menu application/x-www-form-urlencoded; charset=UTF-8 368 
2017-10-20 15:44:56.987   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.MenuController.Index (AdminSite) in 8.5483ms 
Table.cshtml. 
2017-10-20 15:44:56.991   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Controllers.MenuController.Index (AdminSite) with arguments (, 1c1e3c35-d6bc-40e7-9e95-a313ebd9bf0a, 1) - ModelState is Valid 
onName], [t].[ApplicationID], [t].[PyCode], [t].[Code], [t].[ControllerName], [t].[CreateDate], [t].[Description], [t].[IconCss], [t].[IsNav], [t].[Name], [t].[ShowIndex], [t].[ParentID], [t].[ParentMenuName]
FROM (
    SELECT [a].[ID], [a.ApplicationID_Model].[Name] AS [ApplicationName], [a].[ActionName], [a].[ApplicationID], [a].[PyCode], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ShowIndex], [a].[ParentID], CASE
        WHEN [a].[ParentID] = '00000000-0000-0000-0000-000000000000'
        THEN N'--根目录--' ELSE (
            SELECT TOP(1) [a0].[Name]
            FROM [Menu] AS [a0]
            WHERE [a0].[ID] = [a].[ParentID]
        )
    END AS [ParentMenuName], ROW_NUMBER() OVER(ORDER BY [a].[ShowIndex]) AS [__RowNumber__]
    FROM [Menu] AS [a]
    INNER JOIN [Application] AS [a.ApplicationID_Model] ON [a].[ApplicationID] = [a.ApplicationID_Model].[ID]
    WHERE [a].[ParentID] = @__parentID_0
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2)) 
2017-10-20 15:44:56.996   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
2017-10-20 15:44:59.297   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 GET http://localhost:27644/Home/Index   
2017-10-20 15:44:59.311   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
dex (AdminSite) with arguments ((null)) - ModelState is Valid 
2017-10-20 15:44:59.534   Information   Microsoft.AspNetCore.Mvc.ViewFeatures.Internal.ViewResultExecutor   Executing ViewResult, running view at path /Views/Home/Index.cshtml. 
2017-10-20 15:45:02.641   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a]
WHERE ((1 & CASE
    WHEN UPPER([a].[ActionName]) = N'INDEX'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) & CASE
    WHEN UPPER([a].[ControllerName]) = N'HOME'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) = 1 
2017-10-20 15:45:02.641   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[@__userID_0='?'], CommandType='Text', CommandTimeout='30']
SELECT DISTINCT [m].[ID], [m].[ActionName], [m].[ApplicationID], [m].[AreaName], [m].[Code], [m].[ControllerName], [m].[CreateDate], [m].[Description], [m].[IconCss], [m].[IsNav], [m].[Name], [m].[ParentID], [m].[PyCode], [m].[ShowIndex]
FROM [Menu] AS [m]
INNER JOIN [UserRoleJurisdiction] AS [urj] ON [m].[ID] = [urj].[MenuID]
INNER JOIN [UserRole] AS [ur] ON [urj].[RoleID] = [ur].[RoleID]
WHERE [ur].[UserID] = @__userID_0 
2017-10-20 15:45:02.644   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a] 
2017-10-20 15:45:02.657   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.HomeController.Index (AdminSite) in 3343.661ms 
2017-10-20 15:46:10.797   Information   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully authenticated. 
2017-10-20 15:46:10.812   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
2017-10-20 15:46:10.813   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Controllers.MenuController.Index (AdminSite) with arguments (1) - ModelState is Valid 
2017-10-20 15:46:10.814   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (4ms) [Parameters=[@__p_0='?', @__p_1='?'], CommandType='Text', CommandTimeout='30']
SELECT [t].[ID], [t].[ApplicationName], [t].[ActionName], [t].[ApplicationID], [t].[PyCode], [t].[Code], [t].[ControllerName], [t].[CreateDate], [t].[Description], [t].[IconCss], [t].[IsNav], [t].[Name], [t].[ShowIndex], [t].[ParentID], [t].[ParentMenuName]
FROM (
    SELECT [n].[ID], [n.ApplicationID_Model].[Name] AS [ApplicationName], [n].[ActionName], [n].[ApplicationID], [n].[PyCode], [n].[Code], [n].[ControllerName], [n].[CreateDate], [n].[Description], [n].[IconCss], [n].[IsNav], [n].[Name], [n].[ShowIndex], [n].[ParentID], CASE
        WHEN [n].[ParentID] = '00000000-0000-0000-0000-000000000000'
        THEN N'--根目录--' ELSE (
            SELECT TOP(1) [a].[Name]
            FROM [Menu] AS [a]
            WHERE [a].[ID] = [n].[ParentID]
        )
    END AS [ParentMenuName], ROW_NUMBER() OVER(ORDER BY [n].[ShowIndex]) AS [__RowNumber__]
    FROM [Menu] AS [n]
    INNER JOIN [Application] AS [n.ApplicationID_Model] ON [n].[ApplicationID] = [n.ApplicationID_Model].[ID]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_0) AND ([t].[__RowNumber__] <= (@__p_0 + @__p_1)) 
2017-10-20 15:46:10.827   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[Code], [a].[CreateDate], [a].[Description], [a].[Name], [a].[PyCode], [a].[ShowIndex]
FROM [Application] AS [a] 
2017-10-20 15:46:10.827   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.MenuController.Index (AdminSite) in 27.9878ms 
2017-10-20 15:46:10.831   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a] 
2017-10-20 15:46:10.831   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a]
WHERE ((1 & CASE
    WHEN UPPER([a].[ActionName]) = N'INDEX'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) & CASE
    WHEN UPPER([a].[ControllerName]) = N'MENU'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) = 1 
2017-10-20 15:46:10.832   Information   Microsoft.AspNetCore.Mvc.ViewFeatures.Internal.ViewResultExecutor   Executing ViewResult, running view at path /Views/Menu/Index.cshtml. 
2017-10-20 15:46:10.835   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Menu] AS [n]
INNER JOIN [Application] AS [n.ApplicationID_Model] ON [n].[ApplicationID] = [n.ApplicationID_Model].[ID] 
2017-10-20 15:46:11.176   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 POST http://localhost:27644/Menu/QueryJson application/x-www-form-urlencoded; charset=UTF-8 10 
2017-10-20 15:46:11.188   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (2ms) [Parameters=[@__isNav_Value_0='?'], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[ParentID] AS [pId], [a].[Name]
FROM [Menu] AS [a]
WHERE [a].[IsNav] = @__isNav_Value_0 
2017-10-20 15:46:11.190   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Controllers.MenuController.QueryJson (AdminSite) with arguments (, True) - ModelState is Valid 
2017-10-20 15:46:11.193   Information   Microsoft.AspNetCore.Mvc.Formatters.Json.Internal.JsonResultExecutor   Executing JsonResult, writing value System.Collections.Generic.List`1[<>f__AnonymousType1`4[System.Guid,System.Guid,System.String,System.Boolean]]. 
2017-10-20 15:46:13.350   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
eate (AdminSite) with arguments ((null)) - ModelState is Valid 
ription], [a].[Name], [a].[PyCode], [a].[ShowIndex]
FROM [Application] AS [a] 
2017-10-20 15:46:13.352   Information   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully authenticated. 
2017-10-20 15:46:13.356   Information   Microsoft.AspNetCore.Mvc.ViewFeatures.Internal.ViewResultExecutor   Executing ViewResult, running view at path /Views/Menu/Create.cshtml. 
2017-10-20 15:46:13.359   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (1ms) [Parameters=[@__currentMenu_ParentID_0='?'], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a]
WHERE [a].[ID] = @__currentMenu_ParentID_0 
2017-10-20 15:46:13.361   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a]
WHERE ((1 & CASE
    WHEN UPPER([a].[ActionName]) = N'CREATE'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) & CASE
    WHEN UPPER([a].[ControllerName]) = N'MENU'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) = 1 
2017-10-20 15:46:13.377   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[Code], [a].[CreateDate], [a].[Description], [a].[Name], [a].[PyCode], [a].[ShowIndex]
FROM [Application] AS [a] 
eateDate], [m].[Description], [m].[IconCss], [m].[IsNav], [m].[Name], [m].[ParentID], [m].[PyCode], [m].[ShowIndex]
FROM [Menu] AS [m]
INNER JOIN [UserRoleJurisdiction] AS [urj] ON [m].[ID] = [urj].[MenuID]
INNER JOIN [UserRole] AS [ur] ON [urj].[RoleID] = [ur].[RoleID]
WHERE [ur].[UserID] = @__userID_0 
2017-10-20 15:46:13.381   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 27.7803ms 200 text/html; charset=utf-8 
2017-10-20 15:46:13.656   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 POST http://localhost:27644/Menu/QueryJson application/x-www-form-urlencoded; charset=UTF-8 50 
2017-10-20 15:46:13.658   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
2017-10-20 15:46:13.659   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Controllers.MenuController.QueryJson (AdminSite) with arguments (00000000-0000-0000-0000-000000000001, True) - ModelState is Valid 
2017-10-20 15:46:13.671   Information   Microsoft.AspNetCore.Mvc.Formatters.Json.Internal.JsonResultExecutor   Executing JsonResult, writing value System.Collections.Generic.List`1[<>f__AnonymousType1`4[System.Guid,System.Guid,System.String,System.Boolean]]. 
.[Name]
FROM [Menu] AS [a]
WHERE ([a].[ApplicationID] = @__applicationId_0) AND ([a].[IsNav] = @__isNav_Value_1) 
2017-10-20 15:46:14.743   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
thenticated. 
 with arguments (1) - ModelState is Valid 
2017-10-20 15:46:14.745   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (5ms) [Parameters=[@__p_0='?', @__p_1='?'], CommandType='Text', CommandTimeout='30']
SELECT [t].[ID], [t].[ApplicationName], [t].[ActionName], [t].[ApplicationID], [t].[PyCode], [t].[Code], [t].[ControllerName], [t].[CreateDate], [t].[Description], [t].[IconCss], [t].[IsNav], [t].[Name], [t].[ShowIndex], [t].[ParentID], [t].[ParentMenuName]
FROM (
    SELECT [n].[ID], [n.ApplicationID_Model].[Name] AS [ApplicationName], [n].[ActionName], [n].[ApplicationID], [n].[PyCode], [n].[Code], [n].[ControllerName], [n].[CreateDate], [n].[Description], [n].[IconCss], [n].[IsNav], [n].[Name], [n].[ShowIndex], [n].[ParentID], CASE
        WHEN [n].[ParentID] = '00000000-0000-0000-0000-000000000000'
        THEN N'--根目录--' ELSE (
            SELECT TOP(1) [a].[Name]
            FROM [Menu] AS [a]
            WHERE [a].[ID] = [n].[ParentID]
        )
    END AS [ParentMenuName], ROW_NUMBER() OVER(ORDER BY [n].[ShowIndex]) AS [__RowNumber__]
    FROM [Menu] AS [n]
    INNER JOIN [Application] AS [n.ApplicationID_Model] ON [n].[ApplicationID] = [n.ApplicationID_Model].[ID]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_0) AND ([t].[__RowNumber__] <= (@__p_0 + @__p_1)) 
2017-10-20 15:46:14.745   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 GET http://localhost:27644/Menu   
2017-10-20 15:46:14.746   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
2017-10-20 15:46:14.754   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Menu] AS [n]
INNER JOIN [Application] AS [n.ApplicationID_Model] ON [n].[ApplicationID] = [n.ApplicationID_Model].[ID] 
2017-10-20 15:46:14.757   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a]
WHERE ((1 & CASE
    WHEN UPPER([a].[ActionName]) = N'INDEX'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) & CASE
    WHEN UPPER([a].[ControllerName]) = N'MENU'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) = 1 
2017-10-20 15:46:14.761   Information   Microsoft.AspNetCore.Mvc.ViewFeatures.Internal.ViewResultExecutor   Executing ViewResult, running view at path /Views/Menu/Index.cshtml. 
2017-10-20 15:46:14.768   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 24.1436ms 200 text/html; charset=utf-8 
2017-10-20 15:46:14.773   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (1ms) [Parameters=[@__userID_0='?'], CommandType='Text', CommandTimeout='30']
SELECT DISTINCT [m].[ID], [m].[ActionName], [m].[ApplicationID], [m].[AreaName], [m].[Code], [m].[ControllerName], [m].[CreateDate], [m].[Description], [m].[IconCss], [m].[IsNav], [m].[Name], [m].[ParentID], [m].[PyCode], [m].[ShowIndex]
FROM [Menu] AS [m]
INNER JOIN [UserRoleJurisdiction] AS [urj] ON [m].[ID] = [urj].[MenuID]
INNER JOIN [UserRole] AS [ur] ON [urj].[RoleID] = [ur].[RoleID]
WHERE [ur].[UserID] = @__userID_0 
2017-10-20 15:46:14.777   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.MenuController.Index (AdminSite) in 23.3386ms 
2017-10-20 15:46:15.010   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 POST http://localhost:27644/Menu/QueryJson application/x-www-form-urlencoded; charset=UTF-8 10 
delState is Valid 
2017-10-20 15:46:15.017   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 2.5334ms 200 application/json; charset=utf-8 
2017-10-20 15:46:15.017   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.MenuController.QueryJson (AdminSite) in 1.7668ms 
2017-10-20 15:46:15.022   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[@__isNav_Value_0='?'], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[ParentID] AS [pId], [a].[Name]
FROM [Menu] AS [a]
WHERE [a].[IsNav] = @__isNav_Value_0 
2017-10-20 15:46:18.376   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
dex (AdminSite) with arguments (, 1c1e3c35-d6bc-40e7-9e95-a313ebd9bf0a, 1) - ModelState is Valid 
2017-10-20 15:46:18.376   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
2017-10-20 15:46:18.382   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 POST http://localhost:27644/Menu application/x-www-form-urlencoded; charset=UTF-8 368 
2017-10-20 15:46:18.389   Information   Microsoft.AspNetCore.Mvc.ViewFeatures.Internal.PartialViewResultExecutor   Executing PartialViewResult, running view at path /Views/Menu/AjaxMenuTable.cshtml. 
(*)
FROM [Menu] AS [a]
INNER JOIN [Application] AS [a.ApplicationID_Model] ON [a].[ApplicationID] = [a.ApplicationID_Model].[ID]
WHERE [a].[ParentID] = @__parentID_0 
2017-10-20 15:46:18.392   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (4ms) [Parameters=[@__parentID_0='?', @__p_1='?', @__p_2='?'], CommandType='Text', CommandTimeout='30']
SELECT [t].[ID], [t].[ApplicationName], [t].[ActionName], [t].[ApplicationID], [t].[PyCode], [t].[Code], [t].[ControllerName], [t].[CreateDate], [t].[Description], [t].[IconCss], [t].[IsNav], [t].[Name], [t].[ShowIndex], [t].[ParentID], [t].[ParentMenuName]
FROM (
    SELECT [a].[ID], [a.ApplicationID_Model].[Name] AS [ApplicationName], [a].[ActionName], [a].[ApplicationID], [a].[PyCode], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ShowIndex], [a].[ParentID], CASE
        WHEN [a].[ParentID] = '00000000-0000-0000-0000-000000000000'
        THEN N'--根目录--' ELSE (
            SELECT TOP(1) [a0].[Name]
            FROM [Menu] AS [a0]
            WHERE [a0].[ID] = [a].[ParentID]
        )
    END AS [ParentMenuName], ROW_NUMBER() OVER(ORDER BY [a].[ShowIndex]) AS [__RowNumber__]
    FROM [Menu] AS [a]
    INNER JOIN [Application] AS [a.ApplicationID_Model] ON [a].[ApplicationID] = [a.ApplicationID_Model].[ID]
    WHERE [a].[ParentID] = @__parentID_0
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2)) 
2017-10-20 15:46:18.394   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.MenuController.Index (AdminSite) in 11.7745ms 
2017-10-20 15:46:20.141   Information   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully authenticated. 
) with arguments (b180015e-792d-4656-9b5a-dedaadd7a2d2) - ModelState is Valid 
2017-10-20 15:46:20.149   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 GET http://localhost:27644/Menu/Modify/b180015e-792d-4656-9b5a-dedaadd7a2d2   
2017-10-20 15:46:20.159   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (3ms) [Parameters=[@__rid_0='?'], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [n].[ID], [n.ApplicationID_Model].[Name] AS [ApplicationName], [n].[ActionName], [n].[ApplicationID], [n].[Code], [n].[ControllerName], [n].[CreateDate], [n].[Description], [n].[IconCss], [n].[IsNav], [n].[Name], [n].[ShowIndex], [n].[ParentID], CASE
    WHEN [n].[ParentID] = '00000000-0000-0000-0000-000000000000'
    THEN N'--根目录--' ELSE (
        SELECT TOP(1) [a].[Name]
        FROM [Menu] AS [a]
        WHERE [a].[ID] = [n].[ParentID]
    )
END AS [ParentMenuName], CASE
    WHEN [n].[IsNav] = 1
    THEN CASE
        WHEN [n].[ActionName] IS NULL OR ([n].[ActionName] = N'')
        THEN 1 ELSE 2
    END ELSE 3
END AS [MenuType]
FROM [Menu] AS [n]
INNER JOIN [Application] AS [n.ApplicationID_Model] ON [n].[ApplicationID] = [n.ApplicationID_Model].[ID]
WHERE [n].[ID] = @__rid_0 
2017-10-20 15:46:20.313   Information   Microsoft.AspNetCore.Mvc.ViewFeatures.Internal.ViewResultExecutor   Executing ViewResult, running view at path /Views/Menu/Modify.cshtml. 
2017-10-20 15:46:20.334   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a]
WHERE ((1 & CASE
    WHEN UPPER([a].[ActionName]) = N'MODIFY'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) & CASE
    WHEN UPPER([a].[ControllerName]) = N'MENU'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) = 1 
2017-10-20 15:46:20.343   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 220.1656ms 200 text/html; charset=utf-8 
er.Modify (AdminSite) in 213.3267ms 
 [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a] 
2017-10-20 15:46:20.349   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (2ms) [Parameters=[@__userID_0='?'], CommandType='Text', CommandTimeout='30']
SELECT DISTINCT [m].[ID], [m].[ActionName], [m].[ApplicationID], [m].[AreaName], [m].[Code], [m].[ControllerName], [m].[CreateDate], [m].[Description], [m].[IconCss], [m].[IsNav], [m].[Name], [m].[ParentID], [m].[PyCode], [m].[ShowIndex]
FROM [Menu] AS [m]
INNER JOIN [UserRoleJurisdiction] AS [urj] ON [m].[ID] = [urj].[MenuID]
INNER JOIN [UserRole] AS [ur] ON [urj].[RoleID] = [ur].[RoleID]
WHERE [ur].[UserID] = @__userID_0 
2017-10-20 15:46:20.492   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.MenuController.QueryJson (AdminSite) in 1.8849ms 
nymousType1`4[System.Guid,System.Guid,System.String,System.Boolean]]. 
2017-10-20 15:46:20.492   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 2.806ms 200 application/json; charset=utf-8 
2017-10-20 15:46:20.502   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[@__applicationId_0='?', @__isNav_Value_1='?'], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[ParentID] AS [pId], [a].[Name]
FROM [Menu] AS [a]
WHERE ([a].[ApplicationID] = @__applicationId_0) AND ([a].[IsNav] = @__isNav_Value_1) 
2017-10-20 15:46:20.506   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Controllers.MenuController.QueryJson (AdminSite) with arguments (00000000-0000-0000-0000-000000000001, True) - ModelState is Valid 
2017-10-20 15:46:20.510   Information   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully authenticated. 
2017-10-20 15:46:20.515   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 POST http://localhost:27644/Menu/QueryJson application/x-www-form-urlencoded; charset=UTF-8 50 
2017-10-20 15:46:32.019   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 POST http://localhost:27644/Menu/Modify/b180015e-792d-4656-9b5a-dedaadd7a2d2 application/x-www-form-urlencoded 587 
2017-10-20 15:46:32.020   Information   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully authenticated. 
2017-10-20 15:46:32.036   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
2017-10-20 15:46:32.047   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Controllers.MenuController.Modify (AdminSite) with arguments (ViewModels.AdminWeb.Nav.MenuViewModel) - ModelState is Valid 
2017-10-20 15:46:32.145   Information   Microsoft.AspNetCore.Mvc.ViewFeatures.Internal.ViewResultExecutor   Executing ViewResult, running view at path /Views/Menu/Index.cshtml. 
2017-10-20 15:46:32.145   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (3ms) [Parameters=[@p13='?', @p0='?' (Size = 4000), @p1='?', @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?', @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?', @p9='?' (Size = 4000), @p10='?', @p11='?' (Size = 4000), @p12='?'], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Menu] SET [ActionName] = @p0, [ApplicationID] = @p1, [AreaName] = @p2, [Code] = @p3, [ControllerName] = @p4, [CreateDate] = @p5, [Description] = @p6, [IconCss] = @p7, [IsNav] = @p8, [Name] = @p9, [ParentID] = @p10, [PyCode] = @p11, [ShowIndex] = @p12
WHERE [ID] = @p13;
SELECT @@ROWCOUNT; 
2017-10-20 15:46:32.147   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 129.3996ms 302  
2017-10-20 15:46:32.149   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
2017-10-20 15:46:32.149   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Menu] AS [n]
INNER JOIN [Application] AS [n.ApplicationID_Model] ON [n].[ApplicationID] = [n.ApplicationID_Model].[ID] 
2017-10-20 15:46:32.150   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[@__p_0='?', @__p_1='?'], CommandType='Text', CommandTimeout='30']
SELECT [t].[ID], [t].[ApplicationName], [t].[ActionName], [t].[ApplicationID], [t].[PyCode], [t].[Code], [t].[ControllerName], [t].[CreateDate], [t].[Description], [t].[IconCss], [t].[IsNav], [t].[Name], [t].[ShowIndex], [t].[ParentID], [t].[ParentMenuName]
FROM (
    SELECT [n].[ID], [n.ApplicationID_Model].[Name] AS [ApplicationName], [n].[ActionName], [n].[ApplicationID], [n].[PyCode], [n].[Code], [n].[ControllerName], [n].[CreateDate], [n].[Description], [n].[IconCss], [n].[IsNav], [n].[Name], [n].[ShowIndex], [n].[ParentID], CASE
        WHEN [n].[ParentID] = '00000000-0000-0000-0000-000000000000'
        THEN N'--根目录--' ELSE (
            SELECT TOP(1) [a].[Name]
            FROM [Menu] AS [a]
            WHERE [a].[ID] = [n].[ParentID]
        )
    END AS [ParentMenuName], ROW_NUMBER() OVER(ORDER BY [n].[ShowIndex]) AS [__RowNumber__]
    FROM [Menu] AS [n]
    INNER JOIN [Application] AS [n.ApplicationID_Model] ON [n].[ApplicationID] = [n.ApplicationID_Model].[ID]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_0) AND ([t].[__RowNumber__] <= (@__p_0 + @__p_1)) 
2017-10-20 15:46:32.154   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Controllers.MenuController.Index (AdminSite) with arguments (1) - ModelState is Valid 
2017-10-20 15:46:32.154   Information   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully authenticated. 
2017-10-20 15:46:32.155   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a] 
2017-10-20 15:46:32.158   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[Code], [a].[CreateDate], [a].[Description], [a].[Name], [a].[PyCode], [a].[ShowIndex]
FROM [Application] AS [a] 
2017-10-20 15:46:32.159   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
, CommandTimeout='30']
SELECT DISTINCT [m].[ID], [m].[ActionName], [m].[ApplicationID], [m].[AreaName], [m].[Code], [m].[ControllerName], [m].[CreateDate], [m].[Description], [m].[IconCss], [m].[IsNav], [m].[Name], [m].[ParentID], [m].[PyCode], [m].[ShowIndex]
FROM [Menu] AS [m]
INNER JOIN [UserRoleJurisdiction] AS [urj] ON [m].[ID] = [urj].[MenuID]
INNER JOIN [UserRole] AS [ur] ON [urj].[RoleID] = [ur].[RoleID]
WHERE [ur].[UserID] = @__userID_0 
) ELSE CAST(0 AS BIT)
END) = 1 
2017-10-20 15:46:32.163   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.MenuController.Index (AdminSite) in 13.017ms 
2017-10-20 15:46:32.163   Information   Microsoft.AspNetCore.Mvc.RedirectToActionResult   Executing RedirectResult, redirecting to /Menu. 
2017-10-20 15:46:32.306   Information   Microsoft.AspNetCore.Mvc.Formatters.Json.Internal.JsonResultExecutor   Executing JsonResult, writing value System.Collections.Generic.List`1[<>f__AnonymousType1`4[System.Guid,System.Guid,System.String,System.Boolean]]. 
2017-10-20 15:46:32.307   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
2017-10-20 15:46:32.307   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[@__isNav_Value_0='?'], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[ParentID] AS [pId], [a].[Name]
FROM [Menu] AS [a]
WHERE [a].[IsNav] = @__isNav_Value_0 
2017-10-20 15:46:32.310   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 2.5375ms 200 application/json; charset=utf-8 
eryJson (AdminSite) in 1.7319ms 
d; charset=UTF-8 10 
2017-10-20 15:46:32.313   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Controllers.MenuController.QueryJson (AdminSite) with arguments (, True) - ModelState is Valid 
2017-10-20 15:46:42.609   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
Index.cshtml. 
TOP(1) [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a]
WHERE ((1 & CASE
    WHEN UPPER([a].[ActionName]) = N'INDEX'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) & CASE
    WHEN UPPER([a].[ControllerName]) = N'HOME'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) = 1 
2017-10-20 15:46:42.613   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (3ms) [Parameters=[@__userID_0='?'], CommandType='Text', CommandTimeout='30']
SELECT DISTINCT [m].[ID], [m].[ActionNam2017-10-20 15:46:42.613   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 GET http://localhost:27644/Home/Index   
[ParentID], [m].[PyCode], [m].[ShowIndex]
FROM [Menu] AS [m]
INNER JOIN [UserRoleJurisdiction] AS [urj] ON [m].[ID] = [urj].[MenuID]
INNER JOIN [UserRole] AS [ur] ON [urj].[RoleID] = [ur].[RoleID]
WHERE [ur].[UserID] = @__userID_0 
2017-10-20 15:46:42.624   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.HomeController.Index (AdminSite) in 17.8423ms 
], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a] 
2017-10-20 15:46:42.628   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[Code], [a].[CreateDate], [a].[Description], [a].[Name], [a].[PyCode], [a].[ShowIndex]
FROM [Application] AS [a] 
2017-10-20 15:47:58.279   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 GET http://localhost:27644/Menu/Index   
2017-10-20 15:47:58.296   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 2017-10-20 15:47:58.296   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (3ms) [Parameters=[@__p_0='?', @__p_1='?'], CommandType='Text', CommandTimeout='30']
SELECT [t].[ID], [t].[ApplicationName], [t].[ActionName], [t].[ApplicationID], [t].[PyCode], [t].[Code], [t].[ControllerName], [t].[CreateDate], [t].[Description], [t].[IconCss], [t].[IsNav], [t].[Name], [t].[ShowIndex], [t].[ParentID], [t].[ParentMenuName]
FROM (
    SELECT [n].[ID], [n.ApplicationID_Model].[Name] AS [ApplicationName], [n].[ActionName], [n].[ApplicationID], [n].[PyCode], [n].[Code], [n].[ControllerName], [n].[CreateDate], [n].[Description], [n].[IconCss], [n].[IsNav], [n].[Name], [n].[ShowIndex], [n].[ParentID], CASE
        WHEN [n].[ParentID] = '00000000-0000-0000-0000-000000000000'
        THEN N'--根目录--' ELSE (
            SELECT TOP(1) [a].[Name]
            FROM [Menu] AS [a]
            WHERE [a].[ID] = [n].[ParentID]
        )
    END AS [ParentMenuName], ROW_NUMBER() OVER(ORDER BY [n].[ShowIndex]) AS [__RowNumber__]
    FROM [Menu] AS [n]
    INNER JOIN [Application] AS [n.ApplicationID_Model] ON [n].[ApplicationID] = [n.ApplicationID_Model].[ID]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_0) AND ([t].[__RowNumber__] <= (@__p_0 + @__p_1)) 
2017-10-20 15:47:58.302   Information   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully authenticated. 
2017-10-20 15:47:58.312   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[Code], [a].[CreateDate], [a].[Description], [a].[Name], [a].[PyCode], [a].[ShowIndex]
FROM [Application] AS [a] 
escription], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a]
WHERE ((1 & CASE
    WHEN UPPER([a].[ActionName]) = N'INDEX'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) & CASE
    WHEN UPPER([a].[ControllerName]) = N'MENU'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) = 1 
2017-10-20 15:47:58.342   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a] 
2017-10-20 15:47:58.357   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.MenuController.Index (AdminSite) in 61.4617ms 
2017-10-20 15:47:58.524   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 3.8641ms 200 application/json; charset=utf-8 
ollections.Generic.List`1[<>f__AnonymousType1`4[System.Guid,System.Guid,System.String,System.Boolean]]. 
2017-10-20 15:47:58.528   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
Text', CommandTimeout='30']
SELECT [a].[ID], [a].[ParentID] AS [pId], [a].[Name]
FROM [Menu] AS [a]
WHERE [a].[IsNav] = @__isNav_Value_0 
2017-10-20 15:47:58.533   Information   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully authenticated. 
2017-10-20 15:47:58.534   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 POST http://localhost:27644/Menu/QueryJson application/x-www-form-urlencoded; charset=UTF-8 10 
2017-10-20 15:48:00.555   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a] 
2017-10-20 15:48:00.566   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[@__userID_0='?'], CommandType='Text', CommandTimeout='30']
SELECT DISTINCT [m].[ID], [m].[ActionName], [m].[ApplicationID], [m].[AreaName], [m].[Code], [m].[ControllerName], [m].[CreateDate], [m].[Description], [m].[IconCss], [m].[IsNav], [m].[Name], [m].[ParentID], [m].[PyCode], [m].[ShowIndex]
FROM [Menu] AS [m]
INNER JOIN [UserRoleJurisdiction] AS [urj] ON [m].[ID] = [urj].[MenuID]
INNER JOIN [UserRole] AS [ur] ON [urj].[RoleID] = [ur].[RoleID]
WHERE [ur].[UserID] = @__userID_0 
2017-10-20 15:48:00.567   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (1ms) [Parameters=[@__currentMenu_ParentID_0='?'], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a]
WHERE [a].[ID] = @__currentMenu_ParentID_0 
2017-10-20 15:48:00.575   Information   Microsoft.AspNetCore.Mvc.ViewFeatures.Internal.ViewResultExecutor   Executing ViewResult, running view at path /Views/Menu/Create.cshtml. 
a].[ID], [a].[Code], [a].[CreateDate], [a].[Description], [a].[Name], [a].[PyCode], [a].[ShowIndex]
FROM [Application] AS [a] 
escription], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a]
WHERE ((1 & CASE
    WHEN UPPER([a].[ActionName]) = N'CREATE'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) & CASE
    WHEN UPPER([a].[ControllerName]) = N'MENU'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) = 1 
2017-10-20 15:48:00.581   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
thenticated. 
) with arguments ((null)) - ModelState is Valid 
2017-10-20 15:48:00.584   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 GET http://localhost:27644/Menu/Create   
2017-10-20 15:48:00.658   Information   Microsoft.AspNetCore.Mvc.Formatters.Json.Internal.JsonResultExecutor   Executing JsonResult, writing value System.Collections.Generic.List`1[<>f__AnonymousType1`4[System.Guid,System.Guid,System.String,System.Boolean]]. 
2017-10-20 15:48:00.664   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Controllers.MenuController.QueryJson (AdminSite) with arguments (00000000-0000-0000-0000-000000000001, True) - ModelState is Valid 
]
FROM [Menu] AS [a]
WHERE ([a].[ApplicationID] = @__applicationId_0) AND ([a].[IsNav] = @__isNav_Value_1) 
2017-10-20 15:48:00.668   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
2017-10-20 15:48:00.669   Information   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully authenticated. 
2017-10-20 15:48:00.672   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 POST http://localhost:27644/Menu/QueryJson application/x-www-form-urlencoded; charset=UTF-8 50 
2017-10-20 15:48:00.674   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 3.4298ms 200 application/json; charset=utf-8 
2017-10-20 15:48:48.754   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
on/x-www-form-urlencoded 564 
2017-10-20 15:48:48.766   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Controllers.MenuController.Create (AdminSite) with arguments (ViewModels.AdminWeb.Nav.MenuViewModel) - ModelState is Valid 
2017-10-20 15:48:48.783   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 30.9995ms 302  
ng to /Menu. 
2017-10-20 15:48:48.783   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (1ms) [Parameters=[@p0='?', @p1='?' (Size = 4000), @p2='?', @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?', @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?', @p10='?' (Size = 4000), @p11='?', @p12='?' (Size = 4000), @p13='?'], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Menu] ([ID], [ActionName], [ApplicationID], [AreaName], [Code], [ControllerName], [CreateDate], [Description], [IconCss], [IsNav], [Name], [ParentID], [PyCode], [ShowIndex])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13); 
2017-10-20 15:48:48.785   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 GET http://localhost:27644/Menu   
2017-10-20 15:48:48.789   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.MenuController.Create (AdminSite) in 27.2938ms 
2017-10-20 15:48:48.796   Information   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully authenticated. 
 with arguments (1) - ModelState is Valid 
2017-10-20 15:48:48.800   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
2017-10-20 15:48:48.812   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.MenuController.Index (AdminSite) in 25.7245ms 
], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a] 
2017-10-20 15:48:48.816   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (3ms) [Parameters=[@__userID_0='?'], CommandType='Text', CommandTimeout='30']
SELECT DISTINCT [m].[ID], [m].[ActionName], [m].[ApplicationID], [m].[AreaName], [m].[Code], [m].[ControllerName], [m].[CreateDate], [m].[Description], [m].[IconCss], [m].[IsNav], [m].[Name], [m].[ParentID], [m].[PyCode], [m].[ShowIndex]
FROM [Menu] AS [m]
INNER JOIN [UserRoleJurisdiction] AS [urj] ON [m].[ID] = [urj].[MenuID]
INNER JOIN [UserRole] AS [ur] ON [urj].[RoleID] = [ur].[RoleID]
WHERE [ur].[UserID] = @__userID_0 
) ELSE CAST(0 AS BIT)
END) = 1 
2017-10-20 15:48:48.820   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (7ms) [Parameters=[@__p_0='?', @__p_1='?'], CommandType='Text', CommandTimeout='30']
SELECT [t].[ID], [t].[ApplicationName], [t].[ActionName], [t].[ApplicationID], [t].[PyCode], [t].[Code], [t].[ControllerName], [t].[CreateDate], [t].[Description], [t].[IconCss], [t].[IsNav], [t].[Name], [t].[ShowIndex], [t].[ParentID], [t].[ParentMenuName]
FROM (
    SELECT [n].[ID], [n.ApplicationID_Model].[Name] AS [ApplicationName], [n].[ActionName], [n].[ApplicationID], [n].[PyCode], [n].[Code], [n].[ControllerName], [n].[CreateDate], [n].[Description], [n].[IconCss], [n].[IsNav], [n].[Name], [n].[ShowIndex], [n].[ParentID], CASE
        WHEN [n].[ParentID] = '00000000-0000-0000-0000-000000000000'
        THEN N'--根目录--' ELSE (
            SELECT TOP(1) [a].[Name]
            FROM [Menu] AS [a]
            WHERE [a].[ID] = [n].[ParentID]
        )
    END AS [ParentMenuName], ROW_NUMBER() OVER(ORDER BY [n].[ShowIndex]) AS [__RowNumber__]
    FROM [Menu] AS [n]
    INNER JOIN [Application] AS [n.ApplicationID_Model] ON [n].[ApplicationID] = [n.ApplicationID_Model].[ID]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_0) AND ([t].[__RowNumber__] <= (@__p_0 + @__p_1)) 
2017-10-20 15:48:48.922   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.MenuController.QueryJson (AdminSite) in 7.7237ms 
nymousType1`4[System.Guid,System.Guid,System.String,System.Boolean]]. 
2017-10-20 15:48:48.927   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
Text', CommandTimeout='30']
SELECT [a].[ID], [a].[ParentID] AS [pId], [a].[Name]
FROM [Menu] AS [a]
WHERE [a].[IsNav] = @__isNav_Value_0 
2017-10-20 15:48:48.933   Information   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully authenticated. 
m-urlencoded; charset=UTF-8 10 
2017-10-20 15:48:48.935   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Controllers.MenuController.QueryJson (AdminSite) with arguments (, True) - ModelState is Valid 
2017-10-20 15:48:52.584   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
2017-10-20 15:48:52.584   Information   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully authenticated. 
2017-10-20 15:48:52.585   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 POST http://localhost:27644/Menu application/x-www-form-urlencoded; charset=UTF-8 363 
2017-10-20 15:48:52.597   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Controllers.MenuController.Index (AdminSite) with arguments (, 00000000-0000-0000-0000-000000000000, 1) - ModelState is Valid 
onName], [t].[ApplicationID], [t].[PyCode], [t].[Code], [t].[ControllerName], [t].[CreateDate], [t].[Description], [t].[IconCss], [t].[IsNav], [t].[Name], [t].[ShowIndex], [t].[ParentID], [t].[ParentMenuName]
FROM (
    SELECT [a].[ID], [a.ApplicationID_Model].[Name] AS [ApplicationName], [a].[ActionName], [a].[ApplicationID], [a].[PyCode], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ShowIndex], [a].[ParentID], CASE
        WHEN [a].[ParentID] = '00000000-0000-0000-0000-000000000000'
        THEN N'--根目录--' ELSE (
            SELECT TOP(1) [a0].[Name]
            FROM [Menu] AS [a0]
            WHERE [a0].[ID] = [a].[ParentID]
        )
    END AS [ParentMenuName], ROW_NUMBER() OVER(ORDER BY [a].[ShowIndex]) AS [__RowNumber__]
    FROM [Menu] AS [a]
    INNER JOIN [Application] AS [a.ApplicationID_Model] ON [a].[ApplicationID] = [a.ApplicationID_Model].[ID]
    WHERE [a].[ParentID] = @__parentID_0
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2)) 
2017-10-20 15:48:52.611   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 17.7509ms 200 text/html; charset=utf-8 
mmandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Menu] AS [a]
INNER JOIN [Application] AS [a.ApplicationID_Model] ON [a].[ApplicationID] = [a.ApplicationID_Model].[ID]
WHERE [a].[ParentID] = @__parentID_0 
2017-10-20 15:48:52.615   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.MenuController.Index (AdminSite) in 16.6787ms 
2017-10-20 15:48:52.617   Information   Microsoft.AspNetCore.Mvc.ViewFeatures.Internal.PartialViewResultExecutor   Executing PartialViewResult, running view at path /Views/Menu/AjaxMenuTable.cshtml. 
2017-10-20 15:48:54.124   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 GET http://localhost:27644/Menu/Modify/049cf9e2-623c-4e10-ba29-c1470be3fa65   
 (049cf9e2-623c-4e10-ba29-c1470be3fa65) - ModelState is Valid 
2017-10-20 15:48:54.128   Information   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully authenticated. 
2017-10-20 15:48:54.146   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[Code], [a].[CreateDate], [a].[Description], [a].[Name], [a].[PyCode], [a].[ShowIndex]
FROM [Application] AS [a] 
eateDate], [m].[Description], [m].[IconCss], [m].[IsNav], [m].[Name], [m].[ParentID], [m].[PyCode], [m].[ShowIndex]
FROM [Menu] AS [m]
INNER JOIN [UserRoleJurisdiction] AS [urj] ON [m].[ID] = [urj].[MenuID]
INNER JOIN [UserRole] AS [ur] ON [urj].[RoleID] = [ur].[RoleID]
WHERE [ur].[UserID] = @__userID_0 
T) ELSE CAST(0 AS BIT)
END) = 1 
2017-10-20 15:48:54.149   Information   Microsoft.AspNetCore.Mvc.ViewFeatures.Internal.ViewResultExecutor   Executing ViewResult, running view at path /Views/Menu/Modify.cshtml. 
a].[ID], [a].[Code], [a].[CreateDate], [a].[Description], [a].[Name], [a].[PyCode], [a].[ShowIndex]
FROM [Application] AS [a] 
2017-10-20 15:48:54.154   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (3ms) [Parameters=[@__rid_0='?'], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [n].[ID], [n.ApplicationID_Model].[Name] AS [ApplicationName], [n].[ActionName], [n].[ApplicationID], [n].[Code], [n].[ControllerName], [n].[CreateDate], [n].[Description], [n].[IconCss], [n].[IsNav], [n].[Name], [n].[ShowIndex], [n].[ParentID], CASE
    WHEN [n].[ParentID] = '00000000-0000-0000-0000-000000000000'
    THEN N'--根目录--' ELSE (
        SELECT TOP(1) [a].[Name]
        FROM [Menu] AS [a]
        WHERE [a].[ID] = [n].[ParentID]
    )
END AS [ParentMenuName], CASE
    WHEN [n].[IsNav] = 1
    THEN CASE
        WHEN [n].[ActionName] IS NULL OR ([n].[ActionName] = N'')
        THEN 1 ELSE 2
    END ELSE 3
END AS [MenuType]
FROM [Menu] AS [n]
INNER JOIN [Application] AS [n.ApplicationID_Model] ON [n].[ApplicationID] = [n.ApplicationID_Model].[ID]
WHERE [n].[ID] = @__rid_0 
2017-10-20 15:48:54.160   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 21.4408ms 200 text/html; charset=utf-8 
2017-10-20 15:48:54.161   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.MenuController.Modify (AdminSite) in 20.2064ms 
2017-10-20 15:48:54.254   Information   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully authenticated. 
m-urlencoded; charset=UTF-8 50 
2017-10-20 15:48:54.265   Information   Microsoft.AspNetCore.Mvc.Formatters.Json.Internal.JsonResultExecutor   Executing JsonResult, writing value System.Collections.Generic.List`1[<>f__AnonymousType1`4[System.Guid,System.Guid,System.String,System.Boolean]]. 
2017-10-20 15:48:54.270   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Controllers.MenuController.QueryJson (AdminSite) with arguments (00000000-0000-0000-0000-000000000001, True) - ModelState is Valid 
]
FROM [Menu] AS [a]
WHERE ([a].[ApplicationID] = @__applicationId_0) AND ([a].[IsNav] = @__isNav_Value_1) 
2017-10-20 15:48:57.591   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 POST http://localhost:27644/Menu/Modify/049cf9e2-623c-4e10-ba29-c1470be3fa65 application/x-www-form-urlencoded 569 
2017-10-20 15:48:57.607   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.Me2017-10-20 15:48:57.608   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 14.6854ms 302  
2017-10-20 15:48:57.613   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (3ms) [Parameters=[@p13='?', @p0='?' (Size = 4000), @p1='?', @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?', @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?', @p9='?' (Size = 4000), @p10='?', @p11='?' (Size = 4000), @p12='?'], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Menu] SET [ActionName] = @p0, [ApplicationID] = @p1, [AreaName] = @p2, [Code] = @p3, [ControllerName] = @p4, [CreateDate] = @p5, [Description] = @p6, [IconCss] = @p7, [IsNav] = @p8, [Name] = @p9, [ParentID] = @p10, [PyCode] = @p11, [ShowIndex] = @p12
WHERE [ID] = @p13;
SELECT @@ROWCOUNT; 
2017-10-20 15:48:57.613   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
dify (AdminSite) with arguments (ViewModels.AdminWeb.Nav.MenuViewModel) - ModelState is Valid 
2017-10-20 15:48:57.617   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
2017-10-20 15:48:57.629   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Menu] AS [n]
INNER JOIN [Application] AS [n.ApplicationID_Model] ON [n].[ApplicationID] = [n.ApplicationID_Model].[ID] 
2017-10-20 15:48:57.630   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (4ms) [Parameters=[@__p_0='?', @__p_1='?'], CommandType='Text', CommandTimeout='30']
SELECT [t].[ID], [t].[ApplicationName], [t].[ActionName], [t].[ApplicationID], [t].[PyCode], [t].[Code], [t].[ControllerName], [t].[CreateDate], [t].[Description], [t].[IconCss], [t].[IsNav], [t].[Name], [t].[ShowIndex], [t].[ParentID], [t].[ParentMenuName]
FROM (
    SELECT [n].[ID], [n.ApplicationID_Model].[Name] AS [ApplicationName], [n].[ActionName], [n].[ApplicationID], [n].[PyCode], [n].[Code], [n].[ControllerName], [n].[CreateDate], [n].[Description], [n].[IconCss], [n].[IsNav], [n].[Name], [n].[ShowIndex], [n].[ParentID], CASE
        WHEN [n].[ParentID] = '00000000-0000-0000-0000-000000000000'
        THEN N'--根目录--' ELSE (
            SELECT TOP(1) [a].[Name]
            FROM [Menu] AS [a]
            WHERE [a].[ID] = [n].[ParentID]
        )
    END AS [ParentMenuName], ROW_NUMBER() OVER(ORDER BY [n].[ShowIndex]) AS [__RowNumber__]
    FROM [Menu] AS [n]
    INNER JOIN [Application] AS [n.ApplicationID_Model] ON [n].[ApplicationID] = [n.ApplicationID_Model].[ID]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_0) AND ([t].[__RowNumber__] <= (@__p_0 + @__p_1)) 
2017-10-20 15:48:57.635   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Controllers.MenuController.Index (AdminSite) with arguments (1) - ModelState is Valid 
2017-10-20 15:48:57.636   Information   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully authenticated. 
2017-10-20 15:48:57.636   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
2017-10-20 15:48:57.642   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a]
WHERE ((1 & CASE
    WHEN UPPER([a].[ActionName]) = N'INDEX'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) & CASE
    WHEN UPPER([a].[ControllerName]) = N'MENU'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) = 1 
2017-10-20 15:48:57.651   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a] 
2017-10-20 15:48:57.655   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (5ms) [Parameters=[@__userID_0='?'], CommandType='Text', CommandTimeout='30']
SELECT DISTINCT [m].[ID], [m].[ActionName], [m].[ApplicationID], [m].[AreaName], [m].[Code], [m].[ControllerName], [m].[CreateDate], [m].[Description], [m].[IconCss], [m].[IsNav], [m].[Name], [m].[ParentID], [m].[PyCode], [m].[ShowIndex]
FROM [Menu] AS [m]
INNER JOIN [UserRoleJurisdiction] AS [urj] ON [m].[ID] = [urj].[MenuID]
INNER JOIN [UserRole] AS [ur] ON [urj].[RoleID] = [ur].[RoleID]
WHERE [ur].[UserID] = @__userID_0 
2017-10-20 15:48:57.756   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Controllers.MenuController.QueryJson (AdminSite) with arguments (, True) - ModelState is Valid 
em.String,System.Boolean]]. 
2017-10-20 15:48:57.756   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
2017-10-20 15:48:57.758   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.MenuController.QueryJson (AdminSite) in 3.0606ms 
2017-10-20 15:48:57.761   Information   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully authenticated. 
2017-10-20 15:48:57.763   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 POST http://localhost:27644/Menu/QueryJson application/x-www-form-urlencoded; charset=UTF-8 10 
2017-10-20 15:48:57.767   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (1ms) [Parameters=[@__isNav_Value_0='?'], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[ParentID] AS [pId], [a].[Name]
FROM [Menu] AS [a]
WHERE [a].[IsNav] = @__isNav_Value_0 
2017-10-20 15:48:57.767   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 3.9542ms 200 application/json; charset=utf-8 
2017-10-20 15:49:05.295   Information   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully authenticated. 
2017-10-20 15:49:05.302   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
2017-10-20 15:49:05.318   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
dex (AdminSite) with arguments (1) - ModelState is Valid 
2017-10-20 15:49:05.327   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [u].[ID], [u].[AccessFailedCount], [u].[CreateDate], [u].[Email], [u].[EmailConfirmed], [u].[ImgUrl], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[LoginName], [u].[MobilePhone], [u].[MobilePhoneConfirmed], [u].[Name], [u].[NormalizedEmail], [u].[NormalizedLoginName], [u].[OrganizationID], [u].[Password], [u].[PyCode], [u].[UpdateDate]
FROM [User] AS [u] 
2017-10-20 15:49:05.358   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [u].[ID], [u].[AccessFailedCount], [u].[CreateDate], [u].[Email], [u].[EmailConfirmed], [u].[ImgUrl], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[LoginName], [u].[MobilePhone], [u].[MobilePhoneConfirmed], [u].[Name], [u].[NormalizedEmail], [u].[NormalizedLoginName], [u].[OrganizationID], [u].[Password], [u].[PyCode], [u].[UpdateDate]
FROM [User] AS [u] 
2017-10-20 15:49:05.498   Information   Microsoft.AspNetCore.Mvc.ViewFeatures.Internal.ViewResultExecutor   Executing ViewResult, running view at path /Views/User/Index.cshtml. 
2017-10-20 15:49:05.682   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a] 
 [a]
WHERE ((1 & CASE
    WHEN UPPER([a].[ActionName]) = N'INDEX'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) & CASE
    WHEN UPPER([a].[ControllerName]) = N'USER'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) = 1 
2017-10-20 15:49:05.683   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[@__userID_0='?'], CommandType='Text', CommandTimeout='30']
SELECT DISTINCT [m].[ID], [m].[ActionName], [m].[ApplicationID], [m].[AreaName], [m].[Code], [m].[ControllerName], [m].[CreateDate], [m].[Description], [m].[IconCss], [m].[IsNav], [m].[Name], [m].[ParentID], [m].[PyCode], [m].[ShowIndex]
FROM [Menu] AS [m]
INNER JOIN [UserRoleJurisdiction] AS [urj] ON [m].[ID] = [urj].[MenuID]
INNER JOIN [UserRole] AS [ur] ON [urj].[RoleID] = [ur].[RoleID]
WHERE [ur].[UserID] = @__userID_0 
2017-10-20 15:49:05.684   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 384.2624ms 200 text/html; charset=utf-8 
2017-10-20 15:49:05.687   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[Code], [a].[CreateDate], [a].[Description], [a].[Name], [a].[PyCode], [a].[ShowIndex]
FROM [Application] AS [a] 
2017-10-20 15:50:09.842   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 GET http://localhost:27644/   
2017-10-20 15:50:09.875   Information   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully authenticated. 
2017-10-20 15:50:09.999   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
2017-10-20 15:50:10.014   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Controllers.HomeController.Index (AdminSite) with arguments ((null)) - ModelState is Valid 
2017-10-20 15:50:12.625   Information   Microsoft.AspNetCore.Mvc.ViewFeatures.Internal.ViewResultExecutor   Executing ViewResult, running view at path /Views/Home/Index.cshtml. 
2017-10-20 15:50:16.298   Information   Microsoft.EntityFrameworkCore.Infrastructure   Entity Framework Core 2.0.0-rtm-26452 initialized 'PermissionSystemContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging  
2017-10-20 15:50:16.481   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (12ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a]
WHERE ((1 & CASE
    WHEN UPPER([a].[ActionName]) = N'INDEX'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) & CASE
    WHEN UPPER([a].[ControllerName]) = N'HOME'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) = 1 
2017-10-20 15:50:16.554   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (25ms) [Parameters=[@__userID_0='?'], CommandType='Text', CommandTimeout='30']
SELECT DISTINCT [m].[ID], [m].[ActionName], [m].[ApplicationID], [m].[AreaName], [m].[Code], [m].[ControllerName], [m].[CreateDate], [m].[Description], [m].[IconCss], [m].[IsNav], [m].[Name], [m].[ParentID], [m].[PyCode], [m].[ShowIndex]
FROM [Menu] AS [m]
INNER JOIN [UserRoleJurisdiction] AS [urj] ON [m].[ID] = [urj].[MenuID]
INNER JOIN [UserRole] AS [ur] ON [urj].[RoleID] = [ur].[RoleID]
WHERE [ur].[UserID] = @__userID_0 
2017-10-20 15:50:16.601   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[Code], [a].[CreateDate], [a].[Description], [a].[Name], [a].[PyCode], [a].[ShowIndex]
FROM [Application] AS [a] 
2017-10-20 15:50:16.775   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a] 
2017-10-20 15:50:17.062   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.HomeController.Index (AdminSite) in 7066.2374ms 
2017-10-20 15:53:07.887   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 GET http://localhost:27644/ApiResources/Index   
2017-10-20 15:53:07.907   Information   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully authenticated. 
2017-10-20 15:53:08.045   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Controllers.ApiResourcesController.Index (AdminSite) with arguments ((null)) - ModelState is Valid 
2017-10-20 15:53:08.715   Information   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully authenticated. 
2017-10-20 15:53:08.715   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 GET http://localhost:27644/Home/Index   
2017-10-20 15:53:08.732   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
dex (AdminSite) with arguments ((null)) - ModelState is Valid 
2017-10-20 15:53:10.077   Information   Microsoft.AspNetCore.Mvc.ViewFeatures.Internal.ViewResultExecutor   Executing ViewResult, running view at path /Views/Home/Index.cshtml. 
html. 
2017-10-20 15:53:10.665   Information   Microsoft.EntityFrameworkCore.Infrastructure   Entity Framework Core 2.0.0-rtm-26452 initialized 'PermissionSystemContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging  
2017-10-20 15:53:10.866   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a]
WHERE ((1 & CASE
    WHEN UPPER([a].[ActionName]) = N'INDEX'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) & CASE
    WHEN UPPER([a].[ControllerName]) = N'APIRESOURCES'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) = 1 
2017-10-20 15:53:10.998   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (33ms) [Parameters=[@__userID_0='?'], CommandType='Text', CommandTimeout='30']
SELECT DISTINCT [m].[ID], [m].[ActionName], [m].[ApplicationID], [m].[AreaName], [m].[Code], [m].[ControllerName], [m].[CreateDate], [m].[Description], [m].[IconCss], [m].[IsNav], [m].[Name], [m].[ParentID], [m].[PyCode], [m].[ShowIndex]
FROM [Menu] AS [m]
INNER JOIN [UserRoleJurisdiction] AS [urj] ON [m].[ID] = [urj].[MenuID]
INNER JOIN [UserRole] AS [ur] ON [urj].[RoleID] = [ur].[RoleID]
WHERE [ur].[UserID] = @__userID_0 
2017-10-20 15:53:11.014   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[Code], [a].[CreateDate], [a].[Description], [a].[Name], [a].[PyCode], [a].[ShowIndex]
FROM [Application] AS [a] 
2017-10-20 15:53:11.225   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a] 
2017-10-20 15:53:11.536   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.ApiResourcesController.Index (AdminSite) in 3496.5013ms 
2017-10-20 15:53:13.740   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a]
WHERE ((1 & CASE
    WHEN UPPER([a].[ActionName]) = N'INDEX'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) & CASE
    WHEN UPPER([a].[ControllerName]) = N'HOME'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) = 1 
2017-10-20 15:53:13.748   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a] 
2017-10-20 15:53:13.773   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.HomeController.Index (AdminSite) in 5047.1875ms 
2017-10-20 15:54:49.486   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 GET http://localhost:27644/Menu/Index   
2017-10-20 15:54:49.499   Information   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully authenticated. 
2017-10-20 15:54:49.513   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
2017-10-20 15:54:49.529   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Controllers.MenuController.Index (AdminSite) with arguments (1) - ModelState is Valid 
2017-10-20 15:54:49.591   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (4ms) [Parameters=[@__p_0='?', @__p_1='?'], CommandType='Text', CommandTimeout='30']
SELECT [t].[ID], [t].[ApplicationName], [t].[ActionName], [t].[ApplicationID], [t].[PyCode], [t].[Code], [t].[ControllerName], [t].[CreateDate], [t].[Description], [t].[IconCss], [t].[IsNav], [t].[Name], [t].[ShowIndex], [t].[ParentID], [t].[ParentMenuName]
FROM (
    SELECT [n].[ID], [n.ApplicationID_Model].[Name] AS [ApplicationName], [n].[ActionName], [n].[ApplicationID], [n].[PyCode], [n].[Code], [n].[ControllerName], [n].[CreateDate], [n].[Description], [n].[IconCss], [n].[IsNav], [n].[Name], [n].[ShowIndex], [n].[ParentID], CASE
        WHEN [n].[ParentID] = '00000000-0000-0000-0000-000000000000'
        THEN N'--根目录--' ELSE (
            SELECT TOP(1) [a].[Name]
            FROM [Menu] AS [a]
            WHERE [a].[ID] = [n].[ParentID]
        )
    END AS [ParentMenuName], ROW_NUMBER() OVER(ORDER BY [n].[ShowIndex]) AS [__RowNumber__]
    FROM [Menu] AS [n]
    INNER JOIN [Application] AS [n.ApplicationID_Model] ON [n].[ApplicationID] = [n.ApplicationID_Model].[ID]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_0) AND ([t].[__RowNumber__] <= (@__p_0 + @__p_1)) 
2017-10-20 15:54:49.635   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Menu] AS [n]
INNER JOIN [Application] AS [n.ApplicationID_Model] ON [n].[ApplicationID] = [n.ApplicationID_Model].[ID] 
2017-10-20 15:54:49.916   Information   Microsoft.AspNetCore.Mvc.ViewFeatures.Internal.ViewResultExecutor   Executing ViewResult, running view at path /Views/Menu/Index.cshtml. 
2017-10-20 15:54:50.505   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a]
WHERE ((1 & CASE
    WHEN UPPER([a].[ActionName]) = N'INDEX'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) & CASE
    WHEN UPPER([a].[ControllerName]) = N'MENU'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) = 1 
2017-10-20 15:54:50.523   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (3ms) [Parameters=[@__userID_0='?'], CommandType='Text', CommandTimeout='30']
SELECT DISTINCT [m].[ID], [m].[ActionName], [m].[ApplicationID], [m].[AreaName], [m].[Code], [m].[ControllerName], [m].[CreateDate], [m].[Description], [m].[IconCss], [m].[IsNav], [m].[Name], [m].[ParentID], [m].[PyCode], [m].[ShowIndex]
FROM [Menu] AS [m]
INNER JOIN [UserRoleJurisdiction] AS [urj] ON [m].[ID] = [urj].[MenuID]
INNER JOIN [UserRole] AS [ur] ON [urj].[RoleID] = [ur].[RoleID]
WHERE [ur].[UserID] = @__userID_0 
2017-10-20 15:54:50.531   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 1034.141ms 200 text/html; charset=utf-8 
2017-10-20 15:54:50.531   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.MenuController.Index (AdminSite) in 1011.5849ms 
2017-10-20 15:54:50.721   Information   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully authenticated. 
m-urlencoded; charset=UTF-8 10 
2017-10-20 15:54:50.733   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
2017-10-20 15:54:50.752   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Controllers.MenuController.QueryJson (AdminSite) with arguments (, True) - ModelState is Valid 
2017-10-20 15:54:50.765   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (1ms) [Parameters=[@__isNav_Value_0='?'], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[ParentID] AS [pId], [a].[Name]
FROM [Menu] AS [a]
WHERE [a].[IsNav] = @__isNav_Value_0 
2017-10-20 15:54:50.830   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.MenuController.QueryJson (AdminSite) in 96.2843ms 
2017-10-20 15:54:52.385   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Controllers.MenuController.Modify (AdminSite) with arguments (00000000-0000-0000-0000-100000000000) - ModelState is Valid 
2017-10-20 15:54:52.414   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (3ms) [Parameters=[@__rid_0='?'], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [n].[ID], [n.ApplicationID_Model].[Name] AS [ApplicationName], [n].[ActionName], [n].[ApplicationID], [n].[Code], [n].[ControllerName], [n].[CreateDate], [n].[Description], [n].[IconCss], [n].[IsNav], [n].[Name], [n].[ShowIndex], [n].[ParentID], CASE
    WHEN [n].[ParentID] = '00000000-0000-0000-0000-000000000000'
    THEN N'--根目录--' ELSE (
        SELECT TOP(1) [a].[Name]
        FROM [Menu] AS [a]
        WHERE [a].[ID] = [n].[ParentID]
    )
END AS [ParentMenuName], CASE
    WHEN [n].[IsNav] = 1
    THEN CASE
        WHEN [n].[ActionName] IS NULL OR ([n].[ActionName] = N'')
        THEN 1 ELSE 2
    END ELSE 3
END AS [MenuType]
FROM [Menu] AS [n]
INNER JOIN [Application] AS [n.ApplicationID_Model] ON [n].[ApplicationID] = [n.ApplicationID_Model].[ID]
WHERE [n].[ID] = @__rid_0 
2017-10-20 15:54:52.549   Information   Microsoft.AspNetCore.Mvc.ViewFeatures.Internal.ViewResultExecutor   Executing ViewResult, running view at path /Views/Menu/Modify.cshtml. 
2017-10-20 15:54:52.967   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[Code], [a].[CreateDate], [a].[Description], [a].[Name], [a].[PyCode], [a].[ShowIndex]
FROM [Application] AS [a] 
2017-10-20 15:54:52.982   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a]
WHERE ((1 & CASE
    WHEN UPPER([a].[ActionName]) = N'MODIFY'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) & CASE
    WHEN UPPER([a].[ControllerName]) = N'MENU'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) = 1 
2017-10-20 15:54:52.999   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 625.2297ms 200 text/html; charset=utf-8 
CommandTimeout='30']
SELECT [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a] 
2017-10-20 15:54:53.004   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[Code], [a].[CreateDate], [a].[Description], [a].[Name], [a].[PyCode], [a].[ShowIndex]
FROM [Application] AS [a] 
eateDate], [m].[Description], [m].[IconCss], [m].[IsNav], [m].[Name], [m].[ParentID], [m].[PyCode], [m].[ShowIndex]
FROM [Menu] AS [m]
INNER JOIN [UserRoleJurisdiction] AS [urj] ON [m].[ID] = [urj].[MenuID]
INNER JOIN [UserRole] AS [ur] ON [urj].[RoleID] = [ur].[RoleID]
WHERE [ur].[UserID] = @__userID_0 
2017-10-20 15:54:53.100   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.MenuController.QueryJson (AdminSite) in 8.3449ms 
nymousType1`4[System.Guid,System.Guid,System.String,System.Boolean]]. 
2017-10-20 15:54:53.105   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (1ms) [Parameters=[@__applicationId_0='?', @__isNav_Value_1='?'], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[ParentID] AS [pId], [a].[Name]
FROM [Menu] AS [a]
WHERE ([a].[ApplicationID] = @__applicationId_0) AND ([a].[IsNav] = @__isNav_Value_1) 
2017-10-20 15:54:53.109   Information   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully authenticated. 
2017-10-20 15:54:53.110   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 POST http://localhost:27644/Menu/QueryJson application/x-www-form-urlencoded; charset=UTF-8 50 
2017-10-20 15:54:54.454   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a] 
2017-10-20 15:54:54.456   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.MenuController.Index (AdminSite) in 10.3848ms 
2017-10-20 15:54:54.461   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Menu] AS [n]
INNER JOIN [Application] AS [n.ApplicationID_Model] ON [n].[ApplicationID] = [n.ApplicationID_Model].[ID] 
on], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a]
WHERE ((1 & CASE
    WHEN UPPER([a].[ActionName]) = N'INDEX'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) & CASE
    WHEN UPPER([a].[ControllerName]) = N'MENU'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) = 1 
2017-10-20 15:54:54.468   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[@__p_0='?', @__p_1='?'], CommandType='Text', CommandTimeout='30']
SELECT [t].[ID], [t].[ApplicationName], [t].[ActionName], [t].[ApplicationID], [t].[PyCode], [t].[Code], [t].[ControllerName], [t].[CreateDate], [t].[Description], [t].[IconCss], [t].[IsNav], [t].[Name], [t].[ShowIndex], [t].[ParentID], [t].[ParentMenuName]
FROM (
    SELECT [n].[ID], [n.ApplicationID_Model].[Name] AS [ApplicationName], [n].[ActionName], [n].[ApplicationID], [n].[PyCode], [n].[Code], [n].[ControllerName], [n].[CreateDate], [n].[Description], [n].[IconCss], [n].[IsNav], [n].[Name], [n].[ShowIndex], [n].[ParentID], CASE
        WHEN [n].[ParentID] = '00000000-0000-0000-0000-000000000000'
        THEN N'--根目录--' ELSE (
            SELECT TOP(1) [a].[Name]
            FROM [Menu] AS [a]
            WHERE [a].[ID] = [n].[ParentID]
        )
    END AS [ParentMenuName], ROW_NUMBER() OVER(ORDER BY [n].[ShowIndex]) AS [__RowNumber__]
    FROM [Menu] AS [n]
    INNER JOIN [Application] AS [n.ApplicationID_Model] ON [n].[ApplicationID] = [n.ApplicationID_Model].[ID]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_0) AND ([t].[__RowNumber__] <= (@__p_0 + @__p_1)) 
2017-10-20 15:54:54.469   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
2017-10-20 15:54:54.470   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[@__userID_0='?'], CommandType='Text', CommandTimeout='30']
SELECT DISTINCT [m].[ID], [m].[ActionName], [m].[ApplicationID], [m].[AreaName], [m].[Code], [m].[ControllerName], [m].[CreateDate], [m].[Description], [m].[IconCss], [m].[IsNav], [m].[Name], [m].[ParentID], [m].[PyCode], [m].[ShowIndex]
FROM [Menu] AS [m]
INNER JOIN [UserRoleJurisdiction] AS [urj] ON [m].[ID] = [urj].[MenuID]
INNER JOIN [UserRole] AS [ur] ON [urj].[RoleID] = [ur].[RoleID]
WHERE [ur].[UserID] = @__userID_0 
2017-10-20 15:54:54.474   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
2017-10-20 15:54:54.474   Information   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully authenticated. 
2017-10-20 15:54:54.474   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 GET http://localhost:27644/Menu   
2017-10-20 15:54:54.564   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (1ms) [Parameters=[@__isNav_Value_0='?'], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[ParentID] AS [pId], [a].[Name]
FROM [Menu] AS [a]
WHERE [a].[IsNav] = @__isNav_Value_0 
2017-10-20 15:54:54.565   Information   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully authenticated. 
2017-10-20 15:54:54.566   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.MenuController.QueryJson (AdminSite) in 2.5856ms 
2017-10-20 15:54:54.567   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
2017-10-20 15:54:54.568   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Controllers.MenuController.QueryJson (AdminSite) with arguments (, True) - ModelState is Valid 
2017-10-20 15:54:54.570   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 POST http://localhost:27644/Menu/QueryJson application/x-www-form-urlencoded; charset=UTF-8 10 
uid,System.Guid,System.String,System.Boolean]]. 
2017-10-20 15:57:20.796   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 GET http://localhost:27644/Home/Index   
2017-10-20 15:57:20.821   Information   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully authenticated. 
2017-10-20 15:57:20.944   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
2017-10-20 15:57:20.955   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Controllers.HomeController.Index (AdminSite) with arguments ((null)) - ModelState is Valid 
2017-10-20 15:57:23.352   Information   Microsoft.AspNetCore.Mvc.ViewFeatures.Internal.ViewResultExecutor   Executing ViewResult, running view at path /Views/Home/Index.cshtml. 
2017-10-20 15:57:27.053   Information   Microsoft.EntityFrameworkCore.Infrastructure   Entity Framework Core 2.0.0-rtm-26452 initialized 'PermissionSystemContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging  
2017-10-20 15:57:27.219   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (13ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a]
WHERE ((1 & CASE
    WHEN UPPER([a].[ActionName]) = N'INDEX'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) & CASE
    WHEN UPPER([a].[ControllerName]) = N'HOME'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) = 1 
2017-10-20 15:57:27.337   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (46ms) [Parameters=[@__userID_0='?'], CommandType='Text', CommandTimeout='30']
SELECT DISTINCT [m].[ID], [m].[ActionName], [m].[ApplicationID], [m].[AreaName], [m].[Code], [m].[ControllerName], [m].[CreateDate], [m].[Description], [m].[IconCss], [m].[IsNav], [m].[Name], [m].[ParentID], [m].[PyCode], [m].[ShowIndex]
FROM [Menu] AS [m]
INNER JOIN [UserRoleJurisdiction] AS [urj] ON [m].[ID] = [urj].[MenuID]
INNER JOIN [UserRole] AS [ur] ON [urj].[RoleID] = [ur].[RoleID]
WHERE [ur].[UserID] = @__userID_0 
2017-10-20 15:57:27.381   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[Code], [a].[CreateDate], [a].[Description], [a].[Name], [a].[PyCode], [a].[ShowIndex]
FROM [Application] AS [a] 
2017-10-20 15:57:27.564   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a] 
2017-10-20 15:57:27.894   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 7175.8501ms 200 text/html; charset=utf-8 
2017-10-20 15:57:27.894   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.HomeController.Index (AdminSite) in 6950.0715ms 
2017-10-20 15:59:19.926   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 GET http://localhost:27644/Menu/Index   
2017-10-20 15:59:19.938   Information   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully authenticated. 
2017-10-20 15:59:19.958   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
dex (AdminSite) with arguments (1) - ModelState is Valid 
2017-10-20 15:59:20.015   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (4ms) [Parameters=[@__p_0='?', @__p_1='?'], CommandType='Text', CommandTimeout='30']
SELECT [t].[ID], [t].[ApplicationName], [t].[ActionName], [t].[ApplicationID], [t].[PyCode], [t].[Code], [t].[ControllerName], [t].[CreateDate], [t].[Description], [t].[IconCss], [t].[IsNav], [t].[Name], [t].[ShowIndex], [t].[ParentID], [t].[ParentMenuName]
FROM (
    SELECT [n].[ID], [n.ApplicationID_Model].[Name] AS [ApplicationName], [n].[ActionName], [n].[ApplicationID], [n].[PyCode], [n].[Code], [n].[ControllerName], [n].[CreateDate], [n].[Description], [n].[IconCss], [n].[IsNav], [n].[Name], [n].[ShowIndex], [n].[ParentID], CASE
        WHEN [n].[ParentID] = '00000000-0000-0000-0000-000000000000'
        THEN N'--根目录--' ELSE (
            SELECT TOP(1) [a].[Name]
            FROM [Menu] AS [a]
            WHERE [a].[ID] = [n].[ParentID]
        )
    END AS [ParentMenuName], ROW_NUMBER() OVER(ORDER BY [n].[ShowIndex]) AS [__RowNumber__]
    FROM [Menu] AS [n]
    INNER JOIN [Application] AS [n.ApplicationID_Model] ON [n].[ApplicationID] = [n.ApplicationID_Model].[ID]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_0) AND ([t].[__RowNumber__] <= (@__p_0 + @__p_1)) 
2017-10-20 15:59:20.030   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Menu] AS [n]
INNER JOIN [Application] AS [n.ApplicationID_Model] ON [n].[ApplicationID] = [n.ApplicationID_Model].[ID] 
2017-10-20 15:59:20.345   Information   Microsoft.AspNetCore.Mvc.ViewFeatures.Internal.ViewResultExecutor   Executing ViewResult, running view at path /Views/Menu/Index.cshtml. 
2017-10-20 15:59:20.890   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a]
WHERE ((1 & CASE
    WHEN UPPER([a].[ActionName]) = N'INDEX'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) & CASE
    WHEN UPPER([a].[ControllerName]) = N'MENU'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) = 1 
2017-10-20 15:59:20.916   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a] 
2017-10-20 15:59:20.918   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (3ms) [Parameters=[@__userID_0='?'], CommandType='Text', CommandTimeout='30']
SELECT DISTINCT [m].[ID], [m].[ActionName], [m].[ApplicationID], [m].[AreaName], [m].[Code], [m].[ControllerName], [m].[CreateDate], [m].[Description], [m].[IconCss], [m].[IsNav], [m].[Name], [m].[ParentID], [m].[PyCode], [m].[ShowIndex]
FROM [Menu] AS [m]
INNER JOIN [UserRoleJurisdiction] AS [urj] ON [m].[ID] = [urj].[MenuID]
INNER JOIN [UserRole] AS [ur] ON [urj].[RoleID] = [ur].[RoleID]
WHERE [ur].[UserID] = @__userID_0 
2017-10-20 15:59:20.921   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[Code], [a].[CreateDate], [a].[Description], [a].[Name], [a].[PyCode], [a].[ShowIndex]
FROM [Application] AS [a] 
2017-10-20 15:59:20.921   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.MenuController.Index (AdminSite) in 960.4063ms 
2017-10-20 15:59:20.923   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 982.5441ms 200 text/html; charset=utf-8 
2017-10-20 15:59:21.079   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 POST http://localhost:27644/Menu/QueryJson application/x-www-form-urlencoded; charset=UTF-8 10 
2017-10-20 15:59:21.095   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
2017-10-20 15:59:21.119   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Controllers.MenuController.QueryJson (AdminSite) with arguments (, True) - ModelState is Valid 
2017-10-20 15:59:21.138   Information   Microsoft.AspNetCore.Mvc.Formatters.Json.Internal.JsonResultExecutor   Executing JsonResult, writing value System.Collections.Generic.List`1[<>f__AnonymousType1`4[System.Guid,System.Guid,System.String,System.Boolean]]. 
[a]
WHERE [a].[IsNav] = @__isNav_Value_0 
2017-10-20 15:59:21.186   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 97.7051ms 200 application/json; charset=utf-8 
ryJson (AdminSite) in 89.6388ms 
2017-10-20 15:59:22.786   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 GET http://localhost:27644/Menu/Modify/00000000-0000-0000-0000-100000000000   
 (00000000-0000-0000-0000-100000000000) - ModelState is Valid 
2017-10-20 15:59:22.786   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
2017-10-20 15:59:22.811   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (2ms) [Parameters=[@__rid_0='?'], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [n].[ID], [n.ApplicationID_Model].[Name] AS [ApplicationName], [n].[ActionName], [n].[ApplicationID], [n].[Code], [n].[ControllerName], [n].[CreateDate], [n].[Description], [n].[IconCss], [n].[IsNav], [n].[Name], [n].[ShowIndex], [n].[ParentID], CASE
    WHEN [n].[ParentID] = '00000000-0000-0000-0000-000000000000'
    THEN N'--根目录--' ELSE (
        SELECT TOP(1) [a].[Name]
        FROM [Menu] AS [a]
        WHERE [a].[ID] = [n].[ParentID]
    )
END AS [ParentMenuName], CASE
    WHEN [n].[IsNav] = 1
    THEN CASE
        WHEN [n].[ActionName] IS NULL OR ([n].[ActionName] = N'')
        THEN 1 ELSE 2
    END ELSE 3
END AS [MenuType]
FROM [Menu] AS [n]
INNER JOIN [Application] AS [n.ApplicationID_Model] ON [n].[ApplicationID] = [n.ApplicationID_Model].[ID]
WHERE [n].[ID] = @__rid_0 
2017-10-20 15:59:22.951   Information   Microsoft.AspNetCore.Mvc.ViewFeatures.Internal.ViewResultExecutor   Executing ViewResult, running view at path /Views/Menu/Modify.cshtml. 
2017-10-20 15:59:23.343   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[Code], [a].[CreateDate], [a].[Description], [a].[Name], [a].[PyCode], [a].[ShowIndex]
FROM [Application] AS [a] 
2017-10-20 15:59:23.359   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a]
WHERE ((1 & CASE
    WHEN UPPER([a].[ActionName]) = N'MODIFY'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) & CASE
    WHEN UPPER([a].[ControllerName]) = N'MENU'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) = 1 
2017-10-20 15:59:23.374   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 601.7028ms 200 text/html; charset=utf-8 
CommandTimeout='30']
SELECT [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a] 
2017-10-20 15:59:23.376   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.MenuController.Modify (AdminSite) in 594.388ms 
2017-10-20 15:59:23.380   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (1ms) [Parameters=[@__currentMenu_ParentID_0='?'], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a]
WHERE [a].[ID] = @__currentMenu_ParentID_0 
2017-10-20 15:59:23.382   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[@__userID_0='?'], CommandType='Text', CommandTimeout='30']
SELECT DISTINCT [m].[ID], [m].[ActionName], [m].[ApplicationID], [m].[AreaName], [m].[Code], [m].[ControllerName], [m].[CreateDate], [m].[Description], [m].[IconCss], [m].[IsNav], [m].[Name], [m].[ParentID], [m].[PyCode], [m].[ShowIndex]
FROM [Menu] AS [m]
INNER JOIN [UserRoleJurisdiction] AS [urj] ON [m].[ID] = [urj].[MenuID]
INNER JOIN [UserRole] AS [ur] ON [urj].[RoleID] = [ur].[RoleID]
WHERE [ur].[UserID] = @__userID_0 
2017-10-20 15:59:23.467   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
eryJson (AdminSite) with arguments (00000000-0000-0000-0000-000000000001, True) - ModelState is Valid 
2017-10-20 15:59:23.471   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 POST http://localhost:27644/Menu/QueryJson application/x-www-form-urlencoded; charset=UTF-8 50 
2017-10-20 15:59:23.483   Information   Microsoft.AspNetCore.Mvc.Formatters.Json.Internal.JsonResultExecutor   Executing JsonResult, writing value System.Collections.Generic.List`1[<>f__AnonymousType1`4[System.Guid,System.Guid,System.String,System.Boolean]]. 
2017-10-20 15:59:23.483   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 10.0198ms 200 application/json; charset=utf-8 
2017-10-20 15:59:23.488   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (1ms) [Parameters=[@__applicationId_0='?', @__isNav_Value_1='?'], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[ParentID] AS [pId], [a].[Name]
FROM [Menu] AS [a]
WHERE ([a].[ApplicationID] = @__applicationId_0) AND ([a].[IsNav] = @__isNav_Value_1) 
2017-10-20 15:59:23.488   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.MenuController.QueryJson (AdminSite) in 7.7561ms 
2017-10-20 15:59:26.411   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 POST http://localhost:27644/Menu/Modify/00000000-0000-0000-0000-100000000000 application/x-www-form-urlencoded 561 
2017-10-20 15:59:26.424   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Controllers.MenuController.Modify (AdminSite) with arguments (ViewModels.AdminWeb.Nav.MenuViewModel) - ModelState is Valid 
2017-10-20 15:59:26.515   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[@__p_0='?', @__p_1='?'], CommandType='Text', Command2017-10-20 15:59:26.516   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
.[Description], [t].[IconCss], [t].[IsNav], [t].[Name], [t].[ShowIndex], [t].[ParentID], [t].[ParentMenuName]
FROM (
    SELECT [n].[ID], [n.ApplicationID_Model].[Name] AS [ApplicationName], [n].[ActionName], [n].[ApplicationID], [n].[PyCode], [n].[Code], [n].[ControllerName], [n].[CreateDate], [n].[Description], [n].[IconCss], [n].[IsNav], [n].[Name], [n].[ShowIndex], [n].[ParentID], CASE
        WHEN [n].[ParentID] = '00000000-0000-0000-0000-000000000000'
        THEN N'--根目录--' ELSE (
            SELECT TOP(1) [a].[Name]
            FROM [Menu] AS [a]
            WHERE [a].[ID] = [n].[ParentID]
        )
    END AS [ParentMenuName], ROW_NUMBER() OVER(ORDER BY [n].[ShowIndex]) AS [__RowNumber__]
    FROM [Menu] AS [n]
    INNER JOIN [Application] AS [n.ApplicationID_Model] ON [n].[ApplicationID] = [n.ApplicationID_Model].[ID]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_0) AND ([t].[__RowNumber__] <= (@__p_0 + @__p_1)) 
2017-10-20 15:59:26.517   Information   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully authenticated. 
2017-10-20 15:59:26.520   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.MenuController.Modify (AdminSite) in 101.1308ms 
2017-10-20 15:59:26.521   Information   Microsoft.AspNetCore.Mvc.RedirectToActionResult   Executing RedirectResult, redirecting to /Menu. 
='?' (Size = 4000), @p1='?', @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?', @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?', @p9='?' (Size = 4000), @p10='?', @p11='?' (Size = 4000), @p12='?'], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Menu] SET [ActionName] = @p0, [ApplicationID] = @p1, [AreaName] = @p2, [Code] = @p3, [ControllerName] = @p4, [CreateDate] = @p5, [Description] = @p6, [IconCss] = @p7, [IsNav] = @p8, [Name] = @p9, [ParentID] = @p10, [PyCode] = @p11, [ShowIndex] = @p12
WHERE [ID] = @p13;
SELECT @@ROWCOUNT; 
2017-10-20 15:59:26.524   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
2017-10-20 15:59:26.528   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Controllers.MenuController.Index (AdminSite) with arguments (1) - ModelState is Valid 
pplication] AS [n.ApplicationID_Model] ON [n].[ApplicationID] = [n.ApplicationID_Model].[ID] 
2017-10-20 15:59:26.533   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[Code], [a].[CreateDate], [a].[Description], [a].[Name], [a].[PyCode], [a].[ShowIndex]
FROM [Application] AS [a] 
2017-10-20 15:59:26.533   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[@__userID_0='?'], CommandType='Text', CommandTimeout='30']
SELECT DISTINCT [m].[ID], [m].[ActionName], [m].[ApplicationID], [m].[AreaName], [m].[Code], [m].[ControllerName], [m].[CreateDate], [m].[Description], [m].[IconCss], [m].[IsNav], [m].[Name], [m].[ParentID], [m].[PyCode], [m].[ShowIndex]
FROM [Menu] AS [m]
INNER JOIN [UserRoleJurisdiction] AS [urj] ON [m].[ID] = [urj].[MenuID]
INNER JOIN [UserRole] AS [ur] ON [urj].[RoleID] = [ur].[RoleID]
WHERE [ur].[UserID] = @__userID_0 
) ELSE CAST(0 AS BIT)
END) = 1 
2017-10-20 15:59:26.539   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a] 
2017-10-20 15:59:26.634   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
Text', CommandTimeout='30']
SELECT [a].[ID], [a].[ParentID] AS [pId], [a].[Name]
FROM [Menu] AS [a]
WHERE [a].[IsNav] = @__isNav_Value_0 
2017-10-20 15:59:26.634   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.MenuController.QueryJson (AdminSite) in 2.6687ms 
rguments (, True) - ModelState is Valid 
2017-10-20 15:59:26.639   Information   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully authenticated. 
2017-10-20 15:59:26.640   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 POST http://localhost:27644/Menu/QueryJson application/x-www-form-urlencoded; charset=UTF-8 10 
2017-10-20 15:59:26.641   Information   Microsoft.AspNetCore.Mvc.Formatters.Json.Internal.JsonResultExecutor   Executing JsonResult, writing value System.Collections.Generic.List`1[<>f__AnonymousType1`4[System.Guid,System.Guid,System.String,System.Boolean]]. 
2017-10-20 15:59:26.642   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 3.9375ms 200 application/json; charset=utf-8 
2017-10-20 15:59:33.337   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 GET http://localhost:27644/Home/Index   
ller.Index (AdminSite) with arguments ((null)) - ModelState is Valid 
2017-10-20 15:59:33.343   Information   Microsoft.AspNetCore.Mvc.ViewFeatures.Internal.ViewResultExecutor   Executing ViewResult, running view at path /Views/Home/Index.cshtml. 
='30']
SELECT DISTINCT [m].[ID], [m].[ActionName], [m].[ApplicationID], [m].[AreaName], [m].[Code], [m].[ControllerName], [m].[CreateDate], [m].[Description], [m].[IconCss], [m].[IsNav], [m].[Name], [m].[ParentID], [m].[PyCode], [m].[ShowIndex]
FROM [Menu] AS [m]
INNER JOIN [UserRoleJurisdiction] AS [urj] ON [m].[ID] = [urj].[MenuID]
INNER JOIN [UserRole] AS [ur] ON [urj].[RoleID] = [ur].[RoleID]
WHERE [ur].[UserID] = @__userID_0 
2017-10-20 15:59:33.350   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a]
WHERE ((1 & CASE
    WHEN UPPER([a].[ActionName]) = N'INDEX'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) & CASE
    WHEN UPPER([a].[ControllerName]) = N'HOME'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) = 1 
2017-10-20 15:59:33.357   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[Code], [a].[CreateDate], [a].[Description], [a].[Name], [a].[PyCode], [a].[ShowIndex]
FROM [Application] AS [a] 
2017-10-20 15:59:33.360   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 14.3021ms 200 text/html; charset=utf-8 
2017-10-20 15:59:33.365   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.HomeController.Index (AdminSite) in 13.1635ms 
2017-10-20 15:59:59.375   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 11.2212ms 200 text/html; charset=utf-8 
 CommandTimeout='30']
SELECT [a].[ID], [a].[Code], [a].[CreateDate], [a].[Description], [a].[Name], [a].[PyCode], [a].[ShowIndex]
FROM [Application] AS [a] 
ion], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a] 
2017-10-20 15:59:59.382   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a]
WHERE ((1 & CASE
    WHEN UPPER([a].[ActionName]) = N'INDEX'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) & CASE
    WHEN UPPER([a].[ControllerName]) = N'MENU'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) = 1 
2017-10-20 15:59:59.383   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Menu] AS [n]
INNER JOIN [Application] AS [n.ApplicationID_Model] ON [n].[ApplicationID] = [n.ApplicationID_Model].[ID] 
2017-10-20 15:59:59.384   Information   Microsoft.AspNetCore.Mvc.ViewFeatures.Internal.ViewResultExecutor   Executing ViewResult, running view at path /Views/Menu/Index.cshtml. 
2017-10-20 15:59:59.387   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.MenuController.Index (AdminSite) in 10.049ms 
t='30']
SELECT [t].[ID], [t].[ApplicationName], [t].[ActionName], [t].[ApplicationID], [t].[PyCode], [t].[Code], [t].[ControllerName], [t].[CreateDate], [t].[Description], [t].[IconCss], [t].[IsNav], [t].[Name], [t].[ShowIndex], [t].[ParentID], [t].[ParentMenuName]
FROM (
    SELECT [n].[ID], [n.ApplicationID_Model].[Name] AS [ApplicationName], [n].[ActionName], [n].[ApplicationID], [n].[PyCode], [n].[Code], [n].[ControllerName], [n].[CreateDate], [n].[Description], [n].[IconCss], [n].[IsNav], [n].[Name], [n].[ShowIndex], [n].[ParentID], CASE
        WHEN [n].[ParentID] = '00000000-0000-0000-0000-000000000000'
        THEN N'--根目录--' ELSE (
            SELECT TOP(1) [a].[Name]
            FROM [Menu] AS [a]
            WHERE [a].[ID] = [n].[ParentID]
        )
    END AS [ParentMenuName], ROW_NUMBER() OVER(ORDER BY [n].[ShowIndex]) AS [__RowNumber__]
    FROM [Menu] AS [n]
    INNER JOIN [Application] AS [n.ApplicationID_Model] ON [n].[ApplicationID] = [n.ApplicationID_Model].[ID]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_0) AND ([t].[__RowNumber__] <= (@__p_0 + @__p_1)) 
2017-10-20 15:59:59.389   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
dex (AdminSite) with arguments (1) - ModelState is Valid 
2017-10-20 15:59:59.390   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[@__userID_0='?'], CommandType='Text', CommandTimeout='30']
SELECT DISTINCT [m].[ID], [m].[ActionName], [m].[ApplicationID], [m].[AreaName], [m].[Code], [m].[ControllerName], [m].[CreateDate], [m].[Description], [m].[IconCss], [m].[IsNav], [m].[Name], [m].[ParentID], [m].[PyCode], [m].[ShowIndex]
FROM [Menu] AS [m]
INNER JOIN [UserRoleJurisdiction] AS [urj] ON [m].[ID] = [urj].[MenuID]
INNER JOIN [UserRole] AS [ur] ON [urj].[RoleID] = [ur].[RoleID]
WHERE [ur].[UserID] = @__userID_0 
2017-10-20 15:59:59.392   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
2017-10-20 15:59:59.393   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 GET http://localhost:27644/Menu/Index   
2017-10-20 15:59:59.395   Information   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully authenticated. 
2017-10-20 15:59:59.558   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 2.6286ms 200 application/json; charset=utf-8 
fully authenticated. 
2017-10-20 15:59:59.559   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[@__isNav_Value_0='?'], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[ParentID] AS [pId], [a].[Name]
FROM [Menu] AS [a]
WHERE [a].[IsNav] = @__isNav_Value_0 
2017-10-20 15:59:59.560   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Controllers.MenuController.QueryJson (AdminSite) with arguments (, True) - ModelState is Valid 
2017-10-20 15:59:59.563   Information   Microsoft.AspNetCore.Mvc.Formatters.Json.Internal.JsonResultExecutor   Executing JsonResult, writing value System.Collections.Generic.List`1[<>f__AnonymousType1`4[System.Guid,System.Guid,System.String,System.Boolean]]. 
2017-10-20 15:59:59.563   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
2017-10-20 16:00:02.833   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 POST http://localhost:27644/Menu application/x-www-form-urlencoded; charset=UTF-8 363 
2017-10-20 16:00:02.847   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
dex (AdminSite) with arguments (, 00000000-0000-0000-0000-000000000000, 1) - ModelState is Valid 
2017-10-20 16:00:02.854   Information   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully authenticated. 
2017-10-20 16:00:02.871   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.MenuController.Index (AdminSite) in 31.0607ms 
2017-10-20 16:00:02.872   Information   Microsoft.AspNetCore.Mvc.ViewFeatures.Internal.PartialViewResultExecutor   Executing PartialViewResult, running view at path /Views/Menu/AjaxMenuTable.cshtml. 
2017-10-20 16:00:02.875   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (4ms) [Parameters=[@__parentID_0='?', @__p_1='?', @__p_2='?'], CommandType='Text', CommandTimeout='30']
SELECT [t].[ID], [t].[ApplicationName], [t].[ActionName], [t].[ApplicationID], [t].[PyCode], [t].[Code], [t].[ControllerName], [t].[CreateDate], [t].[Description], [t].[IconCss], [t].[IsNav], [t].[Name], [t].[ShowIndex], [t].[ParentID], [t].[ParentMenuName]
FROM (
    SELECT [a].[ID], [a.ApplicationID_Model].[Name] AS [ApplicationName], [a].[ActionName], [a].[ApplicationID], [a].[PyCode], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ShowIndex], [a].[ParentID], CASE
        WHEN [a].[ParentID] = '00000000-0000-0000-0000-000000000000'
        THEN N'--根目录--' ELSE (
            SELECT TOP(1) [a0].[Name]
            FROM [Menu] AS [a0]
            WHERE [a0].[ID] = [a].[ParentID]
        )
    END AS [ParentMenuName], ROW_NUMBER() OVER(ORDER BY [a].[ShowIndex]) AS [__RowNumber__]
    FROM [Menu] AS [a]
    INNER JOIN [Application] AS [a.ApplicationID_Model] ON [a].[ApplicationID] = [a.ApplicationID_Model].[ID]
    WHERE [a].[ParentID] = @__parentID_0
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2)) 
2017-10-20 16:00:05.413   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
dex (AdminSite) with arguments (, 00000000-0000-0000-0000-100000000000, 1) - ModelState is Valid 
2017-10-20 16:00:05.418   Information   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully authenticated. 
ed; charset=UTF-8 368 
2017-10-20 16:00:05.421   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 6.8625ms 200 text/html; charset=utf-8 
2017-10-20 16:00:05.425   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.MenuController.Index (AdminSite) in 6.011ms 
uTable.cshtml. 
2017-10-20 16:00:05.427   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[@__parentID_0='?'], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Menu] AS [a]
INNER JOIN [Application] AS [a.ApplicationID_Model] ON [a].[ApplicationID] = [a.ApplicationID_Model].[ID]
WHERE [a].[ParentID] = @__parentID_0 
2017-10-20 16:00:05.429   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[@__parentID_0='?', @__p_1='?', @__p_2='?'], CommandType='Text', CommandTimeout='30']
SELECT [t].[ID], [t].[ApplicationName], [t].[ActionName], [t].[ApplicationID], [t].[PyCode], [t].[Code], [t].[ControllerName], [t].[CreateDate], [t].[Description], [t].[IconCss], [t].[IsNav], [t].[Name], [t].[ShowIndex], [t].[ParentID], [t].[ParentMenuName]
FROM (
    SELECT [a].[ID], [a.ApplicationID_Model].[Name] AS [ApplicationName], [a].[ActionName], [a].[ApplicationID], [a].[PyCode], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ShowIndex], [a].[ParentID], CASE
        WHEN [a].[ParentID] = '00000000-0000-0000-0000-000000000000'
        THEN N'--根目录--' ELSE (
            SELECT TOP(1) [a0].[Name]
            FROM [Menu] AS [a0]
            WHERE [a0].[ID] = [a].[ParentID]
        )
    END AS [ParentMenuName], ROW_NUMBER() OVER(ORDER BY [a].[ShowIndex]) AS [__RowNumber__]
    FROM [Menu] AS [a]
    INNER JOIN [Application] AS [a.ApplicationID_Model] ON [a].[ApplicationID] = [a.ApplicationID_Model].[ID]
    WHERE [a].[ParentID] = @__parentID_0
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2)) 
2017-10-20 16:00:07.865   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Controllers.MenuController.Modify (AdminSite) with arguments (6a53d2a5-a8b0-472c-9906-1c67176213b8) - ModelState is Valid 
2017-10-20 16:00:07.868   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 GET http://localhost:27644/Menu/Modify/6a53d2a5-a8b0-472c-9906-1c67176213b8   
2017-10-20 16:00:07.880   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[@__currentMenu_ParentID_0='?'], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a]
WHERE [a].[ID] = @__currentMenu_ParentID_0 
AST(1 AS BIT) ELSE CAST(0 AS BIT)
END) & CASE
    WHEN UPPER([a].[ControllerName]) = N'MENU'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) = 1 
2017-10-20 16:00:07.882   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[Code], [a].[CreateDate], [a].[Description], [a].[Name], [a].[PyCode], [a].[ShowIndex]
FROM [Application] AS [a] 
2017-10-20 16:00:07.890   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[Code], [a].[CreateDate], [a].[Description], [a].[Name], [a].[PyCode], [a].[ShowIndex]
FROM [Application] AS [a] 
], [n].[ControllerName], [n].[CreateDate], [n].[Description], [n].[IconCss], [n].[IsNav], [n].[Name], [n].[ShowIndex], [n].[ParentID], CASE
    WHEN [n].[ParentID] = '00000000-0000-0000-0000-000000000000'
    THEN N'--根目录--' ELSE (
        SELECT TOP(1) [a].[Name]
        FROM [Menu] AS [a]
        WHERE [a].[ID] = [n].[ParentID]
    )
END AS [ParentMenuName], CASE
    WHEN [n].[IsNav] = 1
    THEN CASE
        WHEN [n].[ActionName] IS NULL OR ([n].[ActionName] = N'')
        THEN 1 ELSE 2
    END ELSE 3
END AS [MenuType]
FROM [Menu] AS [n]
INNER JOIN [Application] AS [n.ApplicationID_Model] ON [n].[ApplicationID] = [n.ApplicationID_Model].[ID]
WHERE [n].[ID] = @__rid_0 
2017-10-20 16:00:07.891   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.MenuController.Modify (AdminSite) in 9.4373ms 
], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a] 
2017-10-20 16:00:07.895   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[@__userID_0='?'], CommandType='Text', CommandTimeout='30']
SELECT DISTINCT [m].[ID], [m].[ActionName], [m].[ApplicationID], [m].[AreaName], [m].[Code], [m].[ControllerName], [m].[CreateDate], [m].[Description], [m].[IconCss], [m].[IsNav], [m].[Name], [m].[ParentID], [m].[PyCode], [m].[ShowIndex]
FROM [Menu] AS [m]
INNER JOIN [UserRoleJurisdiction] AS [urj] ON [m].[ID] = [urj].[MenuID]
INNER JOIN [UserRole] AS [ur] ON [urj].[RoleID] = [ur].[RoleID]
WHERE [ur].[UserID] = @__userID_0 
2017-10-20 16:00:07.896   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 11.2716ms 200 text/html; charset=utf-8 
2017-10-20 16:00:07.955   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
ns.Generic.List`1[<>f__AnonymousType1`4[System.Guid,System.Guid,System.String,System.Boolean]]. 
lid 
2017-10-20 16:00:07.958   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 2.6575ms 200 application/json; charset=utf-8 
n application/x-www-form-urlencoded; charset=UTF-8 50 
2017-10-20 16:00:07.961   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[@__applicationId_0='?', @__isNav_Value_1='?'], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[ParentID] AS [pId], [a].[Name]
FROM [Menu] AS [a]
WHERE ([a].[ApplicationID] = @__applicationId_0) AND ([a].[IsNav] = @__isNav_Value_1) 
2017-10-20 16:00:10.927   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 6.595ms 302  
2017-10-20 16:00:10.932   Information   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully authenticated. 
2017-10-20 16:00:10.935   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
2017-10-20 16:00:10.939   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
2017-10-20 16:00:10.940   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
2017-10-20 16:00:10.943   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 POST http://localhost:27644/Menu/Modify/6a53d2a5-a8b0-472c-9906-1c67176213b8 application/x-www-form-urlencoded 582 
4000), @p5='?', @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?', @p9='?' (Size = 4000), @p10='?', @p11='?' (Size = 4000), @p12='?'], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Menu] SET [ActionName] = @p0, [ApplicationID] = @p1, [AreaName] = @p2, [Code] = @p3, [ControllerName] = @p4, [CreateDate] = @p5, [Description] = @p6, [IconCss] = @p7, [IsNav] = @p8, [Name] = @p9, [ParentID] = @p10, [PyCode] = @p11, [ShowIndex] = @p12
WHERE [ID] = @p13;
SELECT @@ROWCOUNT; 
2017-10-20 16:00:10.944   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
2017-10-20 16:00:10.947   Information   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully authenticated. 
dTimeout='30']
SELECT [t].[ID], [t].[ApplicationName], [t].[ActionName], [t].[ApplicationID], [t].[PyCode], [t].[Code], [t].[ControllerName], [t].[CreateDate], [t].[Description], [t].[IconCss], [t].[IsNav], [t].[Name], [t].[ShowIndex], [t].[ParentID], [t].[ParentMenuName]
FROM (
    SELECT [n].[ID], [n.ApplicationID_Model].[Name] AS [ApplicationName], [n].[ActionName], [n].[ApplicationID], [n].[PyCode], [n].[Code], [n].[ControllerName], [n].[CreateDate], [n].[Description], [n].[IconCss], [n].[IsNav], [n].[Name], [n].[ShowIndex], [n].[ParentID], CASE
        WHEN [n].[ParentID] = '00000000-0000-0000-0000-000000000000'
        THEN N'--根目录--' ELSE (
            SELECT TOP(1) [a].[Name]
            FROM [Menu] AS [a]
            WHERE [a].[ID] = [n].[ParentID]
        )
    END AS [ParentMenuName], ROW_NUMBER() OVER(ORDER BY [n].[ShowIndex]) AS [__RowNumber__]
    FROM [Menu] AS [n]
    INNER JOIN [Application] AS [n.ApplicationID_Model] ON [n].[ApplicationID] = [n.ApplicationID_Model].[ID]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_0) AND ([t].[__RowNumber__] <= (@__p_0 + @__p_1)) 
2017-10-20 16:00:10.954   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Controllers.MenuController.Modify (AdminSite) with arguments (ViewModels.AdminWeb.Nav.MenuViewModel) - ModelState is Valid 
2017-10-20 16:00:10.955   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Controllers.MenuController.Index (AdminSite) with arguments (1) - ModelState is Valid 
2017-10-20 16:00:10.957   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 12.8197ms 200 text/html; charset=utf-8 
2017-10-20 16:00:10.957   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.MenuController.Modify (AdminSite) in 5.4796ms 
2017-10-20 16:00:10.960   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.MenuController.Index (AdminSite) in 12.0009ms 
], [a].[Code], [a].[CreateDate], [a].[Description], [a].[Name], [a].[PyCode], [a].[ShowIndex]
FROM [Application] AS [a] 
2017-10-20 16:00:10.961   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a] 
2017-10-20 16:00:10.963   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[@__userID_0='?'], CommandType='Text', CommandTimeout='30']
SELECT DISTINCT [m].[ID], [m].[ActionName], [m].[ApplicationID], [m].[AreaName], [m].[Code], [m].[ControllerName], [m].[CreateDate], [m].[Description], [m].[IconCss], [m].[IsNav], [m].[Name], [m].[ParentID], [m].[PyCode], [m].[ShowIndex]
FROM [Menu] AS [m]
INNER JOIN [UserRoleJurisdiction] AS [urj] ON [m].[ID] = [urj].[MenuID]
INNER JOIN [UserRole] AS [ur] ON [urj].[RoleID] = [ur].[RoleID]
WHERE [ur].[UserID] = @__userID_0 
) ELSE CAST(0 AS BIT)
END) = 1 
2017-10-20 16:00:10.965   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Menu] AS [n]
INNER JOIN [Application] AS [n.ApplicationID_Model] ON [n].[ApplicationID] = [n.ApplicationID_Model].[ID] 
2017-10-20 16:00:10.968   Information   Microsoft.AspNetCore.Mvc.RedirectToActionResult   Executing RedirectResult, redirecting to /Menu. 
2017-10-20 16:00:11.046   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.MenuController.QueryJson (AdminSite) in 2.1459ms 
2017-10-20 16:00:11.047   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[@__isNav_Value_0='?'], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[ParentID] AS [pId], [a].[Name]
FROM [Menu] AS [a]
WHERE [a].[IsNav] = @__isNav_Value_0 
2017-10-20 16:00:11.049   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
ation/x-www-form-urlencoded; charset=UTF-8 10 
2017-10-20 16:00:11.052   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Controllers.MenuController.QueryJson (AdminSite) with arguments (, True) - ModelState is Valid 
2017-10-20 16:00:11.052   Information   Microsoft.AspNetCore.Mvc.Formatters.Json.Internal.JsonResultExecutor   Executing JsonResult, writing value System.Collections.Generic.List`1[<>f__AnonymousType1`4[System.Guid,System.Guid,System.String,System.Boolean]]. 
2017-10-20 16:00:20.306   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 11.8928ms 200 text/html; charset=utf-8 
ler.Index (AdminSite) in 10.4977ms 
], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a] 
2017-10-20 16:00:20.313   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[Code], [a].[CreateDate], [a].[Description], [a].[Name], [a].[PyCode], [a].[ShowIndex]
FROM [Application] AS [a] 
escription], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a]
WHERE ((1 & CASE
    WHEN UPPER([a].[ActionName]) = N'INDEX'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) & CASE
    WHEN UPPER([a].[ControllerName]) = N'HOME'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) = 1 
2017-10-20 16:00:20.319   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Controllers.HomeController.Index (AdminSite) with arguments ((null)) - ModelState is Valid 
2017-10-20 16:00:20.325   Information   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully authenticated. 
2017-10-20 16:01:52.455   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a]
WHERE ((1 & CASE
    WHEN UPPER([a].[ActionName]) = N'INDEX'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) & CASE
    WHEN UPPER([a].[ControllerName]) = N'MENU'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) = 1 
2017-10-20 16:01:52.461   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
thenticated. 
dTimeout='30']
SELECT [t].[ID], [t].[ApplicationName], [t].[ActionName], [t].[ApplicationID], [t].[PyCode], [t].[Code], [t].[ControllerName], [t].[CreateDate], [t].[Description], [t].[IconCss], [t].[IsNav], [t].[Name], [t].[ShowIndex], [t].[ParentID], [t].[ParentMenuName]
FROM (
    SELECT [n].[ID], [n.ApplicationID_Model].[Name] AS [ApplicationName], [n].[ActionName], [n].[ApplicationID], [n].[PyCode], [n].[Code], [n].[ControllerName], [n].[CreateDate], [n].[Description], [n].[IconCss], [n].[IsNav], [n].[Name], [n].[ShowIndex], [n].[ParentID], CASE
        WHEN [n].[ParentID] = '00000000-0000-0000-0000-000000000000'
        THEN N'--根目录--' ELSE (
            SELECT TOP(1) [a].[Name]
            FROM [Menu] AS [a]
            WHERE [a].[ID] = [n].[ParentID]
        )
    END AS [ParentMenuName], ROW_NUMBER() OVER(ORDER BY [n].[ShowIndex]) AS [__RowNumber__]
    FROM [Menu] AS [n]
    INNER JOIN [Application] AS [n.ApplicationID_Model] ON [n].[ApplicationID] = [n.ApplicationID_Model].[ID]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_0) AND ([t].[__RowNumber__] <= (@__p_0 + @__p_1)) 
2017-10-20 16:01:52.462   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
2017-10-20 16:01:52.467   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Controllers.MenuController.Index (AdminSite) with arguments (1) - ModelState is Valid 
2017-10-20 16:01:52.472   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 23.1128ms 200 text/html; charset=utf-8 
 CommandTimeout='30']
SELECT [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a] 
2017-10-20 16:01:52.475   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[Code], [a].[CreateDate], [a].[Description], [a].[Name], [a].[PyCode], [a].[ShowIndex]
FROM [Application] AS [a] 
2017-10-20 16:01:52.477   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (4ms) [Parameters=[@__userID_0='?'], CommandType='Text', CommandTimeout='30']
SELECT DISTINCT [m].[ID], [m].[ActionName], [m].[ApplicationID], [m].[AreaName], [m].[Code], [m].[ControllerName], [m].[CreateDate], [m].[Description], [m].[IconCss], [m].[IsNav], [m].[Name], [m].[ParentID], [m].[PyCode], [m].[ShowIndex]
FROM [Menu] AS [m]
INNER JOIN [UserRoleJurisdiction] AS [urj] ON [m].[ID] = [urj].[MenuID]
INNER JOIN [UserRole] AS [ur] ON [urj].[RoleID] = [ur].[RoleID]
WHERE [ur].[UserID] = @__userID_0 
2017-10-20 16:01:52.644   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 POST http://localhost:27644/Menu/QueryJson application/x-www-form-urlencoded; charset=UTF-8 10 
2017-10-20 16:01:52.644   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 3.8352ms 200 application/json; charset=utf-8 
fully authenticated. 
2017-10-20 16:01:52.645   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Controllers.MenuController.QueryJson (AdminSite) with arguments (, True) - ModelState is Valid 
2017-10-20 16:01:52.650   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
ns.Generic.List`1[<>f__AnonymousType1`4[System.Guid,System.Guid,System.String,System.Boolean]]. 
2017-10-20 16:01:52.652   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (1ms) [Parameters=[@__isNav_Value_0='?'], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[ParentID] AS [pId], [a].[Name]
FROM [Menu] AS [a]
WHERE [a].[IsNav] = @__isNav_Value_0 
2017-10-20 16:01:55.363   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 POST http://localhost:27644/Menu application/x-www-form-urlencod2017-10-20 16:01:55.363   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (4ms) [Parameters=[@__parentID_0='?', @__p_1='?', @__p_2='?'], CommandType='Text', CommandTimeout='30']
SELECT [t].[ID], [t].[ApplicationName], [t].[ActionName], [t].[ApplicationID], [t].[PyCode], [t].[Code], [t].[ControllerName], [t].[CreateDate], [t].[Description], [t].[IconCss], [t].[IsNav], [t].[Name], [t].[ShowIndex], [t].[ParentID], [t].[ParentMenuName]
FROM (
    SELECT [a].[ID], [a.ApplicationID_Model].[Name] AS [ApplicationName], [a].[ActionName], [a].[ApplicationID], [a].[PyCode], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ShowIndex], [a].[ParentID], CASE
        WHEN [a].[ParentID] = '00000000-0000-0000-0000-000000000000'
        THEN N'--根目录--' ELSE (
            SELECT TOP(1) [a0].[Name]
            FROM [Menu] AS [a0]
            WHERE [a0].[ID] = [a].[ParentID]
        )
    END AS [ParentMenuName], ROW_NUMBER() OVER(ORDER BY [a].[ShowIndex]) AS [__RowNumber__]
    FROM [Menu] AS [a]
    INNER JOIN [Application] AS [a.ApplicationID_Model] ON [a].[ApplicationID] = [a.ApplicationID_Model].[ID]
    WHERE [a].[ParentID] = @__parentID_0
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2)) 
2017-10-20 16:01:55.366   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.MenuController.Index (AdminSite) in 10.0695ms 
2017-10-20 16:01:55.367   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 11.1606ms 200 text/html; charset=utf-8 
2017-10-20 16:01:55.375   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
dex (AdminSite) with arguments (, 00000000-0000-0000-0000-100000000000, 1) - ModelState is Valid 
2017-10-20 16:01:55.377   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (2ms) [Parameters=[@__parentID_0='?'], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Menu] AS [a]
INNER JOIN [Application] AS [a.ApplicationID_Model] ON [a].[ApplicationID] = [a.ApplicationID_Model].[ID]
WHERE [a].[ParentID] = @__parentID_0 
2017-10-20 16:01:55.382   Information   Microsoft.AspNetCore.Mvc.ViewFeatures.Internal.PartialViewResultExecutor   Executing PartialViewResult, running view at path /Views/Menu/AjaxMenuTable.cshtml. 
2017-10-20 16:01:59.512   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
2017-10-20 16:01:59.514   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (5ms) [Parameters=[@__rid_0='?'], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [n].[ID], [n.ApplicationID_Model].[Name] AS [ApplicationName], [n].[ActionName], [n].[ApplicationID], [n].[Code2017-10-20 16:01:59.516   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (1ms) [Parameters=[@__currentMenu_ParentID_0='?'], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a]
WHERE [a].[ID] = @__currentMenu_ParentID_0 
1 ELSE 2
    END ELSE 3
END AS [MenuType]
FROM [Menu] AS [n]
INNER JOIN [Application] AS [n.ApplicationID_Model] ON [n].[ApplicationID] = [n.ApplicationID_Model].[ID]
WHERE [n].[ID] = @__rid_0 
2017-10-20 16:01:59.518   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a]
WHERE ((1 & CASE
    WHEN UPPER([a].[ActionName]) = N'MODIFY'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) & CASE
    WHEN UPPER([a].[ControllerName]) = N'MENU'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) = 1 
2017-10-20 16:01:59.530   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.MenuController.Modify (AdminSite) in 19.0206ms 
SELECT DISTINCT [m].[ID], [m].[ActionName], [m].[ApplicationID], [m].[AreaName], [m].[Code], [m].[ControllerName], [m].[CreateDate], [m].[Description], [m].[IconCss], [m].[IsNav], [m].[Name], [m].[ParentID], [m].[PyCode], [m].[ShowIndex]
FROM [Menu] AS [m]
INNER JOIN [UserRoleJurisdiction] AS [urj] ON [m].[ID] = [urj].[MenuID]
INNER JOIN [UserRole] AS [ur] ON [urj].[RoleID] = [ur].[RoleID]
WHERE [ur].[UserID] = @__userID_0 
2017-10-20 16:01:59.533   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 20.2545ms 200 text/html; charset=utf-8 
2017-10-20 16:01:59.534   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a] 
2017-10-20 16:01:59.615   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Controllers.MenuController.QueryJson (AdminSite) with arguments (00000000-0000-0000-0000-000000000001, True) - ModelState is Valid 
2017-10-20 16:01:59.617   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (1ms) [Parameters=[@__applicationId_0='?', @__isNav_Value_1='?'], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[ParentID] AS [pId], [a].[Name]
FROM [Menu] AS [a]
WHERE ([a].[ApplicationID] = @__applicationId_0) AND ([a].[IsNav] = @__isNav_Value_1) 
2017-10-20 16:01:59.618   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.MenuController.QueryJson (AdminSite) in 2.8948ms 
2017-10-20 16:01:59.619   Information   Microsoft.AspNetCore.Mvc.Formatters.Json.Internal.JsonResultExecutor   Executing JsonResult, writing value System.Collections.Generic.List`1[<>f__AnonymousType1`4[System.Guid,System.Guid,System.String,System.Boolean]]. 
2017-10-20 16:01:59.622   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 POST http://localhost:27644/Menu/QueryJson application/x-www-form-urlencoded; charset=UTF-8 50 
2017-10-20 16:02:04.091   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
2017-10-20 16:02:04.095   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Controllers.MenuController.Index (AdminSite) with arguments (1) - ModelState is Valid 
2017-10-20 16:02:04.095   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 6.9273ms 302  
/localhost:27644/Menu   
2017-10-20 16:02:04.098   Information   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully authenticated. 
2017-10-20 16:02:04.099   Information   Microsoft.AspNetCore.Mvc.RedirectToActionResult   Executing RedirectResult, redirecting to /Menu. 
='?' (Size = 4000), @p1='?', @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?', @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?', @p9='?' (Size = 4000), @p10='?', @p11='?' (Size = 4000), @p12='?'], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Menu] SET [ActionName] = @p0, [ApplicationID] = @p1, [AreaName] = @p2, [Code] = @p3, [ControllerName] = @p4, [CreateDate] = @p5, [Description] = @p6, [IconCss] = @p7, [IsNav] = @p8, [Name] = @p9, [ParentID] = @p10, [PyCode] = @p11, [ShowIndex] = @p12
WHERE [ID] = @p13;
SELECT @@ROWCOUNT; 
2017-10-20 16:02:04.104   Information   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully authenticated. 
2017-10-20 16:02:04.108   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 POST http://localhost:27644/Menu/Modify/45106461-c3ea-4e06-984f-274cf797b384 application/x-www-form-urlencoded 563 
2017-10-20 16:02:04.108   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Controllers.MenuController.Modify (AdminSite) with arguments (ViewModels.AdminWeb.Nav.MenuViewModel) - ModelState is Valid 
2017-10-20 16:02:04.114   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.MenuController.Index (AdminSite) in 10.5647ms 
2017-10-20 16:02:04.114   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[@__userID_0='?'], CommandType='Text', CommandTimeout='30']
SELECT DISTINCT [m].[ID], [m].[ActionName], [m].[ApplicationID], [m].[AreaName], [m].[Code], [m].[ControllerName], [m].[CreateDate], [m].[Description], [m].[IconCss], [m].[IsNav], [m].[Name], [m].[ParentID], [m].[PyCode], [m].[ShowIndex]
FROM [Menu] AS [m]
INNER JOIN [UserRoleJurisdiction] AS [urj] ON [m].[ID] = [urj].[MenuID]
INNER JOIN [UserRole] AS [ur] ON [urj].[RoleID] = [ur].[RoleID]
WHERE [ur].[UserID] = @__userID_0 
2017-10-20 16:02:04.115   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[Code], [a].[CreateDate], [a].[Description], [a].[Name], [a].[PyCode], [a].[ShowIndex]
FROM [Application] AS [a] 
ollerName], [t].[CreateDate], [t].[Description], [t].[IconCss], [t].[IsNav], [t].[Name], [t].[ShowIndex], [t].[ParentID], [t].[ParentMenuName]
FROM (
    SELECT [n].[ID], [n.ApplicationID_Model].[Name] AS [ApplicationName], [n].[ActionName], [n].[ApplicationID], [n].[PyCode], [n].[Code], [n].[ControllerName], [n].[CreateDate], [n].[Description], [n].[IconCss], [n].[IsNav], [n].[Name], [n].[ShowIndex], [n].[ParentID], CASE
        WHEN [n].[ParentID] = '00000000-0000-0000-0000-000000000000'
        THEN N'--根目录--' ELSE (
            SELECT TOP(1) [a].[Name]
            FROM [Menu] AS [a]
            WHERE [a].[ID] = [n].[ParentID]
        )
    END AS [ParentMenuName], ROW_NUMBER() OVER(ORDER BY [n].[ShowIndex]) AS [__RowNumber__]
    FROM [Menu] AS [n]
    INNER JOIN [Application] AS [n.ApplicationID_Model] ON [n].[ApplicationID] = [n.ApplicationID_Model].[ID]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_0) AND ([t].[__RowNumber__] <= (@__p_0 + @__p_1)) 
2017-10-20 16:02:04.116   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Menu] AS [n]
INNER JOIN [Application] AS [n.ApplicationID_Model] ON [n].[ApplicationID] = [n.ApplicationID_Model].[ID] 
on], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a]
WHERE ((1 & CASE
    WHEN UPPER([a].[ActionName]) = N'INDEX'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) & CASE
    WHEN UPPER([a].[ControllerName]) = N'MENU'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) = 1 
2017-10-20 16:02:04.121   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 11.846ms 200 text/html; charset=utf-8 
, CommandTimeout='30']
SELECT [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a] 
2017-10-20 16:02:04.121   Information   Microsoft.AspNetCore.Mvc.ViewFeatures.Internal.ViewResultExecutor   Executing ViewResult, running view at path /Views/Menu/Index.cshtml. 
2017-10-20 16:02:04.202   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Controllers.MenuController.QueryJson (AdminSite) with arguments (, True) - ModelState is Valid 
], [a].[Name]
FROM [Menu] AS [a]
WHERE [a].[IsNav] = @__isNav_Value_0 
2017-10-20 16:02:04.202   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 POST http://localhost:27644/Menu/QueryJson application/x-www-form-urlencoded; charset=UTF-8 10 
2017-10-20 16:02:04.202   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
2017-10-20 16:02:04.204   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.MenuController.QueryJson (AdminSite) in 1.7579ms 
2017-10-20 16:02:04.206   Information   Microsoft.AspNetCore.Mvc.Formatters.Json.Internal.JsonResultExecutor   Executing JsonResult, writing value System.Collections.Generic.List`1[<>f__AnonymousType1`4[System.Guid,System.Guid,System.String,System.Boolean]]. 
2017-10-20 16:02:04.207   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 2.5552ms 200 application/json; charset=utf-8 
2017-10-20 16:02:14.618   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Controllers.HomeController.Index (AdminSite) with arguments ((null)) - ModelState is Valid 
ion.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
2017-10-20 16:02:14.622   Information   Microsoft.AspNetCore.Mvc.ViewFeatures.Internal.ViewResultExecutor   Executing ViewResult, running view at path /Views/Home/Index.cshtml. 
2017-10-20 16:02:14.633   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[Code], [a].[CreateDate], [a].[Description], [a].[Name], [a].[PyCode], [a].[ShowIndex]
FROM [Application] AS [a] 
2017-10-20 16:02:14.639   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a] 
2017-10-20 16:02:14.642   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a]
WHERE ((1 & CASE
    WHEN UPPER([a].[ActionName]) = N'INDEX'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) & CASE
    WHEN UPPER([a].[ControllerName]) = N'HOME'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) = 1 
2017-10-20 16:02:14.643   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[@__userID_0='?'], CommandType='Text', CommandTimeout='30']
SELECT DISTINCT [m].[ID], [m].[ActionName], [m].[ApplicationID], [m].[AreaName], [m].[Code], [m].[ControllerName], [m].[CreateDate], [m].[Description], [m].[IconCss], [m].[IsNav], [m].[Name], [m].[ParentID], [m].[PyCode], [m].[ShowIndex]
FROM [Menu] AS [m]
INNER JOIN [UserRoleJurisdiction] AS [urj] ON [m].[ID] = [urj].[MenuID]
INNER JOIN [UserRole] AS [ur] ON [urj].[RoleID] = [ur].[RoleID]
WHERE [ur].[UserID] = @__userID_0 
2017-10-20 16:03:09.188   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
dex (AdminSite) with arguments (1) - ModelState is Valid 
rosoft.EntityFrameworkCore.Database.Command   Executed DbCommand (5ms) [Parameters=[@__p_0='?', @__p_1='?'], CommandType='Text', CommandTimeout='30']
SELECT [t].[ID], [t].[ApplicationName], [t].[ActionName], [t].[ApplicationID], [t].[PyCode], [t].[Code], [t].[ControllerName], [t].[CreateDate], [t].[Description], [t].[IconCss], [t].[IsNav], [t].[Name], [t].[ShowIndex], [t].[ParentID], [t].[ParentMenuName]
FROM (
    SELECT [n].[ID], [n.ApplicationID_Model].[Name] AS [ApplicationName], [n].[ActionName], [n].[ApplicationID], [n].[PyCode], [n].[Code], [n].[ControllerName], [n].[CreateDate], [n].[Description], [n].[IconCss], [n].[IsNav], [n].[Name], [n].[ShowIndex], [n].[ParentID], CASE
        WHEN [n].[ParentID] = '00000000-0000-0000-0000-000000000000'
        THEN N'--根目录--' ELSE (
            SELECT TOP(1) [a].[Name]
            FROM [Menu] AS [a]
            WHERE [a].[ID] = [n].[ParentID]
        )
    END AS [ParentMenuName], ROW_NUMBER() OVER(ORDER BY [n].[ShowIndex]) AS [__RowNumber__]
    FROM [Menu] AS [n]
    INNER JOIN [Application] AS [n.ApplicationID_Model] ON [n].[ApplicationID] = [n.ApplicationID_Model].[ID]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_0) AND ([t].[__RowNumber__] <= (@__p_0 + @__p_1)) 
2017-10-20 16:03:09.193   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Menu] AS [n]
INNER JOIN [Application] AS [n.ApplicationID_Model] ON [n].[ApplicationID] = [n.ApplicationID_Model].[ID] 
2017-10-20 16:03:09.196   Information   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully authenticated. 
2017-10-20 16:03:09.197   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 GET http://localhost:27644/Menu/Index   
2017-10-20 16:03:09.203   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 21.7423ms 200 text/html; charset=utf-8 
ler.Index (AdminSite) in 20.656ms 
2017-10-20 16:03:09.207   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (3ms) [Parameters=[@__userID_0='?'], CommandType='Text', CommandTimeout='30']
SELECT DISTINCT [m].[ID], [m].[ActionName], [m].[ApplicationID], [m].[AreaName], [m].[Code], [m].[ControllerName], [m].[CreateDate], [m].[Description], [m].[IconCss], [m].[IsNav], [m].[Name], [m].[ParentID], [m].[PyCode], [m].[ShowIndex]
FROM [Menu] AS [m]
INNER JOIN [UserRoleJurisdiction] AS [urj] ON [m].[ID] = [urj].[MenuID]
INNER JOIN [UserRole] AS [ur] ON [urj].[RoleID] = [ur].[RoleID]
WHERE [ur].[UserID] = @__userID_0 
2017-10-20 16:03:09.211   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a]
WHERE ((1 & CASE
    WHEN UPPER([a].[ActionName]) = N'INDEX'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) & CASE
    WHEN UPPER([a].[ControllerName]) = N'MENU'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) = 1 
2017-10-20 16:03:09.214   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a] 
2017-10-20 16:03:09.376   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
eryJson (AdminSite) with arguments (, True) - ModelState is Valid 
em.String,System.Boolean]]. 
2017-10-20 16:03:09.379   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 4.3326ms 200 application/json; charset=utf-8 
2017-10-20 16:03:09.380   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 POST http://localhost:27644/Menu/QueryJson application/x-www-form-urlencoded; charset=UTF-8 10 
2017-10-20 16:03:09.384   Information   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully authenticated. 
imeout='30']
SELECT [a].[ID], [a].[ParentID] AS [pId], [a].[Name]
FROM [Menu] AS [a]
WHERE [a].[IsNav] = @__isNav_Value_0 
2017-10-20 16:03:11.966   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Controllers.MenuController.Index (AdminSite) with arguments (, 45106461-c3ea-4e06-984f-274cf797b384, 1) - ModelState is Valid 
2017-10-20 16:03:11.971   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 POST http://localhost:27644/Menu application/x-www-form-urlencoded; charset=UTF-8 368 
2017-10-20 16:03:11.974   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
2017-10-20 16:03:11.985   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 9.5294ms 200 text/html; charset=utf-8 
ing view at path /Views/Menu/AjaxMenuTable.cshtml. 
2017-10-20 16:03:11.990   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (3ms) [Parameters=[@__parentID_0='?', @__p_1='?', @__p_2='?'], CommandType='Text', CommandTimeout='30']
SELECT [t].[ID], [t].[ApplicationName], [t].[ActionName], [t].[ApplicationID], [t].[PyCode], [t].[Code], [t].[ControllerName], [t].[CreateDate], [t].[Description], [t].[IconCss], [t].[IsNav], [t].[Name], [t].[ShowIndex], [t].[ParentID], [t].[ParentMenuName]
FROM (
    SELECT [a].[ID], [a.ApplicationID_Model].[Name] AS [ApplicationName], [a].[ActionName], [a].[ApplicationID], [a].[PyCode], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ShowIndex], [a].[ParentID], CASE
        WHEN [a].[ParentID] = '00000000-0000-0000-0000-000000000000'
        THEN N'--根目录--' ELSE (
            SELECT TOP(1) [a0].[Name]
            FROM [Menu] AS [a0]
            WHERE [a0].[ID] = [a].[ParentID]
        )
    END AS [ParentMenuName], ROW_NUMBER() OVER(ORDER BY [a].[ShowIndex]) AS [__RowNumber__]
    FROM [Menu] AS [a]
    INNER JOIN [Application] AS [a.ApplicationID_Model] ON [a].[ApplicationID] = [a.ApplicationID_Model].[ID]
    WHERE [a].[ParentID] = @__parentID_0
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2)) 
2017-10-20 16:03:11.993   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.MenuController.Index (AdminSite) in 8.6714ms 
2017-10-20 16:03:15.934   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[Code], [a].[CreateDate], [a].[Description], [a].[Name], [a].[PyCode], [a].[ShowIndex]
FROM [Application] AS [a] 
2017-10-20 16:03:15.935   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a]
WHERE ((1 & CASE
    WHEN UPPER([a].[ActionName]) = N'MODIFY'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) & CASE
    WHEN UPPER([a].[ControllerName]) = N'MENU'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) = 1 
2017-10-20 16:03:15.938   Information   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully authenticated. 
2017-10-20 16:03:15.937   Information   Microsoft.AspNetCore.Mvc.ViewFeatures.Internal.ViewResultExecutor   Executing ViewResult, running view at path /Views/Menu/Modify.cshtml. 
2017-10-20 16:03:15.957   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[@__userID_0='?'], CommandType='Text', CommandTimeout='30']
SELECT DISTINCT [m].[ID], [m].[ActionName], [m].[ApplicationID], [m].[AreaName], [m].[Code], [m].[ControllerName], [m].[CreateDate], [m].[Description], [m].[IconCss], [m].[IsNav], [m].[Name], [m].[ParentID], [m].[PyCode], [m].[ShowIndex]
FROM [Menu] AS [m]
INNER JOIN [UserRoleJurisdiction] AS [urj] ON [m].[ID] = [urj].[MenuID]
INNER JOIN [UserRole] AS [ur] ON [urj].[RoleID] = [ur].[RoleID]
WHERE [ur].[UserID] = @__userID_0 
2017-10-20 16:03:15.958   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[Code], [a].[CreateDate], [a].[Description], [a].[Name], [a].[PyCode], [a].[ShowIndex]
FROM [Application] AS [a] 
2017-10-20 16:03:15.959   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.MenuController.Modify (AdminSite) in 15.0917ms 
2017-10-20 16:03:15.963   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (3ms) [Parameters=[@__rid_0='?'], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [n].[ID], [n.ApplicationID_Model].[Name] AS [ApplicationName], [n].[ActionName], [n].[ApplicationID], [n].[Code], [n].[ControllerName], [n].[CreateDate], [n].[Description], [n].[IconCss], [n].[IsNav], [n].[Name], [n].[ShowIndex], [n].[ParentID], CASE
    WHEN [n].[ParentID] = '00000000-0000-0000-0000-000000000000'
    THEN N'--根目录--' ELSE (
        SELECT TOP(1) [a].[Name]
        FROM [Menu] AS [a]
        WHERE [a].[ID] = [n].[ParentID]
    )
END AS [ParentMenuName], CASE
    WHEN [n].[IsNav] = 1
    THEN CASE
        WHEN [n].[ActionName] IS NULL OR ([n].[ActionName] = N'')
        THEN 1 ELSE 2
    END ELSE 3
END AS [MenuType]
FROM [Menu] AS [n]
INNER JOIN [Application] AS [n.ApplicationID_Model] ON [n].[ApplicationID] = [n.ApplicationID_Model].[ID]
WHERE [n].[ID] = @__rid_0 
2017-10-20 16:03:15.964   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 16.2736ms 200 text/html; charset=utf-8 
2017-10-20 16:03:15.968   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a] 
2017-10-20 16:03:16.028   Information   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully authenticated. 
2.6546ms 
2017-10-20 16:03:16.029   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 3.4195ms 200 application/json; charset=utf-8 
2017-10-20 16:03:16.030   Information   Microsoft.AspNetCore.Mvc.Formatters.Json.Internal.JsonResultExecutor   Executing JsonResult, writing value System.Collections.Generic.List`1[<>f__AnonymousType1`4[System.Guid,System.Guid,System.String,System.Boolean]]. 
.[Name]
FROM [Menu] AS [a]
WHERE ([a].[ApplicationID] = @__applicationId_0) AND ([a].[IsNav] = @__isNav_Value_1) 
2017-10-20 16:03:16.035   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Controllers.MenuController.QueryJson (AdminSite) with arguments (00000000-0000-0000-0000-000000000001, True) - ModelState is Valid 
2017-10-20 16:03:16.035   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 POST http://localhost:27644/Menu/QueryJson application/x-www-form-urlencoded; charset=UTF-8 50 
2017-10-20 16:03:18.693   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
0000-0000-0000-000000000003 application/x-www-form-urlencoded 578 
2017-10-20 16:03:18.694   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
2017-10-20 16:03:18.703   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Controllers.MenuController.Modify (AdminSite) with arguments (ViewModels.AdminWeb.Nav.MenuViewModel) - ModelState is Valid 
2017-10-20 16:03:18.704   Information   Microsoft.AspNetCore.Mvc.ViewFeatures.Internal.ViewResultExecutor   Executing ViewResult, running view at path /Views/Menu/Index.cshtml. 
2017-10-20 16:03:18.705   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Menu] AS [n]
INNER JOIN [Application] AS [n.ApplicationID_Model] ON [n].[ApplicationID] = [n.ApplicationID_Model].[ID] 
2017-10-20 16:03:18.711   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Controllers.MenuController.Index (AdminSite) with arguments (1) - ModelState is Valid 
2017-10-20 16:03:18.717   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was su2017-10-20 16:03:18.720   Information   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully authenticated. 
2017-10-20 16:03:18.721   Information   Microsoft.AspNetCore.Mvc.RedirectToActionResult   Executing RedirectResult, redirecting to /Menu. 
2017-10-20 16:03:18.725   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (5ms) [Parameters=[@p13='?', @p0='?' (Size = 4000), @p1='?', @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?', @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?', @p9='?' (Size = 4000), @p10='?', @p11='?' (Size = 4000), @p12='?'], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Menu] SET [ActionName] = @p0, [ApplicationID] = @p1, [AreaName] = @p2, [Code] = @p3, [ControllerName] = @p4, [CreateDate] = @p5, [Description] = @p6, [IconCss] = @p7, [IsNav] = @p8, [Name] = @p9, [ParentID] = @p10, [PyCode] = @p11, [ShowIndex] = @p12
WHERE [ID] = @p13;
SELECT @@ROWCOUNT; 
2017-10-20 16:03:18.727   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.MenuController.Modify (AdminSite) in 8.937ms 
2017-10-20 16:03:18.727   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[@__p_0='?', @__p_1='?'], CommandType='Text', CommandTimeout='30']
SELECT [t].[ID], [t].[ApplicationName], [t].[ActionName], [t].[ApplicationID], [t].[PyCode], [t].[Code], [t].[ControllerName], [t].[CreateDate], [t].[Description], [t].[IconCss], [t].[IsNav], [t].[Name], [t].[ShowIndex], [t].[ParentID], [t].[ParentMenuName]
FROM (
    SELECT [n].[ID], [n.ApplicationID_Model].[Name] AS [ApplicationName], [n].[ActionName], [n].[ApplicationID], [n].[PyCode], [n].[Code], [n].[ControllerName], [n].[CreateDate], [n].[Description], [n].[IconCss], [n].[IsNav], [n].[Name], [n].[ShowIndex], [n].[ParentID], CASE
        WHEN [n].[ParentID] = '00000000-0000-0000-0000-000000000000'
        THEN N'--根目录--' ELSE (
            SELECT TOP(1) [a].[Name]
            FROM [Menu] AS [a]
            WHERE [a].[ID] = [n].[ParentID]
        )
    END AS [ParentMenuName], ROW_NUMBER() OVER(ORDER BY [n].[ShowIndex]) AS [__RowNumber__]
    FROM [Menu] AS [n]
    INNER JOIN [Application] AS [n.ApplicationID_Model] ON [n].[ApplicationID] = [n.ApplicationID_Model].[ID]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_0) AND ([t].[__RowNumber__] <= (@__p_0 + @__p_1)) 
2017-10-20 16:03:18.730   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 GET http://localhost:27644/Menu   
2017-10-20 16:03:18.732   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 27.6318ms 200 text/html; charset=utf-8 
2017-10-20 16:03:18.735   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.MenuController.Index (AdminSite) in 26.2755ms 
2017-10-20 16:03:18.737   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a] 
2017-10-20 16:03:18.739   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (5ms) [Parameters=[@__userID_0='?'], CommandType='Text', CommandTimeout='30']
SELECT DISTINCT [m].[ID], [m].[ActionName], [m].[ApplicationID], [m].[AreaName], [m].[Code], [m].[ControllerName], [m].[CreateDate], [m].[Description], [m].[IconCss], [m].[IsNav], [m].[Name], [m].[ParentID], [m].[PyCode], [m].[ShowIndex]
FROM [Menu] AS [m]
INNER JOIN [UserRoleJurisdiction] AS [urj] ON [m].[ID] = [urj].[MenuID]
INNER JOIN [UserRole] AS [ur] ON [urj].[RoleID] = [ur].[RoleID]
WHERE [ur].[UserID] = @__userID_0 
2017-10-20 16:03:18.741   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a]
WHERE ((1 & CASE
    WHEN UPPER([a].[ActionName]) = N'INDEX'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) & CASE
    WHEN UPPER([a].[ControllerName]) = N'MENU'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) = 1 
2017-10-20 16:03:18.823   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 POST http://localhost:27644/Menu/QueryJson application/x-www-form-urlencoded; charset=UTF-8 10 
delState is Valid 
2017-10-20 16:03:18.824   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.MenuController.QueryJson (AdminSite) in 2.0401ms 
]
SELECT [a].[ID], [a].[ParentID] AS [pId], [a].[Name]
FROM [Menu] AS [a]
WHERE [a].[IsNav] = @__isNav_Value_0 
2017-10-20 16:03:18.826   Information   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully authenticated. 
`1[<>f__AnonymousType1`4[System.Guid,System.Guid,System.String,System.Boolean]]. 
2017-10-20 16:03:18.827   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 2.8316ms 200 application/json; charset=utf-8 
2017-10-20 16:03:18.830   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
2017-10-20 16:03:33.974   Information   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully authenticated. 
2017-10-20 16:03:33.975   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Controllers.MenuController.Index (AdminSite) with arguments (, 00000000-0000-0000-0000-100000000000, 1) - ModelState is Valid 
onName], [t].[ApplicationID], [t].[PyCode], [t].[Code], [t].[ControllerName], [t].[CreateDate], [t].[Description], [t].[IconCss], [t].[IsNav], [t].[Name], [t].[ShowIndex], [t].[ParentID], [t].[ParentMenuName]
FROM (
    SELECT [a].[ID], [a.ApplicationID_Model].[Name] AS [ApplicationName], [a].[ActionName], [a].[ApplicationID], [a].[PyCode], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ShowIndex], [a].[ParentID], CASE
        WHEN [a].[ParentID] = '00000000-0000-0000-0000-000000000000'
        THEN N'--根目录--' ELSE (
            SELECT TOP(1) [a0].[Name]
            FROM [Menu] AS [a0]
            WHERE [a0].[ID] = [a].[ParentID]
        )
    END AS [ParentMenuName], ROW_NUMBER() OVER(ORDER BY [a].[ShowIndex]) AS [__RowNumber__]
    FROM [Menu] AS [a]
    INNER JOIN [Application] AS [a.ApplicationID_Model] ON [a].[ApplicationID] = [a.ApplicationID_Model].[ID]
    WHERE [a].[ParentID] = @__parentID_0
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2)) 
2017-10-20 16:03:33.979   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 POST http://localhost:27644/Menu application/x-www-form-urlencoded; charset=UTF-8 368 
2017-10-20 16:03:33.982   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
2017-10-20 16:03:33.988   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (3ms) [Parameters=[@__parentID_0='?'], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Menu] AS [a]
INNER JOIN [Application] AS [a.ApplicationID_Model] ON [a].[ApplicationID] = [a.ApplicationID_Model].[ID]
WHERE [a].[ParentID] = @__parentID_0 
2017-10-20 16:03:33.990   Information   Microsoft.AspNetCore.Mvc.ViewFeatures.Internal.PartialViewResultExecutor   Executing PartialViewResult, running view at path /Views/Menu/AjaxMenuTable.cshtml. 
2017-10-20 16:03:33.995   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.MenuController.Index (AdminSite) in 11.2607ms 
2017-10-20 16:03:36.610   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 POST http://localhost:27644/Menu application/x-www-form-urlencoded; charset=UTF-8 386 
2017-10-20 16:03:36.635   Information   Microsoft.AspNetCore.Mvc.ViewFeatures.Internal.PartialViewResultExecutor   Executing PartialViewResult, running view at path /Views/Menu/AjaxMenuTable.cshtml. 
(*)
FROM [Menu] AS [a]
INNER JOIN [Application] AS [a.ApplicationID_Model] ON [a].[ApplicationID] = [a.ApplicationID_Model].[ID]
WHERE [a].[ParentID] = @__parentID_0 
2017-10-20 16:03:36.635   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Controllers.MenuController.Index (AdminSite) with arguments (, 6a53d2a5-a8b0-472c-9906-1c67176213b8, 1) - ModelState is Valid 
onName], [t].[ApplicationID], [t].[PyCode], [t].[Code], [t].[ControllerName], [t].[CreateDate], [t].[Description], [t].[IconCss], [t].[IsNav], [t].[Name], [t].[ShowIndex], [t].[ParentID], [t].[ParentMenuName]
FROM (
    SELECT [a].[ID], [a.ApplicationID_Model].[Name] AS [ApplicationName], [a].[ActionName], [a].[ApplicationID], [a].[PyCode], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ShowIndex], [a].[ParentID], CASE
        WHEN [a].[ParentID] = '00000000-0000-0000-0000-000000000000'
        THEN N'--根目录--' ELSE (
            SELECT TOP(1) [a0].[Name]
            FROM [Menu] AS [a0]
            WHERE [a0].[ID] = [a].[ParentID]
        )
    END AS [ParentMenuName], ROW_NUMBER() OVER(ORDER BY [a].[ShowIndex]) AS [__RowNumber__]
    FROM [Menu] AS [a]
    INNER JOIN [Application] AS [a.ApplicationID_Model] ON [a].[ApplicationID] = [a.ApplicationID_Model].[ID]
    WHERE [a].[ParentID] = @__parentID_0
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2)) 
2017-10-20 16:03:36.636   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
2017-10-20 16:03:36.637   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.MenuController.Index (AdminSite) in 3.3855ms 
2017-10-20 16:03:36.638   Information   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully authenticated. 
2017-10-20 16:03:36.640   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 4.2756ms 200 text/html; charset=utf-8 
2017-10-20 16:03:39.151   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 GET http://localhost:27644/Menu/Modify/3f9ef0c8-bc80-4081-a6b1-a325efdbc943   
2017-10-20 16:03:39.151   Information   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully authenticated. 
2017-10-20 16:03:39.151   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Controllers.MenuController.Modify (AdminSite) with arguments (3f9ef0c8-bc80-4081-a6b1-a325efdbc943) - ModelState is Valid 
2017-10-20 16:03:39.151   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
2017-10-20 16:03:39.162   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (3ms) [Parameters=[@__rid_0='?'], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [n].[ID], [n.ApplicationID_Model].[Name] AS [ApplicationName], [n].[ActionName], [n].[ApplicationID], [n].[Code], [n].[ControllerName], [n].[CreateDate], [n].[Description], [n].[IconCss], [n].[IsNav], [n].[Name], [n].[ShowIndex], [n].[ParentID], CASE
    WHEN [n].[ParentID] = '00000000-0000-0000-0000-000000000000'
    THEN N'--根目录--' ELSE (
        SELECT TOP(1) [a].[Name]
        FROM [Menu] AS [a]
        WHERE [a].[ID] = [n].[ParentID]
    )
END AS [ParentMenuName], CASE
    WHEN [n].[IsNav] = 1
    THEN CASE
        WHEN [n].[ActionName] IS NULL OR ([n].[ActionName] = N'')
        THEN 1 ELSE 2
    END ELSE 3
END AS [MenuType]
FROM [Menu] AS [n]
INNER JOIN [Application] AS [n.ApplicationID_Model] ON [n].[ApplicationID] = [n.ApplicationID_Model].[ID]
WHERE [n].[ID] = @__rid_0 
2017-10-20 16:03:39.164   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a]
WHERE ((1 & CASE
    WHEN UPPER([a].[ActionName]) = N'MODIFY'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) & CASE
    WHEN UPPER([a].[ControllerName]) = N'MENU'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) = 1 
2017-10-20 16:03:39.167   Information   Microsoft.AspNetCore.Mvc.ViewFeatures.Internal.ViewResultExecutor   Executing ViewResult, running view at path /Views/Menu/Modify.cshtml. 
2017-10-20 16:03:39.167   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[Code], [a].[CreateDate], [a].[Description], [a].[Name], [a].[PyCode], [a].[ShowIndex]
FROM [Application] AS [a] 
2017-10-20 16:03:39.180   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.MenuController.Modify (AdminSite) in 19.0588ms 
, [a].[Code], [a].[CreateDate], [a].[Description], [a].[Name], [a].[PyCode], [a].[ShowIndex]
FROM [Application] AS [a] 
2017-10-20 16:03:39.179   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (4ms) [Parameters=[@__userID_0='?'], CommandType='Text', CommandTimeout='30']
SELECT DISTINCT [m].[ID], [m].[ActionName], [m].[ApplicationID], [m].[AreaName], [m].[Code], [m].[ControllerName], [m].[CreateDate], [m].[Description], [m].[IconCss], [m].[IsNav], [m].[Name], [m].[ParentID], [m].[PyCode], [m].[ShowIndex]
FROM [Menu] AS [m]
INNER JOIN [UserRoleJurisdiction] AS [urj] ON [m].[ID] = [urj].[MenuID]
INNER JOIN [UserRole] AS [ur] ON [urj].[RoleID] = [ur].[RoleID]
WHERE [ur].[UserID] = @__userID_0 
2017-10-20 16:03:39.182   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a] 
2017-10-20 16:03:39.253   Information   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully authenticated. 
2017-10-20 16:03:39.255   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
2017-10-20 16:03:39.257   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 POST http://localhost:27644/Menu/QueryJson application/x-www-form-urlencoded; charset=UTF-8 50 
2017-10-20 16:03:39.280   Information   Microsoft.AspNetCore.Mvc.Formatters.Json.Internal.JsonResultExecutor   Executing JsonResult, writing value System.Collections.Generic.List`1[<>f__AnonymousType1`4[System.Guid,System.Guid,System.String,System.Boolean]]. 
2017-10-20 16:03:39.280   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.MenuController.QueryJson (AdminSite) in 20.7093ms 
guments (00000000-0000-0000-0000-000000000001, True) - ModelState is Valid 
2017-10-20 16:03:39.282   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (2ms) [Parameters=[@__applicationId_0='?', @__isNav_Value_1='?'], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[ParentID] AS [pId], [a].[Name]
FROM [Menu] AS [a]
WHERE ([a].[ApplicationID] = @__applicationId_0) AND ([a].[IsNav] = @__isNav_Value_1) 
2017-10-20 16:03:39.285   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 21.5002ms 200 application/json; charset=utf-8 
2017-10-20 16:03:40.500   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.HomeController.Index (AdminSite) in 14.3364ms 
[a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a]
WHERE ((1 & CASE
    WHEN UPPER([a].[ActionName]) = N'INDEX'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) & CASE
    WHEN UPPER([a].[ControllerName]) = N'HOME'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) = 1 
2017-10-20 16:03:40.501   Information   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully authenticated. 
2017-10-20 16:03:40.503   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a] 
2017-10-20 16:03:40.504   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 GET http://localhost:27644/Home/Index   
='Text', CommandTimeout='30']
SELECT DISTINCT [m].[ID], [m].[ActionName], [m].[ApplicationID], [m].[AreaName], [m].[Code], [m].[ControllerName], [m].[CreateDate], [m].[Description], [m].[IconCss], [m].[IsNav], [m].[Name], [m].[ParentID], [m].[PyCode], [m].[ShowIndex]
FROM [Menu] AS [m]
INNER JOIN [UserRoleJurisdiction] AS [urj] ON [m].[ID] = [urj].[MenuID]
INNER JOIN [UserRole] AS [ur] ON [urj].[RoleID] = [ur].[RoleID]
WHERE [ur].[UserID] = @__userID_0 
2017-10-20 16:03:40.507   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Controllers.HomeController.Index (AdminSite) with arguments ((null)) - ModelState is Valid 
2017-10-20 16:03:40.513   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 15.4025ms 200 text/html; charset=utf-8 
2017-10-20 16:04:49.753   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 GET http://localhost:27644/Menu/Index   
2017-10-20 16:04:49.753   Information   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully authenticated. 
2017-10-20 16:04:49.773   Information   Microsoft.AspNetCore.Mvc.ViewFeatures.Internal.ViewResultExecutor   Executing ViewResult, running view at path /Views/Menu/Index.cshtml. 
COUNT(*)
FROM [Menu] AS [n]
INNER JOIN [Application] AS [n.ApplicationID_Model] ON [n].[ApplicationID] = [n.ApplicationID_Model].[ID] 
e], [t].[CreateDate], [t].[Description], [t].[IconCss], [t].[IsNav], [t].[Name], [t].[ShowIndex], [t].[ParentID], [t].[ParentMenuName]
FROM (
    SELECT [n].[ID], [n.ApplicationID_Model].[Name] AS [ApplicationName], [n].[ActionName], [n].[ApplicationID], [n].[PyCode], [n].[Code], [n].[ControllerName], [n].[CreateDate], [n].[Description], [n].[IconCss], [n].[IsNav], [n].[Name], [n].[ShowIndex], [n].[ParentID], CASE
        WHEN [n].[ParentID] = '00000000-0000-0000-0000-000000000000'
        THEN N'--根目录--' ELSE (
            SELECT TOP(1) [a].[Name]
            FROM [Menu] AS [a]
            WHERE [a].[ID] = [n].[ParentID]
        )
    END AS [ParentMenuName], ROW_NUMBER() OVER(ORDER BY [n].[ShowIndex]) AS [__RowNumber__]
    FROM [Menu] AS [n]
    INNER JOIN [Application] AS [n.ApplicationID_Model] ON [n].[ApplicationID] = [n.ApplicationID_Model].[ID]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_0) AND ([t].[__RowNumber__] <= (@__p_0 + @__p_1)) 
2017-10-20 16:04:49.773   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a]
WHERE ((1 & CASE
    WHEN UPPER([a].[ActionName]) = N'INDEX'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) & CASE
    WHEN UPPER([a].[ControllerName]) = N'MENU'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) = 1 
2017-10-20 16:04:49.776   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Controllers.MenuController.Index (AdminSite) with arguments (1) - ModelState is Valid 
2017-10-20 16:04:49.780   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.MenuController.Index (AdminSite) in 22.9524ms 
], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a] 
ization was successful for user: 超级管理员. 
2017-10-20 16:04:49.783   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[Code], [a].[CreateDate], [a].[Description], [a].[Name], [a].[PyCode], [a].[ShowIndex]
FROM [Application] AS [a] 
2017-10-20 16:04:49.786   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (4ms) [Parameters=[@__userID_0='?'], CommandType='Text', CommandTimeout='30']
SELECT DISTINCT [m].[ID], [m].[ActionName], [m].[ApplicationID], [m].[AreaName], [m].[Code], [m].[ControllerName], [m].[CreateDate], [m].[Description], [m].[IconCss], [m].[IsNav], [m].[Name], [m].[ParentID], [m].[PyCode], [m].[ShowIndex]
FROM [Menu] AS [m]
INNER JOIN [UserRoleJurisdiction] AS [urj] ON [m].[ID] = [urj].[MenuID]
INNER JOIN [UserRole] AS [ur] ON [urj].[RoleID] = [ur].[RoleID]
WHERE [ur].[UserID] = @__userID_0 
2017-10-20 16:04:49.953   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
ns.Generic.List`1[<>f__AnonymousType1`4[System.Guid,System.Guid,System.String,System.Boolean]]. 
2017-10-20 16:04:49.954   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (1ms) [Parameters=[@__isNav_Value_0='?'], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[ParentID] AS [pId], [a].[Name]
FROM [Menu] AS [a]
WHERE [a].[IsNav] = @__isNav_Value_0 
2017-10-20 16:04:49.957   Information   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully authenticated. 
m-urlencoded; charset=UTF-8 10 
2017-10-20 16:04:49.959   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 3.4446ms 200 application/json; charset=utf-8 
2017-10-20 16:04:52.326   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (1ms) [Parameters=[@__parentID_0='?'], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Menu] AS [a]
INNER JOIN [Application] AS [a.ApplicationID_Model] ON [a].[ApplicationID] = [a.ApplicationID_Model].[ID]
WHERE [a].[ParentID] = @__parentID_0 
2017-10-20 16:04:52.327   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
2017-10-20 16:04:52.327   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (4ms) [Parameters=[@__parentID_0='?', @__p_1='?', @__p_2017-10-20 16:04:52.327   Information   Microsoft.AspNetCore.Mvc.ViewFeatures.Internal.PartialViewResultExecutor   Executing PartialViewResult, running view at path /Views/Menu/AjaxMenuTable.cshtml. 
escription], [t].[IconCss], [t].[IsNav], [t].[Name], [t].[ShowIndex], [t].[ParentID], [t].[ParentMenuName]
FROM (
    SELECT [a].[ID], [a.ApplicationID_Model].[Name] AS [ApplicationName], [a].[ActionName], [a].[ApplicationID], [a].[PyCode], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ShowIndex], [a].[ParentID], CASE
        WHEN [a].[ParentID] = '00000000-0000-0000-0000-000000000000'
        THEN N'--根目录--' ELSE (
            SELECT TOP(1) [a0].[Name]
            FROM [Menu] AS [a0]
            WHERE [a0].[ID] = [a].[ParentID]
        )
    END AS [ParentMenuName], ROW_NUMBER() OVER(ORDER BY [a].[ShowIndex]) AS [__RowNumber__]
    FROM [Menu] AS [a]
    INNER JOIN [Application] AS [a.ApplicationID_Model] ON [a].[ApplicationID] = [a.ApplicationID_Model].[ID]
    WHERE [a].[ParentID] = @__parentID_0
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2)) 
2017-10-20 16:04:52.331   Information   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully authenticated. 
2017-10-20 16:04:52.338   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 POST http://localhost:27644/Menu application/x-www-form-urlencoded; charset=UTF-8 386 
2017-10-20 16:04:52.341   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.MenuController.Index (AdminSite) in 9.9659ms 
2017-10-20 16:04:52.342   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Controllers.MenuController.Index (AdminSite) with arguments (, 6a53d2a5-a8b0-472c-9906-1c67176213b8, 1) - ModelState is Valid 
2017-10-20 16:04:54.301   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 GET http://localhost:27644/Menu/Modify/00000000-0000-0000-0000-000000000001   
mation   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully authenticated. 
2017-10-20 16:04:54.318   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[@__userID_0='?'], CommandType='Text', CommandTimeout='30']
SELECT DISTINCT [m].[ID], [m].[ActionName], [m].[ApplicationID], [m].[AreaName], [m].[Code], [m].[ControllerName], [m].[CreateDate], [m].[Description], [m].[IconCss], [m].[IsNav], [m].[Name], [m].[ParentID], [m].[PyCode], [m].[ShowIndex]
FROM [Menu] AS [m]
INNER JOIN [UserRoleJurisdiction] AS [urj] ON [m].[ID] = [urj].[MenuID]
INNER JOIN [UserRole] AS [ur] ON [urj].[RoleID] = [ur].[RoleID]
WHERE [ur].[UserID] = @__userID_0 
T) ELSE CAST(0 AS BIT)
END) = 1 
2017-10-20 16:04:54.322   Information   Microsoft.AspNetCore.Mvc.ViewFeatures.Internal.ViewResultExecutor   Executing ViewResult, running view at path /Views/Menu/Modify.cshtml. 
2017-10-20 16:04:54.325   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[@__currentMenu_ParentID_0='?'], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a]
WHERE [a].[ID] = @__currentMenu_ParentID_0 
2017-10-20 16:04:54.328   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (3ms) [Parameters=[@__rid_0='?'], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [n].[ID], [n.ApplicationID_Model].[Name] AS [ApplicationName], [n].[ActionName], [n].[ApplicationID], [n].[Code], [n].[ControllerName], [n].[CreateDate], [n].[Description], [n].[IconCss], [n].[IsNav], [n].[Name], [n].[ShowIndex], [n].[ParentID], CASE
    WHEN [n].[ParentID] = '00000000-0000-0000-0000-000000000000'
    THEN N'--根目录--' ELSE (
        SELECT TOP(1) [a].[Name]
        FROM [Menu] AS [a]
        WHERE [a].[ID] = [n].[ParentID]
    )
END AS [ParentMenuName], CASE
    WHEN [n].[IsNav] = 1
    THEN CASE
        WHEN [n].[ActionName] IS NULL OR ([n].[ActionName] = N'')
        THEN 1 ELSE 2
    END ELSE 3
END AS [MenuType]
FROM [Menu] AS [n]
INNER JOIN [Application] AS [n.ApplicationID_Model] ON [n].[ApplicationID] = [n.ApplicationID_Model].[ID]
WHERE [n].[ID] = @__rid_0 
2017-10-20 16:04:54.329   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Controllers.MenuController.Modify (AdminSite) with arguments (00000000-0000-0000-0000-000000000001) - ModelState is Valid 
2017-10-20 16:04:54.331   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.MenuController.Modify (AdminSite) in 15.3624ms 
2017-10-20 16:04:54.336   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a] 
2017-10-20 16:04:54.410   Information   Microsoft.AspNetCore.Mvc.Formatters.Json.Internal.JsonResultExecutor   Executing JsonResult, writing value System.Collections.Generic.List`1[<>f__AnonymousType1`4[System.Guid,System.Guid,System.String,System.Boolean]]. 
lid 
2017-10-20 16:04:54.411   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.MenuController.QueryJson (AdminSite) in 2.739ms 
2017-10-20 16:04:54.412   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (1ms) [Parameters=[@__applicationId_0='?', @__isNav_Value_1='?'], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[ParentID] AS [pId], [a].[Name]
FROM [Menu] AS [a]
WHERE ([a].[ApplicationID] = @__applicationId_0) AND ([a].[IsNav] = @__isNav_Value_1) 
2017-10-20 16:04:54.413   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
2017-10-20 16:04:54.413   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 POST http://localhost:27644/Menu/QueryJson application/x-www-form-urlencoded; charset=UTF-8 50 
2017-10-20 16:04:54.415   Information   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully authenticated. 
2017-10-20 16:04:57.019   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 POST http://localhost:27644/Menu/Modify/00000000-0000-0000-0000-000000000001 application/x-www-form-urlencoded 643 
2017-10-20 16:04:57.019   Information   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully authenticated. 
2017-10-20 16:04:57.039   Information   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully authenticated. 
34ms 
2017-10-20 16:04:57.044   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Controllers.MenuController.Modify (AdminSite) with arguments (ViewModels.AdminWeb.Nav.MenuViewModel) - ModelState is Valid 
2017-10-20 16:04:57.047   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 GET http://localhost:27644/Menu   
2017-10-20 16:04:57.048   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
2017-10-20 16:04:57.049   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
='?', @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?', @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?', @p9='?' (Size = 4000), @p10='?', @p11='?' (Size = 4000), @p12='?'], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Menu] SET [ActionName] = @p0, [ApplicationID] = @p1, [AreaName] = @p2, [Code] = @p3, [ControllerName] = @p4, [CreateDate] = @p5, [Description] = @p6, [IconCss] = @p7, [IsNav] = @p8, [Name] = @p9, [ParentID] = @p10, [PyCode] = @p11, [ShowIndex] = @p12
WHERE [ID] = @p13;
SELECT @@ROWCOUNT; 
2017-10-20 16:04:57.054   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 14.2498ms 200 text/html; charset=utf-8 
 CommandTimeout='30']
SELECT [a].[ID], [a].[Code], [a].[CreateDate], [a].[Description], [a].[Name], [a].[PyCode], [a].[ShowIndex]
FROM [Application] AS [a] 
ion], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a] 
2017-10-20 16:04:57.055   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[@__userID_0='?'], CommandType='Text', CommandTimeout='30']
SELECT DISTINCT [m].[ID], [m].[ActionName], [m].[ApplicationID], [m].[AreaName], [m].[Code], [m].[ControllerName], [m].[CreateDate], [m].[Description], [m].[IconCss], [m].[IsNav], [m].[Name], [m].[ParentID], [m].[PyCode], [m].[ShowIndex]
FROM [Menu] AS [m]
INNER JOIN [UserRoleJurisdiction] AS [urj] ON [m].[ID] = [urj].[MenuID]
INNER JOIN [UserRole] AS [ur] ON [urj].[RoleID] = [ur].[RoleID]
WHERE [ur].[UserID] = @__userID_0 
2017-10-20 16:04:57.058   Information   Microsoft.AspNetCore.Mvc.ViewFeatures.Internal.ViewResultExecutor   Executing ViewResult, running view at path /Views/Menu/Index.cshtml. 
2017-10-20 16:04:57.059   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.MenuController.Index (AdminSite) in 13.1581ms 
='30']
SELECT [t].[ID], [t].[ApplicationName], [t].[ActionName], [t].[ApplicationID], [t].[PyCode], [t].[Code], [t].[ControllerName], [t].[CreateDate], [t].[Description], [t].[IconCss], [t].[IsNav], [t].[Name], [t].[ShowIndex], [t].[ParentID], [t].[ParentMenuName]
FROM (
    SELECT [n].[ID], [n.ApplicationID_Model].[Name] AS [ApplicationName], [n].[ActionName], [n].[ApplicationID], [n].[PyCode], [n].[Code], [n].[ControllerName], [n].[CreateDate], [n].[Description], [n].[IconCss], [n].[IsNav], [n].[Name], [n].[ShowIndex], [n].[ParentID], CASE
        WHEN [n].[ParentID] = '00000000-0000-0000-0000-000000000000'
        THEN N'--根目录--' ELSE (
            SELECT TOP(1) [a].[Name]
            FROM [Menu] AS [a]
            WHERE [a].[ID] = [n].[ParentID]
        )
    END AS [ParentMenuName], ROW_NUMBER() OVER(ORDER BY [n].[ShowIndex]) AS [__RowNumber__]
    FROM [Menu] AS [n]
    INNER JOIN [Application] AS [n.ApplicationID_Model] ON [n].[ApplicationID] = [n.ApplicationID_Model].[ID]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_0) AND ([t].[__RowNumber__] <= (@__p_0 + @__p_1)) 
2017-10-20 16:04:57.065   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a]
WHERE ((1 & CASE
    WHEN UPPER([a].[ActionName]) = N'INDEX'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) & CASE
    WHEN UPPER([a].[ControllerName]) = N'MENU'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) = 1 
2017-10-20 16:04:57.132   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
ns.Generic.List`1[<>f__AnonymousType1`4[System.Guid,System.Guid,System.String,System.Boolean]]. 
2017-10-20 16:04:57.132   Information   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully authenticated. 
2017-10-20 16:04:57.134   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Controllers.MenuController.QueryJson (AdminSite) with arguments (, True) - ModelState is Valid 
2017-10-20 16:04:57.137   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[@__isNav_Value_0='?'], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[ParentID] AS [pId], [a].[Name]
FROM [Menu] AS [a]
WHERE [a].[IsNav] = @__isNav_Value_0 
2017-10-20 16:04:57.138   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 3.6941ms 200 application/json; charset=utf-8 
2017-10-20 16:05:02.462   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[Code], [a].[CreateDate], [a].[Description], [a].[Name], [a].[PyCode], [a].[ShowIndex]
FROM [Application] AS [a] 
eateDate], [m].[Description], [m].[IconCss], [m].[IsNav], [m].[Name], [m].[ParentID], [m].[PyCode], [m].[ShowIndex]
FROM [Menu] AS [m]
INNER JOIN [UserRoleJurisdiction] AS [urj] ON [m].[ID] = [urj].[MenuID]
INNER JOIN [UserRole] AS [ur] ON [urj].[RoleID] = [ur].[RoleID]
WHERE [ur].[UserID] = @__userID_0 
) ELSE CAST(0 AS BIT)
END) = 1 
2017-10-20 16:05:02.464   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Controllers.HomeController.Index (AdminSite) with arguments ((null)) - ModelState is Valid 
2017-10-20 16:05:02.469   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.HomeController.Index (AdminSite) in 10.3469ms 
2017-10-20 16:05:02.470   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
2017-10-20 16:05:02.474   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 GET http://localhost:27644/Home/Index   
dTimeout='30']
SELECT [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a] 
2017-10-20 16:09:14.530   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
2017-10-20 16:09:14.539   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (5ms) [Parameters=[@__p_0='?', @__p_1='?'], CommandType='Text', CommandTimeout='30']
SELECT [t].[ID], [t].[ApplicationName], [t].[ActionName], [t].[ApplicationID], [t].[PyCode], [t].[Code], [t].[ControllerName], [t].[CreateDate], [t].[Description], [t].[IconCss], [t].[IsNav], [t].[Name], [t].[ShowIndex], [t].[ParentID], [t].[ParentMenuName]
FROM (
    SELECT [n].[ID], [n.ApplicationID_Model].[Name] AS [ApplicationName], [n].[ActionName], [n].[ApplicationID], [n].[PyCode], [n].[Code], [n].[ControllerName], [n].[CreateDate], [n].[Description], [n].[IconCss], [n].[IsNav], [n].[Name], [n].[ShowIndex], [n].[ParentID], CASE
        WHEN [n].[ParentID] = '00000000-0000-0000-0000-000000000000'
        THEN N'--根目录--' ELSE (
            SELECT TOP(1) [a].[Name]
            FROM [Menu] AS [a]
            WHERE [a].[ID] = [n].[ParentID]
        )
    END AS [ParentMenuName], ROW_NUMBER() OVER(ORDER BY [n].[ShowIndex]) AS [__RowNumber__]
    FROM [Menu] AS [n]
    INNER JOIN [Application] AS [n.ApplicationID_Model] ON [n].[ApplicationID] = [n.ApplicationID_Model].[ID]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_0) AND ([t].[__RowNumber__] <= (@__p_0 + @__p_1)) 
2017-10-20 16:09:14.563   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (4ms) [Parameters=[@__userID_0='?'], CommandType='Text', CommandTimeout='30']
SELECT DISTINCT [m].[ID], [m].[ActionName], [m].[ApplicationID], [m].[AreaName], [m].[Code], [m].[ControllerName], [m].[CreateDate], [m].[Description], [m].[IconCss], [m].[IsNav], [m].[Name], [m].[ParentID], [m].[PyCode], [m].[ShowIndex]
FROM [Menu] AS [m]
INNER JOIN [UserRoleJurisdiction] AS [urj] ON [m].[ID] = [urj].[MenuID]
INNER JOIN [UserRole] AS [ur] ON [urj].[RoleID] = [ur].[RoleID]
WHERE [ur].[UserID] = @__userID_0 
) ELSE CAST(0 AS BIT)
END) = 1 
2017-10-20 16:09:14.564   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Menu] AS [n]
INNER JOIN [Application] AS [n.ApplicationID_Model] ON [n].[ApplicationID] = [n.ApplicationID_Model].[ID] 
2017-10-20 16:09:14.566   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[Code], [a].[CreateDate], [a].[Description], [a].[Name], [a].[PyCode], [a].[ShowIndex]
FROM [Application] AS [a] 
2017-10-20 16:09:14.567   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.MenuController.Index (AdminSite) in 27.4618ms 
2017-10-20 16:09:14.756   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.MenuController.QueryJson (AdminSite) in 3.7698ms 
nymousType1`4[System.Guid,System.Guid,System.String,System.Boolean]]. 
[a]
WHERE [a].[IsNav] = @__isNav_Value_0 
2017-10-20 16:09:14.759   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 4.6768ms 200 application/json; charset=utf-8 
2017-10-20 16:09:14.761   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Controllers.MenuController.QueryJson (AdminSite) with arguments (, True) - ModelState is Valid 
2017-10-20 16:09:14.761   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
2017-10-20 16:09:14.763   Information   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully authenticated. 
2017-10-20 16:09:17.386   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Controllers.MenuController.Index (AdminSite) with arguments (, 1c1e3c35-d6bc-40e7-9e95-a313ebd9bf0a, 1) - ModelState is Valid 
2017-10-20 16:09:17.387   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
w-form-urlencoded; charset=UTF-8 368 
2017-10-20 16:09:17.391   Information   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully authenticated. 
2017-10-20 16:09:17.399   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (3ms) [Parameters=[@__parentID_0='?', @__p_1='?', @__p_2='?'], CommandType='Text', CommandTimeout='30']
SELECT [t].[ID], [t].[ApplicationName], [t].[ActionName], [t].[ApplicationID], [t].[PyCode], [t].[Code], [t].[ControllerName], [t].[CreateDate], [t].[Description], [t].[IconCss], [t].[IsNav], [t].[Name], [t].[ShowIndex], [t].[ParentID], [t].[ParentMenuName]
FROM (
    SELECT [a].[ID], [a.ApplicationID_Model].[Name] AS [ApplicationName], [a].[ActionName], [a].[ApplicationID], [a].[PyCode], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ShowIndex], [a].[ParentID], CASE
        WHEN [a].[ParentID] = '00000000-0000-0000-0000-000000000000'
        THEN N'--根目录--' ELSE (
            SELECT TOP(1) [a0].[Name]
            FROM [Menu] AS [a0]
            WHERE [a0].[ID] = [a].[ParentID]
        )
    END AS [ParentMenuName], ROW_NUMBER() OVER(ORDER BY [a].[ShowIndex]) AS [__RowNumber__]
    FROM [Menu] AS [a]
    INNER JOIN [Application] AS [a.ApplicationID_Model] ON [a].[ApplicationID] = [a.ApplicationID_Model].[ID]
    WHERE [a].[ParentID] = @__parentID_0
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2)) 
2017-10-20 16:09:17.402   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (1ms) [Parameters=[@__parentID_0='?'], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Menu] AS [a]
INNER JOIN [Application] AS [a.ApplicationID_Model] ON [a].[ApplicationID] = [a.ApplicationID_Model].[ID]
WHERE [a].[ParentID] = @__parentID_0 
2017-10-20 16:09:17.403   Information   Microsoft.AspNetCore.Mvc.ViewFeatures.Internal.PartialViewResultExecutor   Executing PartialViewResult, running view at path /Views/Menu/AjaxMenuTable.cshtml. 
2017-10-20 16:09:17.407   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.MenuController.Index (AdminSite) in 13.3848ms 
2017-10-20 16:09:19.206   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[Code], [a].[CreateDate], [a].[Description], [a].[Name], [a].[PyCode], [a].[ShowIndex]
FROM [Application] AS [a] 
2017-10-20 16:09:19.207   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Controllers.MenuController.Modify (AdminSite) with arguments (049cf9e2-623c-4e10-ba29-c1470be3fa65) - ModelState is Valid 
2017-10-20 16:09:19.212   Information   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully authenticated. 
 TOP(1) [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a]
WHERE ((1 & CASE
    WHEN UPPER([a].[ActionName]) = N'MODIFY'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) & CASE
    WHEN UPPER([a].[ControllerName]) = N'MENU'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) = 1 
2017-10-20 16:09:19.213   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 18.3105ms 200 text/html; charset=utf-8 
2017-10-20 16:09:19.218   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.MenuController.Modify (AdminSite) in 17.0103ms 
2017-10-20 16:09:19.220   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[Code], [a].[CreateDate], [a].[Description], [a].[Name], [a].[PyCode], [a].[ShowIndex]
FROM [Application] AS [a] 
2017-10-20 16:09:19.225   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (2ms) [Parameters=[@__currentMenu_ParentID_0='?'], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a]
WHERE [a].[ID] = @__currentMenu_ParentID_0 
2017-10-20 16:09:19.226   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[@__userID_0='?'], CommandType='Text', CommandTimeout='30']
SELECT DISTINCT [m].[ID], [m].[ActionName], [m].[ApplicationID], [m].[AreaName], [m].[Code], [m].[ControllerName], [m].[CreateDate], [m].[Description], [m].[IconCss], [m].[IsNav], [m].[Name], [m].[ParentID], [m].[PyCode], [m].[ShowIndex]
FROM [Menu] AS [m]
INNER JOIN [UserRoleJurisdiction] AS [urj] ON [m].[ID] = [urj].[MenuID]
INNER JOIN [UserRole] AS [ur] ON [urj].[RoleID] = [ur].[RoleID]
WHERE [ur].[UserID] = @__userID_0 
2017-10-20 16:09:19.231   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a] 
2017-10-20 16:09:19.236   Information   Microsoft.AspNetCore.Mvc.ViewFeatures.Internal.ViewResultExecutor   Executing ViewResult, running view at path /Views/Menu/Modify.cshtml. 
2017-10-20 16:09:19.237   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (3ms) [Parameters=[@__rid_0='?'], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [n].[ID], [n.ApplicationID_Model].[Name] AS [ApplicationName], [n].[ActionName], [n].[ApplicationID], [n].[Code], [n].[ControllerName], [n].[CreateDate], [n].[Description], [n].[IconCss], [n].[IsNav], [n].[Name], [n].[ShowIndex], [n].[ParentID], CASE
    WHEN [n].[ParentID] = '00000000-0000-0000-0000-000000000000'
    THEN N'--根目录--' ELSE (
        SELECT TOP(1) [a].[Name]
        FROM [Menu] AS [a]
        WHERE [a].[ID] = [n].[ParentID]
    )
END AS [ParentMenuName], CASE
    WHEN [n].[IsNav] = 1
    THEN CASE
        WHEN [n].[ActionName] IS NULL OR ([n].[ActionName] = N'')
        THEN 1 ELSE 2
    END ELSE 3
END AS [MenuType]
FROM [Menu] AS [n]
INNER JOIN [Application] AS [n.ApplicationID_Model] ON [n].[ApplicationID] = [n.ApplicationID_Model].[ID]
WHERE [n].[ID] = @__rid_0 
2017-10-20 16:09:19.293   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 POST http://localhost:27644/Menu/QueryJson application/x-www-form-urlencoded; charset=UTF-8 50 
2017-10-20 16:09:19.302   Information   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully authenticated. 
2017-10-20 16:09:19.310   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
2017-10-20 16:09:19.322   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (1ms) [Parameters=[@__applicationId_0='?', @__isNav_Value_1='?'], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[ParentID] AS [pId], [a].[Name]
FROM [Menu] AS [a]
WHERE ([a].[ApplicationID] = @__applicationId_0) AND ([a].[IsNav] = @__isNav_Value_1) 
Executing JsonResult, writing value System.Collections.Generic.List`1[<>f__AnonymousType1`4[System.Guid,System.Guid,System.String,System.Boolean]]. 
2017-10-20 16:09:19.325   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 3.729ms 200 application/json; charset=utf-8 
2017-10-20 16:09:21.494   Information   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully authenticated. 
2017-10-20 16:09:21.496   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 POST http://localhost:27644/Menu/Modify/049cf9e2-623c-4e10-ba29-c1470be3fa65 application/x-www-form-urlencoded 579 
2017-10-20 16:09:21.497   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
2017-10-20 16:09:21.507   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.MenuController.Index (AdminSite) in 13.0458ms 
)
FROM [Menu] AS [n]
INNER JOIN [Application] AS [n.ApplicationID_Model] ON [n].[ApplicationID] = [n.ApplicationID_Model].[ID] 
2017-10-20 16:09:21.511   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[Code], [a].[CreateDate], [a].[Description], [a].[Name], [a].[PyCode], [a].[ShowIndex]
FROM [Application] AS [a] 
2017-10-20 16:09:21.512   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (2ms) [Parameters=[@p13='?', @p0='?' (Size = 4000), @p1='?', @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?', @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?', @p9='?' (Size = 4000), @p10='?', @p11='?' (Size = 4000), @p12='?'], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Menu] SET [ActionName] = @p0, [ApplicationID] = @p1, [AreaName] = @p2, [Code] = @p3, [ControllerName] = @p4, [CreateDate] = @p5, [Description] = @p6, [IconCss] = @p7, [IsNav] = @p8, [Name] = @p9, [ParentID] = @p10, [PyCode] = @p11, [ShowIndex] = @p12
WHERE [ID] = @p13;
SELECT @@ROWCOUNT; 
2017-10-20 16:09:21.513   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Controllers.MenuController.Modify (AdminSite) with arguments (ViewModels.AdminWeb.Nav.MenuViewModel) - ModelState is Valid 
2017-10-20 16:09:21.522   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 GET http://localhost:27644/Menu   
2017-10-20 16:09:21.522   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
2017-10-20 16:09:21.523   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[@__p_0='?', @__p_1='?'], CommandType='Text', CommandTimeout='30']
SELECT [t].[ID], [t].[ApplicationName], [t].[ActionName], [t].[ApplicationID], [t].[PyCode], [t].[Code], [t].[ControllerName], [t].[CreateDate], [t].[Description], [t].[IconCss], [t].[IsNav], [t].[Name], [t].[ShowIndex], [t].[ParentID], [t].[ParentMenuName]
FROM (
    SELECT [n].[ID], [n.ApplicationID_Model].[Name] AS [ApplicationName], [n].[ActionName], [n].[ApplicationID], [n].[PyCode], [n].[Code], [n].[ControllerName], [n].[CreateDate], [n].[Description], [n].[IconCss], [n].[IsNav], [n].[Name], [n].[ShowIndex], [n].[ParentID], CASE
        WHEN [n].[ParentID] = '00000000-0000-0000-0000-000000000000'
        THEN N'--根目录--' ELSE (
            SELECT TOP(1) [a].[Name]
            FROM [Menu] AS [a]
            WHERE [a].[ID] = [n].[ParentID]
        )
    END AS [ParentMenuName], ROW_NUMBER() OVER(ORDER BY [n].[ShowIndex]) AS [__RowNumber__]
    FROM [Menu] AS [n]
    INNER JOIN [Application] AS [n.ApplicationID_Model] ON [n].[ApplicationID] = [n.ApplicationID_Model].[ID]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_0) AND ([t].[__RowNumber__] <= (@__p_0 + @__p_1)) 
2017-10-20 16:09:21.524   Information   Microsoft.AspNetCore.Mvc.RedirectToActionResult   Executing RedirectResult, redirecting to /Menu. 
2017-10-20 16:09:21.524   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
2017-10-20 16:09:21.528   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a]
WHERE ((1 & CASE
    WHEN UPPER([a].[ActionName]) = N'INDEX'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) & CASE
    WHEN UPPER([a].[ControllerName]) = N'MENU'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) = 1 
2017-10-20 16:09:21.529   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
2017-10-20 16:09:21.532   Information   Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler   AuthenticationScheme: Cookies was successfully authenticated. 
2017-10-20 16:09:21.533   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (2ms) [Parameters=[@__userID_0='?'], CommandType='Text', CommandTimeout='30']
SELECT DISTINCT [m].[ID], [m].[ActionName], [m].[ApplicationID], [m].[AreaName], [m].[Code], [m].[ControllerName], [m].[CreateDate], [m].[Description], [m].[IconCss], [m].[IsNav], [m].[Name], [m].[ParentID], [m].[PyCode], [m].[ShowIndex]
FROM [Menu] AS [m]
INNER JOIN [UserRoleJurisdiction] AS [urj] ON [m].[ID] = [urj].[MenuID]
INNER JOIN [UserRole] AS [ur] ON [urj].[RoleID] = [ur].[RoleID]
WHERE [ur].[UserID] = @__userID_0 
2017-10-20 16:09:21.547   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 POST http://localhost:27644/Menu/QueryJson application/x-www-form-urlencoded; charset=UTF-8 10 
2017-10-20 16:09:21.548   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Controllers.MenuController.QueryJson (AdminSite) with arguments (, True) - ModelState is Valid 
2017-10-20 16:09:21.560   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executed action AdminSite.Controllers.MenuController.QueryJson (AdminSite) in 1.9006ms 
2017-10-20 16:09:21.561   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[@__isNav_Value_0='?'], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[ParentID] AS [pId], [a].[Name]
FROM [Menu] AS [a]
WHERE [a].[IsNav] = @__isNav_Value_0 
2017-10-20 16:09:37.490   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request starting HTTP/1.1 GET http://localhost:27644/Client/Index   
ly authenticated. 
2017-10-20 16:09:37.499   Information   Microsoft.AspNetCore.Authorization.DefaultAuthorizationService   Authorization was successful for user: 超级管理员. 
2017-10-20 16:09:37.502   Information   Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker   Executing action method AdminSite.Controllers.ClientController.Index (AdminSite) with arguments ((null)) - ModelState is Valid 
2017-10-20 16:09:37.631   Information   Microsoft.AspNetCore.Mvc.ViewFeatures.Internal.ViewResultExecutor   Executing ViewResult, running view at path /Views/Client/Index.cshtml. 
2017-10-20 16:09:37.639   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (2ms) [Parameters=[@__userID_0='?'], CommandType='Text', CommandTimeout='30']
SELECT DISTINCT [m].[ID], [m].[ActionName], [m].[ApplicationID], [m].[AreaName], [m].[Code], [m].[ControllerName], [m].[CreateDate], [m].[Description], [m].[IconCss], [m].[IsNav], [m].[Name], [m].[ParentID], [m].[PyCode], [m].[ShowIndex]
FROM [Menu] AS [m]
INNER JOIN [UserRoleJurisdiction] AS [urj] ON [m].[ID] = [urj].[MenuID]
INNER JOIN [UserRole] AS [ur] ON [urj].[RoleID] = [ur].[RoleID]
WHERE [ur].[UserID] = @__userID_0 
2017-10-20 16:09:37.640   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a]
WHERE ((1 & CASE
    WHEN UPPER([a].[ActionName]) = N'INDEX'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) & CASE
    WHEN UPPER([a].[ControllerName]) = N'CLIENT'
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END) = 1 
2017-10-20 16:09:37.654   Information   Microsoft.EntityFrameworkCore.Database.Command   Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[ID], [a].[Code], [a].[CreateDate], [a].[Description], [a].[Name], [a].[PyCode], [a].[ShowIndex]
FROM [Application] AS [a] 
2017-10-20 16:09:37.660   Information   Microsoft.AspNetCore.Hosting.Internal.WebHost   Request finished in 156.6425ms 200 text/html; charset=utf-8 
CommandTimeout='30']
SELECT [a].[ID], [a].[ActionName], [a].[ApplicationID], [a].[AreaName], [a].[Code], [a].[ControllerName], [a].[CreateDate], [a].[Description], [a].[IconCss], [a].[IsNav], [a].[Name], [a].[ParentID], [a].[PyCode], [a].[ShowIndex]
FROM [Menu] AS [a] 
